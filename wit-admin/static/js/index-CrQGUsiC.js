var D=Object.defineProperty;var v=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var _=(l,t,a)=>t in l?D(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,g=(l,t)=>{for(var a in t||(t={}))F.call(t,a)&&_(l,a,t[a]);if(v)for(var a of v(t))M.call(t,a)&&_(l,a,t[a]);return l};var y=(l,t,a)=>new Promise((e,p)=>{var m=n=>{try{s(a.next(n))}catch(u){p(u)}},h=n=>{try{s(a.throw(n))}catch(u){p(u)}},s=n=>n.done?e(n.value):Promise.resolve(n.value).then(m,h);s((a=a.apply(l,t)).next())});import L from"./RoleManagementEdit-CW780ZNM.js";import{d as E,P as b,r as o,b as R,h as T,o as V,c as O,y as f,p as r,a6 as P,n as S,af as W,ag as Y}from"./index-CmC8Jr0A.js";import{_ as U}from"./index.vue_vue_type_style_index_0_lang-D4meg1a3.js";import{h as $}from"./drugQuotaManagement-GcxaVUCr.js";import"./roleManagement-D9pVtuU6.js";import"./ifComponent.vue_vue_type_style_index_0_lang-ZpisXDR_.js";import"./index-COFi4TtR.js";import"./index.vue_vue_type_script_setup_true_lang-DtyLHHVv.js";import"./dict-BvhWhz6G.js";const K={class:"role-container auto-height-container"},Q={class:"app-content padding-out"},j={class:"app-pagination"},le=E({name:"RoleManagement",__name:"index",setup(l){b("baseConfirm"),b("baseMessage");const t=o(!1),a=o(),e=o({type:"",drugName:"",frequency:"",date:"",pageNum:1,pageSize:10}),p=R({searchListButtons:[{label:"查 询",isShowLoading:!0,attrs:{type:"primary"},events:{click:B}},{label:"重 置",isShowLoading:!0,attrs:{type:"primary"},events:{click:u}}],searchList:[{type:"select",field:"type",valueField:"value",labelField:"label",isOutBorder:!1,options:[{label:"全部药品",value:""},{label:"已设置配额",value:"1"},{label:"未设置配额",value:"0"}],attrs:{placeholder:"请选择药品属性",width:200,collapseTags:!0,valueKey:"column"},events:{}},{type:"input",field:"drugName",isOutBorder:!1,attrs:{placeholder:"请输入药品名称搜索...",width:220}},{type:"select",field:"frequency",valueField:"value",labelField:"label",isOutBorder:!1,options:[{label:"每周",value:"0"},{label:"每月",value:"1"}],attrs:{placeholder:"",width:200,collapseTags:!0,valueKey:"column"},events:{}},{type:"date-picker",field:"date",label:"日期范围",isOutBorder:!0,attrs:{width:240,placeholder:"请选择",clearable:!0,format:"YYYY-MM-DD",type:"daterange"},events:{}}],rightSearchListButtons:[{label:"导出Excel",icon:"icon-icon",attrs:{type:"primary"},events:{}}]}),m=o([]),h=o(0),s=o([{field:"expand",type:"expand",width:50,isRenderHeader:!0,isExpand:!0},{field:"hosDrugName",title:"药品名称",width:"85"},{field:"hosSpec",title:"规格",minWidth:"100"},{field:"hosManuf",title:"生产厂家",minWidth:"85"},{field:"name",title:"科室/医生",minWidth:"90"},{field:"hosManuf",title:"使用量",minWidth:"85"},{field:"btns",title:"操作",align:"center",width:"320",fixed:"right",render:!0}]),n=o(null);o(null),o(null);function u(){let i={keyword:"",drugProperties:[],fldm:[],hosZxFlag:[],total:0};e.value=g(g({},e.value),i)}const w=i=>{e.value.pageNum=1,e.value.pageSize=i,c()},N=i=>{e.value.pageNum=i,c()};function B(){a.value.search()}function c(){return y(this,null,function*(){let i={pageNum:e.value.pageNum,pageSize:e.value.pageSize,type:e.value.type,drugName:e.value.drugName,frequency:e.value.frequency,startTime:e.value.date[0],endTime:e.value.date[1]};const{data:d}=yield $(i);m.value=d.records,h.value=d.total,t.value=!1})}return T(()=>{c()}),(i,d)=>{const x=U,z=W,C=Y,k=L;return V(),O("div",K,[f(x,{ref_key:"refSearch",ref:a,modelValue:r(e),"onUpdate:modelValue":d[0]||(d[0]=q=>P(e)?e.value=q:null),"search-data":r(p),"search-name":"quotaUsage",searching:r(t),onSearch:c,isCache:!1},null,8,["modelValue","search-data","searching"]),S("div",Q,[f(z,{"table-name":"quotaUsage",loading:r(t),tableData:r(m),columns:r(s)},null,8,["loading","tableData","columns"])]),S("div",j,[f(C,{"current-page":r(e).pageNum,"page-size":r(e).pageSize,total:r(h),onCurrentChange:N,onSizeChange:w},null,8,["current-page","page-size","total"])]),f(k,{ref_key:"roleEditRef",ref:n,onQuery:c},null,512)])}}});export{le as default};
