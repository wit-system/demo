var B=(d,y,r)=>new Promise((m,p)=>{var _=o=>{try{t(r.next(o))}catch(e){p(e)}},n=o=>{try{t(r.throw(o))}catch(e){p(e)}},t=o=>o.done?m(o.value):Promise.resolve(o.value).then(_,n);t((r=r.apply(d,y)).next())});import{d as F,P as A,r as v,b as H,m as c,T as J,o as u,q as g,s,y as a,x as C,p as i,n as V,z as D,t as O,c as $,F as G,A as K,a6 as Q,H as W,ah as X,I as Y,J as Z,_ as ee}from"./index-CmC8Jr0A.js";import{f as te,j as oe}from"./medicationReason-Di2veMHO.js";const se=d=>(Y("data-v-35de7650"),d=d(),Z(),d),ae={class:"header"},ne=se(()=>V("span",null,"添加一条理由",-1)),le={class:"common-attention"},ce=["onClick"],ie=F({__name:"editReasonMedication",emits:["query"],setup(d,{expose:y,emit:r}){const m=A("$baseMessage"),p=r,_=v(""),n=v(!1),t=v(""),o=v(!1),e=H([]);function L(l,f,b){e.length=0,_.value=b,n.value=!0,f=="add"?(t.value="新增补充用药理由",e.push({id:"",reason:"",dosageId:_.value,status:"0"})):(t.value="编辑补充用药理由",e.push(Object.assign({},l)))}function N(){e.push({reason:"",dosageId:_.value,id:"",status:"0"})}function P(l){e.splice(l,1)}function w(){e.length=0,n.value=!1}function j(){return B(this,null,function*(){if(e.length==0){m("请添加理由","error","hey");return}try{const{msg:l}=t.value=="编辑补充用药理由"?yield te(e):yield oe(e);m(l,"success","hey"),p("query"),w()}catch(l){}})}return y({showDiag:L}),(l,f)=>{const b=c("CirclePlus"),I=c("el-icon"),x=c("el-button"),q=W,z=c("el-input"),M=c("Delete"),S=c("el-form-item"),T=c("el-form"),U=X,E=J("loading");return u(),g(U,{modelValue:i(n),"onUpdate:modelValue":f[0]||(f[0]=h=>Q(n)?n.value=h:null),width:"826px",modal:!1,"append-to-body":"",title:i(t),onClose:w,class:"pointerEvents"},{footer:s(()=>[a(x,{onClick:w},{default:s(()=>[C("取 消")]),_:1}),a(x,{disabled:i(o),type:"primary",onClick:j},{default:s(()=>[C("确 定")]),_:1},8,["disabled"])]),default:s(()=>[V("div",ae,[i(t)!="编辑补充用药理由"?(u(),g(x,{key:0,onClick:N},{default:s(()=>[a(I,{size:"16px"},{default:s(()=>[a(b)]),_:1}),ne]),_:1})):D("",!0),V("div",le,[a(q,{icon:"icon-xintishi"}),C(" 提示：本功能适用于监控药品当监控药品补充用药理由功能开启之后才生效 ")])]),O((u(),g(T,{ref:"formRef","label-width":"75px",class:"content"},{default:s(()=>[(u(!0),$(G,null,K(i(e),(h,k)=>(u(),g(S,{key:k,label:"用药理由"+(k+1)},{default:s(()=>[a(z,{modelValue:h.reason,"onUpdate:modelValue":R=>h.reason=R,maxlength:"500",placeholder:"请输入","show-word-limit":"",type:"textarea",style:{display:"inline-block",width:"calc(100% - 30px)"},autosize:{minRows:4,maxRows:8}},null,8,["modelValue","onUpdate:modelValue"]),i(t)!="编辑补充用药理由"?(u(),$("span",{key:0,class:"delete-icon",onClick:R=>P(k)},[a(I,null,{default:s(()=>[a(M)]),_:1})],8,ce)):D("",!0)]),_:2},1032,["label"]))),128))]),_:1})),[[E,i(o)]])]),_:1},8,["modelValue","title"])}}}),_e=ee(ie,[["__scopeId","data-v-35de7650"]]);export{_e as default};
