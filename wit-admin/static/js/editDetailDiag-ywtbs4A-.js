var k=(p,V,f)=>new Promise((w,v)=>{var y=o=>{try{s(f.next(o))}catch(m){v(m)}},b=o=>{try{s(f.throw(o))}catch(m){v(m)}},s=o=>o.done?w(o.value):Promise.resolve(o.value).then(y,b);s((f=f.apply(p,V)).next())});import{d as Q,P as X,r as d,b as Y,m as r,o as Z,q as ee,s as l,y as e,x as j,p as t,a6 as E,H as ae,af as te,ah as le,I as oe,J as se,n as T,_ as ne}from"./index-9sA7DK8G.js";import{a as ie,b as de,_ as ue}from"./drugSelection-COZ0deAU.js";const W=p=>(oe("data-v-4459949a"),p=p(),se(),p),ce=W(()=>T("span",null,"添加",-1)),re=W(()=>T("span",null,"删除",-1)),me=Q({__name:"editDetailDiag",emits:["fetch-data"],setup(p,{expose:V,emit:f}){const w=f,v=X("$baseMessage"),y={name:[{required:!0,message:"请输入药品组名",trigger:"blur"}]},b=d("新增药品组"),s=d(!1),o=d(!1),m=d(null),S=d(null),i=Y({id:"",name:"",status:""}),$=d(!1),_=d([]),O=d([{field:"drugCode",title:"药品编码",minWidth:"100"},{field:"productName",title:"商品名",minWidth:"100"},{field:"generalName",title:"通用名",minWidth:"100"},{field:"spec",title:"规格",minWidth:"100"},{field:"dosageForm",title:"剂型",minWidth:"100"},{field:"manufacture",title:"厂家",minWidth:"100"},{field:"btns",title:"操作",width:"90",fixed:"right",render:!0}]),I=d("add"),g=d([]);function R(c,a){return k(this,null,function*(){o.value=!0,I.value=a;let n=JSON.parse(JSON.stringify(c));a=="add"?(b.value="新增药品组",i.status="1"):(Object.assign(i,{id:n.id,name:n.name,status:n.status}),_.value=n.hisHomhDrugVos||[],g.value=n.hisHomhDrugVos||[],a=="edit"?b.value="编辑药品组":a=="view"&&(b.value="查看药品组",s.value=!0))})}V({showEdit:R});const x=()=>{o.value=!1,m.value.resetFields(),H()},H=()=>{Object.assign(i,{id:"",name:"",status:""}),s.value=!1,_.value=[],g.value=[]},U=()=>{S.value.showEdit({selectorType:1,groupId:i.id})},z=c=>{_.value.forEach((a,n)=>{c.drugCode==a.drugCode&&_.value.splice(n,1)})},B=()=>{m.value.validate(c=>k(this,null,function*(){if(c){let a=Object.assign(i,{hisHomhDrugVos:_.value});const{msg:n}=I.value=="add"?yield ie(a):yield de(a);v(n,"success","hey"),x(),w("fetch-data")}}))},J=c=>{_.value=c},L=()=>"boldFont";return(c,a)=>{const n=r("el-input"),C=r("el-form-item"),D=r("el-col"),N=r("el-radio"),q=r("el-radio-group"),F=ae,h=r("el-button"),G=r("el-row"),M=r("el-form"),P=te,A=ue,K=le;return Z(),ee(K,{modelValue:t(o),"onUpdate:modelValue":a[3]||(a[3]=u=>E(o)?o.value=u:null),"append-to-body":"",title:t(b),width:"826px",onClose:x,class:"addTypeFormDialog"},{footer:l(()=>[e(h,{onClick:x},{default:l(()=>[j("关 闭")]),_:1}),e(h,{type:"primary",onClick:B,disabled:t(s)},{default:l(()=>[j("保 存")]),_:1},8,["disabled"])]),default:l(()=>[e(M,{ref_key:"formRef",ref:m,"label-width":"75px",model:t(i),"label-position":"right",rules:y},{default:l(()=>[e(G,null,{default:l(()=>[e(D,{span:12},{default:l(()=>[e(C,{label:"药品组名",prop:"name"},{default:l(()=>[e(n,{modelValue:t(i).name,"onUpdate:modelValue":a[0]||(a[0]=u=>t(i).name=u),disabled:t(s)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(D,{span:12},{default:l(()=>[e(C,{label:"状态","label-position":"right"},{default:l(()=>[e(q,{modelValue:t(i).status,"onUpdate:modelValue":a[1]||(a[1]=u=>t(i).status=u),class:"backLink"},{default:l(()=>[e(N,{value:"1",label:"启用",disabled:t(s)},null,8,["disabled"]),e(N,{value:"0",label:"停用",disabled:t(s)},null,8,["disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(D,{span:24,style:{"margin-top":"16px"}},{default:l(()=>[e(C,{label:"药品选择"},{default:l(()=>[e(h,{type:"primary",onClick:U,disabled:t(s)},{default:l(()=>[e(F,{icon:"icon-xinzengdianpingjihua"}),ce]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(P,{height:"435","table-name":"matching-tools-alternative-drug-management",loading:t($),tableData:t(_),columns:t(O),"header-cell-class-name":L,isShowTableSet:!1},{btns:l(u=>[e(h,{text:"",type:"primary",onClick:_e=>z(u.row),disabled:t(s)},{default:l(()=>[e(F,{icon:"icon-a-zujian2131",style:{"font-size":"16px"}}),re]),_:2},1032,["onClick","disabled"])]),_:1},8,["loading","tableData","columns"]),e(A,{modelValue:t(g),"onUpdate:modelValue":[a[2]||(a[2]=u=>E(g)?g.value=u:null),J],ref_key:"drugSelectionEditRef",ref:S},null,8,["modelValue"])]),_:1},8,["modelValue","title"])}}}),ge=ne(me,[["__scopeId","data-v-4459949a"]]);export{ge as default};
