var y=(k,v,r)=>new Promise((h,p)=>{var b=i=>{try{_(r.next(i))}catch(a){p(a)}},C=i=>{try{_(r.throw(i))}catch(a){p(a)}},_=i=>i.done?h(i.value):Promise.resolve(i.value).then(b,C);_((r=r.apply(k,v)).next())});import{p as q,d as I,a as O,b as A,_ as K}from"./ThirdManagementEdit-TgBjeuwB.js";import{d as G,P as S,r as m,b as J,h as Q,m as f,T as W,o as $,c as X,y as t,p as l,a6 as Y,n as N,t as Z,q as ee,s as c,B as te,x,aa as ae,ae as ne,ag as se,_ as oe}from"./index-1fQ0gozz.js";import{_ as ie}from"./index.vue_vue_type_style_index_0_lang-CmHiYd40.js";import"./ifComponent.vue_vue_type_style_index_0_lang-BOVwK668.js";import"./index-BueAkiiY.js";import"./index.vue_vue_type_script_setup_true_lang-BLW0x7SH.js";import"./dict-Cq6Rfk1f.js";const le={class:"user-management-container auto-height-container"},ce={class:"app-content padding-out"},re={class:"app-pagination"},pe=G({name:"ThirdManagement",__name:"index",setup(k){const v=S("$baseConfirm"),r=S("$baseMessage"),h=m(null),p=m(!0),b=m([]),C=m(0),_=()=>{h.value.showEdit()},i=(e={})=>{h.value.showEdit(e)},a=m({pageNum:1,pageSize:10,hosHospName:"",status:""}),B=J({searchList:[{type:"input",field:"hosHospName",label:"医院名称",isOutBorder:!0,attrs:{width:180,placeholder:"请输入医院名称",clearable:!0},events:{}},{type:"select",field:"status",label:"状态",isOutBorder:!0,valueField:"institutionCode",labelField:"institutionName",options:[{institutionCode:"0",institutionName:"禁用"},{institutionCode:"1",institutionName:"启用"}],attrs:{width:180,clearable:!0},events:{}}],searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:z}},{label:"新建",icon:"icon-xinzengdianpingjihua",attrs:{type:"warning"},events:{click:_}}]}),H=m();function z(){H.value.search()}const D=(e={})=>{e.id&&v("您确定要重置授权码吗",null,()=>y(this,null,function*(){const{msg:o}=yield q(e.id);r(o,"success","hey"),yield u()}))},V=(e={})=>{e.id&&v(`您确定要删除医院名称"${e.hosHospName}"授权登录吗`,null,()=>y(this,null,function*(){const o=[];o.push(e.id);const{msg:d}=yield I(o);r(d,"success","hey"),yield u()}))},M=e=>{a.value.pageNum=1,a.value.pageSize=e,u()},E=e=>{a.value.pageNum=e,u()};function u(e,o){return y(this,null,function*(){p.value=!0;const d={pageNum:a.value.pageNum,pageSize:a.value.pageSize,hosHospName:a.value.hosHospName,status:a.value.status},{data:n}=yield O(d);b.value=n.records,C.value=n.total,p.value=!1})}Q(()=>{u()});const F=(e={})=>{const o=e.status==="1"?"启用":"停用";ae.confirm(`确认要"${o}""${e.hosHospName}"授权登录吗?`,"温馨提示").then(()=>{const d={id:e.id,status:e.status,hosHospCode:e.hosHospCode,hosHospName:e.hosHospName};return A(d)}).then(()=>{ne.success("状态更改成功")}).catch(function(){e.status=e.status==="1"?"0":"1"})};return(e,o)=>{const d=ie,n=f("el-table-column"),L=f("el-switch"),w=f("el-button"),R=f("el-empty"),T=f("el-table"),P=se,U=K,j=W("loading");return $(),X("div",le,[t(d,{ref_key:"refSearch",ref:H,modelValue:l(a),"onUpdate:modelValue":o[0]||(o[0]=s=>Y(a)?a.value=s:null),"search-data":l(B),"search-name":"system-thirdManagement",searching:l(p),onSearch:u},null,8,["modelValue","search-data","searching"]),N("div",ce,[Z(($(),ee(T,{border:"",data:l(b)},{empty:c(()=>[t(R,{class:"wit-data-empty",description:"暂无数据"})]),default:c(()=>[t(n,{align:"center",label:"ID","min-width":"80",prop:"id","show-overflow-tooltip":""}),t(n,{align:"center",label:"医院编码","min-width":"100",prop:"hosHospCode","show-overflow-tooltip":""}),t(n,{align:"center",label:"医院名称","min-width":"80",prop:"hosHospName","show-overflow-tooltip":""}),t(n,{align:"center",label:"加密密钥","min-width":"120",prop:"secretKey","show-overflow-tooltip":""}),t(n,{align:"center",label:"授权码","min-width":"120",prop:"sunyaCode","show-overflow-tooltip":""}),t(n,{align:"center",label:"状态","min-width":"60",prop:"status"},{default:c(({row:s})=>[t(L,{modelValue:s.status,"onUpdate:modelValue":g=>s.status=g,"active-value":"1","inactive-value":"0",onChange:g=>F(s)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(n,{align:"center",label:"令牌有效期","min-width":"80",prop:"effectiveDuration"},{default:c(({row:s})=>[N("span",null,te(s.effectiveDuration)+"秒",1)]),_:1}),t(n,{align:"center",label:"创建时间","min-width":"100",prop:"createTime","show-overflow-tooltip":""}),t(n,{align:"center",label:"操作",width:"200"},{default:c(({row:s})=>[t(w,{text:"",type:"primary",onClick:g=>i(s)},{default:c(()=>[x("编辑")]),_:2},1032,["onClick"]),t(w,{text:"",type:"primary",onClick:g=>D(s)},{default:c(()=>[x("重置密码")]),_:2},1032,["onClick"]),t(w,{text:"",type:"danger",onClick:g=>V(s)},{default:c(()=>[x("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,l(p)]])]),N("div",re,[t(P,{"current-page":l(a).pageNum,"page-size":l(a).pageSize,total:l(C),onCurrentChange:E,onSizeChange:M},null,8,["current-page","page-size","total"])]),t(U,{ref_key:"editRef",ref:h,onFetchData:u},null,512)])}}}),be=oe(pe,[["__scopeId","data-v-eac1c750"]]);export{be as default};
