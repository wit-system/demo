var $=(a,w,f)=>new Promise((k,g)=>{var I=p=>{try{u(f.next(p))}catch(d){g(d)}},h=p=>{try{u(f.throw(p))}catch(d){g(d)}},u=p=>p.done?k(p.value):Promise.resolve(p.value).then(I,h);u((f=f.apply(a,w)).next())});import{an as N,d as Y,r as c,b as Z,m as _,o as ee,q as te,s as r,y as i,x as z,p as t,n as m,B as x,a6 as ae,av as B,af as se,ag as oe,H as le,ah as ne,I as ie,J as de,_ as ce}from"./index-BNylXLUF.js";function we(a){return N({url:`/system/icd10-disease/page?pageNo=${a.pageNum}&pageSize=${a.pageSize}`,method:"post",data:a})}function ke(a){return N({url:`/system/icd10-disease/del-${a.id}`,method:"post",data:a})}function ze(a){return N({url:"/system/icd10-disease/batch",method:"post",data:a})}function re(a){return N({url:`/system/icd10-disease/selecticd10-related?pageNum=${a.pageNum}&pageSize=${a.pageSize}`,method:"post",data:a})}const ue=a=>(ie("data-v-6a9983ec"),a=a(),de(),a),pe={class:"headerTitle title"},me={class:"headerFontBase headerName"},he={class:"headerFontBase headerNumber"},_e={class:"app-content"},fe={class:"headerTitle title"},ge={class:"headerFontBase headerName"},ye={class:"headerFontBase headerNumber"},Ce={class:"app-content"},ve=ue(()=>m("span",null,"删除",-1)),be=Y({name:"DataSelector",__name:"editDiseaseSettingsDiag",props:{modelValue:[Array]},emits:["update:modelValue"],setup(a,{expose:w,emit:f}){const k=f,g=c(1),I={6:{name:"ICD诊断项",query:s=>re(s),field:["id"]}},h=c("ICD诊断项"),u=c(!1),p=c(null),d=Z({keyword:"",pageNum:1,pageSize:50,type:1,diseaseType:""}),S=c(!1),W=c(!1),y=c([]),j=c([{width:"40",type:"checkbox"},{field:"hisIcd10Code",title:"医院诊断代码",minWidth:"130"},{field:"hisIcd10Name",title:"医院诊断名称",minWidth:"130"},{field:"syIcd10Code",title:"系统诊断代码",minWidth:"130"},{field:"syIcd10Name",title:"系统诊断名称",minWidth:"130"}]),D=c(0),n=c([]),F=c([{field:"hisIcd10Code",title:"医院诊断代码",minWidth:"130"},{field:"hisIcd10Name",title:"医院诊断名称",minWidth:"130"},{field:"syIcd10Code",title:"系统诊断代码",minWidth:"130"},{field:"syIcd10Name",title:"系统诊断名称",minWidth:"130"},{field:"btns",title:"操作",width:"90",fixed:"right",render:!0}]),q=c(0),T=c(null);w({showEdit:s=>{d.diseaseType=s.diseaseType,u.value=!0,h.value=I[s.selectorType].name,g.value=s.selectorType,n.value=s.selectArr,B(()=>{C(!0)})}});function A(s){d.pageNum=s,C()}function M(s){d.pageNum=1,d.pageSize=s,C()}function C(s=!1){return $(this,null,function*(){S.value=!0;const{data:e}=yield I[g.value].query(d);S.value=!1,y.value=(e.records||e).map(o=>{let l=!1;return n.value.forEach((v,R)=>{o.hisIcd10Code==v.hisIcd10Code&&v.syIcd10Code==o.syIcd10Code&&(l=!0)}),Object.assign({},o,{isSelected:l})}),D.value=e.total||0,B(()=>{const o=y.value.filter(l=>{if(l.isSelected)return l});T.value.tableMethods("setCheckboxRow",o,!0)})})}const O=({checked:s})=>{s?y.value.forEach(e=>{let o=!1;n.value.forEach((l,v)=>{e.hisIcd10Code==l.hisIcd10Code&&l.syIcd10Code==e.syIcd10Code&&(o=!0)}),o||n.value.push(e)}):y.value.forEach(e=>{n.value.forEach((o,l)=>{e.hisIcd10Code==o.hisIcd10Code&&o.syIcd10Code==e.syIcd10Code&&n.value.splice(l,1)})})},P=({checked:s,row:e})=>{s?n.value.push(e):n.value.forEach((o,l)=>{e.hisIcd10Code==o.hisIcd10Code&&o.syIcd10Code==e.syIcd10Code&&n.value.splice(l,1)})};function H(s){n.value.forEach((e,o)=>{s.hisIcd10Code==e.hisIcd10Code&&e.syIcd10Code==s.syIcd10Code&&n.value.splice(o,1)})}const V=()=>{u.value=!1,n.value=[]},U=()=>{k("update:modelValue",n.value),u.value=!1,n.value=[]};return(s,e)=>{const o=_("el-input"),l=_("el-button"),v=_("el-form-item"),R=_("el-divider"),J=_("el-form"),E=se,G=oe,L=_("el-col"),K=le,Q=_("el-row"),X=ne;return ee(),te(X,{class:"dataSelectorDialog",modelValue:t(u),"onUpdate:modelValue":e[1]||(e[1]=b=>ae(u)?u.value=b:null),"append-to-body":"",title:t(h)+"选择",width:"1260px",onClose:V},{footer:r(()=>[i(l,{onClick:V},{default:r(()=>[z("取 消")]),_:1}),i(l,{type:"primary",onClick:U},{default:r(()=>[z("确 定")]),_:1})]),default:r(()=>[i(J,{ref_key:"formRef",ref:p,"label-width":"120px",model:t(d),"label-position":"left"},{default:r(()=>[i(v,{label:t(h)+"名称"},{default:r(()=>[i(o,{modelValue:t(d).keyword,"onUpdate:modelValue":e[0]||(e[0]=b=>t(d).keyword=b),modelModifiers:{trim:!0},clearable:"",onClear:C,style:{width:"300px","margin-right":"8px"}},null,8,["modelValue"]),i(l,{type:"primary",loading:t(S),onClick:C},{default:r(()=>[z("搜 索")]),_:1},8,["loading"])]),_:1},8,["label"]),i(R)]),_:1},8,["model"]),i(Q,{gutter:8},{default:r(()=>[i(L,{span:12},{default:r(()=>[m("div",pe,[m("span",me,"待选"+x(t(h))+"总数：",1),m("span",he,x(t(D)),1)]),m("div",_e,[i(E,{ref_key:"tableRef",ref:T,height:"495","table-name":"system-dataSelectorLeft",loading:t(S),tableData:t(y),columns:t(j),total:t(D),isShowTableSet:!1,"checkbox-config":{trigger:"row"},onCheckboxAll:O,onCheckboxChange:P},null,8,["loading","tableData","columns","total"]),i(G,{"current-page":t(d).pageNum,"page-size":t(d).pageSize,total:t(D),"pager-count":5,layout:"sizes, prev, pager, next, jumper",onCurrentChange:A,onSizeChange:M},null,8,["current-page","page-size","total"])])]),_:1}),i(L,{span:12},{default:r(()=>[m("div",fe,[m("span",ge,"已选"+x(t(h))+"：",1),m("span",ye,x(t(n).length),1)]),m("div",Ce,[i(E,{height:"495","table-name":"system-dataSelectorRight",loading:t(W),tableData:t(n),columns:t(F),total:t(q),isShowTableSet:!1},{btns:r(b=>[i(l,{text:"",type:"primary",onClick:De=>H(b.row)},{default:r(()=>[i(K,{icon:"icon-a-zujian2131"}),ve]),_:2},1032,["onClick"])]),_:1},8,["loading","tableData","columns","total"])])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}}),Ie=ce(be,[["__scopeId","data-v-6a9983ec"]]),Te=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));export{Ie as _,ke as a,ze as b,Te as e,we as i};
