var te=Object.defineProperty,le=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var F=(c,t,l)=>t in c?te(c,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[t]=l,V=(c,t)=>{for(var l in t||(t={}))ne.call(t,l)&&F(c,l,t[l]);if(K)for(var l of K(t))se.call(t,l)&&F(c,l,t[l]);return c},N=(c,t)=>le(c,oe(t));var P=(c,t,l)=>new Promise((b,g)=>{var h=u=>{try{C(l.next(u))}catch(r){g(r)}},v=u=>{try{C(l.throw(u))}catch(r){g(r)}},C=u=>u.done?b(u.value):Promise.resolve(u.value).then(h,v);C((l=l.apply(c,t)).next())});import{d as ie,P as ce,r as s,m as k,o as I,c as j,n as y,y as i,s as m,a7 as re,p as o,B as ue,a6 as q,aW as A,C as L,z as de,H as pe,af as me,ag as ge,_ as he}from"./index-CmC8Jr0A.js";import{h as ve,d as fe,a as _e,b as be,r as Ce}from"./reviewerSettings-TPq4MTBQ.js";const we={class:"param-setting-hospital-setting-page flex-column"},xe={class:"refresh"},ye={class:"title"},Ve={class:"flex-all padding-out flex"},ke={key:0,class:"table-box flex-column"},Pe={class:"flex-all mt8"},Se={class:"table-box flex-column"},ze={class:"flex-all mt8"},Re=ie({__name:"hospitalSetting",setup(c){const t=ce("$baseMessage"),l=s(1),b=s(""),g=s(""),h=s({pageNum:1,pageSize:20}),v=s({pageNum:1,pageSize:20}),C=s(null),u=s(0),r=s(!1),w=s([]),G=s([{field:"hosHospName",title:"医院名称",minWidth:"120"},{field:"problemPresc",title:"问题处方进人工",width:"120",align:"center",render:!0},{field:"allPresc",title:"全部处方进人工",width:"120",align:"center",render:!0}]),S=s(0),f=s(!1),z=s([]),J=s([{field:"deptName",title:"科室名称",minWidth:"120"},{field:"deptTypeList",title:"科室类型",minWidth:"140",render:!0},{field:"allPresc",title:"全部处方进人工",width:"120",align:"center",render:!0}]),T=s();function $({row:e}){T.value=e,_()}const x=()=>{r.value=!0,ve(N(V({},h.value),{keyWord:b.value})).then(({data:e})=>{r.value=!1,w.value=e.records||[],u.value=e.total,w.value.length>0&&(C.value.tableMethods("setCurrentRow",w.value[0]),$({row:w.value[0]}))}).catch(()=>{r.value=!1,w.value=[],u.value=0})};x();const _=()=>{f.value=!0,fe(N(V({},v.value),{hosHospCode:T.value.hosHospCode,keyWord:g.value})).then(({data:e})=>{f.value=!1,z.value=e.records||[],S.value=e.total}).catch(()=>{f.value=!1,z.value=[],S.value=0})};function W(e,n){return P(this,null,function*(){try{r.value=!0;const{msg:p}=yield _e(V({},e));r.value=!1,t(p,"success","hey")}catch(p){e[n]=e[n]==="1"?"0":"1",r.value=!1}})}function B(e,n){return P(this,null,function*(){try{f.value=!0;const{msg:p}=yield be(V({},e));f.value=!1,t(p,"success","hey")}catch(p){n==="deptTypeList"?_():(e[n]=e[n]==="1"?"0":"1",f.value=!1)}})}const R=s(!1);function O(){return P(this,null,function*(){R.value=!0;const{msg:e}=yield Ce();R.value=!1,t(e,"success","hey")})}const Q=e=>{h.value.pageSize=e,x()},X=e=>{h.value.pageNum=e,x()},Y=e=>{v.value.pageSize=e,_()},Z=e=>{v.value.pageNum=e,_()};return(e,n)=>{const p=pe,ee=k("el-tooltip"),D=k("el-input"),U=k("el-switch"),H=me,M=ge,E=k("el-checkbox"),ae=k("el-checkbox-group");return I(),j("div",we,[y("div",xe,[i(ee,{class:"box-item",effect:"dark",content:"刷新缓存",placement:"top"},{default:m(()=>[i(p,{icon:"icon-gengxin",class:re({"refresh-icon":!0,"loading-animation":o(R)}),onClick:O,style:{padding:"4px"}},null,8,["class"])]),_:1})]),y("div",ye,ue(o(l)==1?"医院设置":"科室设置"),1),y("div",Ve,[o(l)==1?(I(),j("div",ke,[i(D,{modelValue:o(b),"onUpdate:modelValue":n[0]||(n[0]=a=>q(b)?b.value=a:null),style:{width:"240px"},placeholder:"输入关键字查询",clearable:"",onClear:x,onKeydown:A(x,["enter"])},{suffix:m(()=>[i(p,{icon:"icon-sousuo1",onClick:x})]),_:1},8,["modelValue"]),y("div",Pe,[i(H,{ref_key:"tableRef",ref:C,"table-name":"param-setting-hospital-setting-table",loading:o(r),"table-data":o(w),columns:o(G),isShowTableSet:!1,onCellClick:$},{problemPresc:m(a=>[i(U,{modelValue:a.row.problemPresc,"onUpdate:modelValue":d=>a.row.problemPresc=d,"active-value":"1","inactive-value":"0",onClick:n[1]||(n[1]=L(()=>{},["stop"])),onChange:d=>W(a.row,"problemPresc")},null,8,["modelValue","onUpdate:modelValue","onChange"])]),allPresc:m(a=>[i(U,{modelValue:a.row.allPresc,"onUpdate:modelValue":d=>a.row.allPresc=d,"active-value":"1","inactive-value":"0",onClick:n[2]||(n[2]=L(()=>{},["stop"])),onChange:d=>W(a.row,"allPresc")},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["loading","table-data","columns"])]),i(M,{layout:"total, prev, pager, next","current-page":o(h).pageNum,"page-size":o(h).pageSize,total:o(u),"prev-text":"上一页","next-text":"下一页",onCurrentChange:X,onSizeChange:Q},null,8,["current-page","page-size","total"])])):de("",!0),y("div",Se,[i(D,{modelValue:o(g),"onUpdate:modelValue":n[3]||(n[3]=a=>q(g)?g.value=a:null),style:{width:"240px"},placeholder:"输入关键字查询",clearable:"",disabled:o(r),onClear:_,onKeydown:A(_,["enter"])},{suffix:m(()=>[i(p,{icon:"icon-sousuo1",onClick:_})]),_:1},8,["modelValue","disabled"]),y("div",ze,[i(H,{"table-name":"param-setting-hospital-setting-table",loading:o(f),"table-data":o(z),columns:o(J),isShowTableSet:!1},{deptTypeList:m(a=>[i(ae,{modelValue:a.row.deptTypeList,"onUpdate:modelValue":d=>a.row.deptTypeList=d,onChange:d=>B(a.row,"deptTypeList")},{default:m(()=>[i(E,{label:"门诊",value:"1"}),i(E,{label:"住院",value:"2"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),allPresc:m(a=>[i(U,{modelValue:a.row.allPresc,"onUpdate:modelValue":d=>a.row.allPresc=d,"active-value":"1","inactive-value":"0",onClick:n[4]||(n[4]=L(()=>{},["stop"])),onChange:d=>B(a.row,"allPresc")},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["loading","table-data","columns"])]),i(M,{layout:"total, prev, pager, next","current-page":o(v).pageNum,"page-size":o(v).pageSize,total:o(S),"prev-text":"上一页","next-text":"下一页",onCurrentChange:Z,onSizeChange:Y},null,8,["current-page","page-size","total"])])])])}}}),Te=he(Re,[["__scopeId","data-v-fd15bf61"]]);export{Te as default};
