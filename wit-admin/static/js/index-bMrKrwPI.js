var b=(i,f,r)=>new Promise((c,s)=>{var u=o=>{try{e(r.next(o))}catch(d){s(d)}},h=o=>{try{e(r.throw(o))}catch(d){s(d)}},e=o=>o.done?c(o.value):Promise.resolve(o.value).then(u,h);e((r=r.apply(i,f)).next())});import{an as k,d as M,P as S,r as p,b as q,h as O,m as _,T as R,o as N,c as U,y as a,p as l,a6 as j,n as z,t as E,q as F,s as g,x as C,B as A,ag as G}from"./index-BN8uVNSO.js";import{_ as H}from"./index.vue_vue_type_style_index_0_lang-CYTYEVrP.js";import"./ifComponent.vue_vue_type_style_index_0_lang-TMjKtAQ8.js";import"./index-DxSYlWYB.js";import"./index.vue_vue_type_script_setup_true_lang-BkXq5IQh.js";import"./dict-Ck584AJf.js";function J(i){return k({url:"/system/online/list",method:"get",params:i})}function K(i){return k({url:`/system/online/${i}`,method:"post",data:{}})}const Q={class:"user-management-container auto-height-container"},W={class:"app-content padding-out"},X={class:"app-pagination"},se=M({name:"online",__name:"index",setup(i){const f=S("$baseConfirm"),r=S("$baseMessage"),c=p([]),s=p([]),u=p(!0),h=p(0),e=p({pageNum:1,pageSize:10,ipaddr:"",userName:""}),o=(t={})=>{t.tokenId&&f("您确定要下线该用户吗",null,()=>b(this,null,function*(){const{msg:v}=yield K(t.tokenId);r(v,"success","hey"),yield w()}))},d=q({searchList:[{type:"input",field:"ipaddr",label:"IP地址",isOutBorder:!0,attrs:{width:180,placeholder:"请输入IP地址",clearable:!0},events:{}},{type:"input",field:"userName",label:"用户名",isOutBorder:!0,attrs:{width:180,placeholder:"请输入用户名",clearable:!0},events:{}}],searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:B}}]}),y=p();function B(){y.value.search()}const w=()=>b(this,null,function*(){u.value=!0;const{data:t}=yield J(e.value);t.total=t.records.length,s.value=t.records,c.value=s.value.slice((e.value.pageNum-1)*e.value.pageSize,e.value.pageNum*e.value.pageSize),h.value=t.total,u.value=!1}),x=t=>{e.value.pageNum=t,c.value=s.value.slice((e.value.pageNum-1)*e.value.pageSize,e.value.pageNum*e.value.pageSize)},$=t=>{e.value.pageNum=1,e.value.pageSize=t,c.value=s.value.slice((e.value.pageNum-1)*e.value.pageSize,e.value.pageNum*e.value.pageSize)};return O(()=>{w()}),(t,v)=>{const L=H,n=_("el-table-column"),D=_("el-button"),V=_("el-empty"),I=_("el-table"),P=G,T=R("loading");return N(),U("div",Q,[a(L,{ref_key:"refSearch",ref:y,modelValue:l(e),"onUpdate:modelValue":v[0]||(v[0]=m=>j(e)?e.value=m:null),"search-data":l(d),"search-name":"system-online",searching:l(u),onSearch:w},null,8,["modelValue","search-data","searching"]),z("div",W,[E((N(),F(I,{ref:"tableRef",data:l(c),border:""},{empty:g(()=>[a(V,{class:"wit-data-empty",description:"暂无数据"})]),default:g(()=>[a(n,{align:"center",label:"序号",width:"55"},{default:g(({$index:m})=>[C(A(m+1),1)]),_:1}),a(n,{align:"center",label:"用户名称","min-width":"180",prop:"userName","show-overflow-tooltip":""}),a(n,{align:"center",label:"登录IP地址","min-width":"160",prop:"ipaddr","show-overflow-tooltip":""}),a(n,{align:"center",label:"浏览器类型","min-width":"120",prop:"browser","show-overflow-tooltip":""}),a(n,{align:"center",label:"操作系统","min-width":"120",prop:"os","show-overflow-tooltip":""}),a(n,{align:"center",label:"登录时间","min-width":"160",prop:"loginTime","show-overflow-tooltip":""}),a(n,{align:"center",label:"刷新时间","min-width":"160",prop:"refreshTime","show-overflow-tooltip":""}),a(n,{align:"center",label:"过期时间","min-width":"160",prop:"expireTime","show-overflow-tooltip":""}),a(n,{align:"center",label:"操作",width:"150"},{default:g(({row:m})=>[a(D,{text:"",type:"danger",onClick:Y=>o(m)},{default:g(()=>[C("下线")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,l(u)]])]),z("div",X,[a(P,{"current-page":l(e).pageNum,"page-size":l(e).pageSize,total:l(h),onCurrentChange:x,onSizeChange:$},null,8,["current-page","page-size","total"])])])}}});export{se as default};
