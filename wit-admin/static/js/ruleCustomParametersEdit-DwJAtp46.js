var A=Object.defineProperty;var E=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var R=(d,s,r)=>s in d?A(d,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[s]=r,B=(d,s)=>{for(var r in s||(s={}))D.call(s,r)&&R(d,r,s[r]);if(E)for(var r of E(s))I.call(s,r)&&R(d,r,s[r]);return d};var S=(d,s,r)=>new Promise((w,c)=>{var x=e=>{try{i(r.next(e))}catch(y){c(y)}},g=e=>{try{i(r.throw(e))}catch(y){c(y)}},i=e=>e.done?w(e.value):Promise.resolve(e.value).then(x,g);i((r=r.apply(d,s)).next())});import{d as G,P as H,aj as J,r as q,b as F,h as K,m,o as p,q as V,s as u,y as t,x as h,p as a,c as T,F as U,A as N,z as W,a6 as X,av as Y,ah as Z,_ as ee}from"./index-BNylXLUF.js";import{e as le,f as ae}from"./ruleCustomParameters-iIrn7otW.js";const oe=G({name:"RuleCustomParameters",__name:"ruleCustomParametersEdit",emits:["query"],setup(d,{expose:s,emit:r}){const w=H("$baseMessage"),c=J(),x=r,g=q(!1),i=q(null),e=F({typeCode:"",paramCode:"",paramName:"",logicalOperatorList:[],controlType:"",valueSql:"",active:"0",remark:""}),j=F({typeCode:[{required:!0,message:"参数大类不能为空",trigger:"blur"}],paramCode:[{required:!0,message:"参数编码不能为空",trigger:"blur"},{required:!0,validator:(_,o,f)=>S(this,null,function*(){const{data:v}=yield le({id:e.id,paramCode:o});if(v)return f(new Error("参数编码不能重复"));f()}),trigger:"blur"}],paramName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],logicalOperatorList:[{required:!0,message:"逻辑运算符不能为空",trigger:"blur"}],controlType:[{required:!0,message:"控件类型不能为空",trigger:"blur"}],valueSql:[{required:!0,message:"取值SQL不能为空",trigger:"blur"}]}),C=q(""),b=q(!1);s({showEdit:_=>{b.value=!0,Y(()=>{_?(C.value="编辑",Object.assign(e,_)):(C.value="添加",delete e.id)})}});const L=()=>{i.value.resetFields(),b.value=!1},M=()=>{i.value.validate(_=>S(this,null,function*(){if(_){g.value=!0;const{msg:o}=yield ae(B({},e));g.value=!1,w(o,"success","hey"),x("query"),L()}}))};return K(()=>{}),(_,o)=>{const f=m("el-option"),v=m("el-select"),n=m("el-form-item"),k=m("el-input"),O=m("el-radio"),$=m("el-radio-group"),Q=m("el-form"),P=m("el-button"),z=Z;return p(),V(z,{modelValue:a(b),"onUpdate:modelValue":o[8]||(o[8]=l=>X(b)?b.value=l:null),"append-to-body":"",title:a(C),width:"600px",onClose:L},{footer:u(()=>[t(P,{onClick:L},{default:u(()=>[h("取 消")]),_:1}),t(P,{type:"primary",onClick:M,loading:a(g)},{default:u(()=>[h("确 定")]),_:1},8,["loading"])]),default:u(()=>[t(Q,{ref_key:"formRef",ref:i,"label-width":"90px",model:a(e),rules:a(j)},{default:u(()=>[t(n,{label:"参数大类",prop:"typeCode"},{default:u(()=>[t(v,{modelValue:a(e).typeCode,"onUpdate:modelValue":o[0]||(o[0]=l=>a(e).typeCode=l),placeholder:"请选择参数大类"},{default:u(()=>[(p(!0),T(U,null,N(a(c).wordbook.rule_param_type,l=>(p(),V(f,{key:l.id,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"参数编码",prop:"paramCode"},{default:u(()=>[t(k,{modelValue:a(e).paramCode,"onUpdate:modelValue":o[1]||(o[1]=l=>a(e).paramCode=l),placeholder:"请输入参数编码",disabled:a(C)==="编辑"},null,8,["modelValue","disabled"])]),_:1}),t(n,{label:"参数名称",prop:"paramName"},{default:u(()=>[t(k,{modelValue:a(e).paramName,"onUpdate:modelValue":o[2]||(o[2]=l=>a(e).paramName=l),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),t(n,{label:"逻辑运算符",prop:"logicalOperatorList"},{default:u(()=>[t(v,{modelValue:a(e).logicalOperatorList,"onUpdate:modelValue":o[3]||(o[3]=l=>a(e).logicalOperatorList=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":4,placeholder:"请选择逻辑运算符"},{default:u(()=>[(p(!0),T(U,null,N(a(c).wordbook.rule_logical_operators,l=>(p(),V(f,{key:l.id,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"控件类型",prop:"controlType"},{default:u(()=>[t(v,{modelValue:a(e).controlType,"onUpdate:modelValue":o[4]||(o[4]=l=>a(e).controlType=l),placeholder:"请选择控件类型"},{default:u(()=>[(p(!0),T(U,null,N(a(c).wordbook.rule_control_type,l=>(p(),V(f,{key:l.id,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(e).controlType.includes("_select")&&!a(e).controlType.includes("date_select")?(p(),V(n,{key:0,label:"取值SQL",prop:"valueSql"},{default:u(()=>[t(k,{modelValue:a(e).valueSql,"onUpdate:modelValue":o[5]||(o[5]=l=>a(e).valueSql=l),placeholder:"请输取值sql",type:"textarea",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})):W("",!0),t(n,{label:"启用状态"},{default:u(()=>[t($,{modelValue:a(e).active,"onUpdate:modelValue":o[6]||(o[6]=l=>a(e).active=l)},{default:u(()=>[t(O,{label:"启用",value:"0"}),t(O,{label:"关闭",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"备注",prop:"remark"},{default:u(()=>[t(k,{modelValue:a(e).remark,"onUpdate:modelValue":o[7]||(o[7]=l=>a(e).remark=l),maxlength:"50",placeholder:"请输备注",type:"textarea","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),de=ee(oe,[["__scopeId","data-v-61b56a44"]]);export{de as default};
