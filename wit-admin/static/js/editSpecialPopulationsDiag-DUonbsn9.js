var L=(O,h,v)=>new Promise((k,p)=>{var m=i=>{try{w(v.next(i))}catch(u){p(u)}},V=i=>{try{w(v.throw(i))}catch(u){p(u)}},w=i=>i.done?k(i.value):Promise.resolve(i.value).then(m,V);w((v=v.apply(O,h)).next())});import{d as Q,P as W,r as b,aj as X,b as Y,m as r,T as Z,o as s,c as f,y as o,s as n,x as M,p as l,t as ee,q as _,F as y,A as x,B as T,n as S,a6 as le,ah as ae,_ as te}from"./index-CmC8Jr0A.js";import{g as oe}from"./ageSetting-TxwJRzrO.js";import{a3 as ne}from"./indication-Cjl8NcsF.js";const se={class:"edit-cf-edit-container"},ie={class:"radio-bg"},ue={class:"radio-bg"},de={class:"radio-bg"},re=Q({__name:"editSpecialPopulationsDiag",emits:["query"],setup(O,{expose:h,emit:v}){const k=W("$baseMessage"),p=b(!1),m=b(!1),V=b("新增特殊人群"),w=v,i=b(),u=b(!1),z=b([]),F={patientType:[{required:!0,message:"请选择患者类型",trigger:"change"}]},A=X(),I=b([{label:"是",value:"1"},{label:"否",value:"0"}]),a=Y({id:"",generalId:"",patientType:"",whetherOverstepSynopsis:"0",active:0,problemLevelCode:"0",tipContent:"",reference:"",libType:"1",warnSign:"0",customAgeMin:null,customAgeMax:null,customAgeMinUnit:"",customAgeMaxUnit:""}),N=(d,t,c)=>{$(),a.generalId=c,p.value=!0,t=="edit"?(V.value="编辑特殊人群",Object.assign(a,d)):t=="see"?(V.value="查看特殊人群",Object.assign(a,d),u.value=!0):V.value="新增特殊人群"},C=()=>{m.value=!1,p.value=!1,u.value=!1,Object.assign(a,{id:"",generalId:"",patientType:"",whetherOverstepSynopsis:"0",active:0,problemLevelCode:"0",tipContent:"",reference:"",warnSign:"0",customAgeMin:null,customAgeMax:null,customAgeMinUnit:"",customAgeMaxUnit:""})},R=()=>{i.value.validate(d=>L(this,null,function*(){if(d){m.value=!0;try{let t=Object.assign({},a);const c=yield ne(t);m.value=!1,i.value.resetFields(),k(c.msg,"success","hey"),C(),w("query")}catch(t){m.value=!1}}}))};function $(){return L(this,null,function*(){const{data:d}=yield oe({pageNum:1,pageSize:99});z.value=d.records||[]})}function E(d){d!="18"&&(a.customAgeMin=null,a.customAgeMax=null,a.customAgeMinUnit="",a.customAgeMaxUnit="")}return h({showDiag:N}),(d,t)=>{const c=r("el-option"),U=r("el-select"),g=r("el-form-item"),D=r("el-input-number"),j=r("el-radio"),P=r("el-radio-group"),B=r("el-input"),G=r("el-form"),q=r("el-button"),H=ae,J=Z("loading");return s(),f("div",se,[o(H,{modelValue:l(p),"onUpdate:modelValue":t[10]||(t[10]=e=>le(p)?p.value=e:null),title:l(V),width:"826px",modal:!1,"append-to-body":"",onClose:C,class:"no-form-line-margin pointerEvents"},{footer:n(()=>[o(q,{onClick:C},{default:n(()=>[M("取 消")]),_:1}),o(q,{disabled:l(m),type:"primary",onClick:R},{default:n(()=>[M("确 定")]),_:1},8,["disabled"])]),default:n(()=>[ee((s(),_(G,{ref_key:"formRef",ref:i,model:l(a),"label-width":"120px",rules:F,disabled:l(u)},{default:n(()=>[o(g,{label:"患者类型",prop:"patientType"},{default:n(()=>[o(U,{modelValue:l(a).patientType,"onUpdate:modelValue":t[0]||(t[0]=e=>l(a).patientType=e),size:"large",placeholder:"请选择",onChange:E},{default:n(()=>[(s(!0),f(y,null,x(l(z),e=>(s(),_(c,{key:e.id,label:e.name,value:e.id},{default:n(()=>[M(T(e.name)+"("+T(e.minAge?e.minAge+e.minAgeUnit:e.minAge)+"-"+T(e.maxAge?e.maxAge+e.maxAgeUnit:e.maxAge)+") ",1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"自定义年龄范围"},{default:n(()=>[S("div",ie,[o(D,{modelValue:l(a).customAgeMin,"onUpdate:modelValue":t[1]||(t[1]=e=>l(a).customAgeMin=e),disabled:l(u)||l(a).patientType!="18",min:0,"controls-position":"right",size:"small"},null,8,["modelValue","disabled"]),o(U,{modelValue:l(a).customAgeMinUnit,"onUpdate:modelValue":t[2]||(t[2]=e=>l(a).customAgeMinUnit=e),size:"large",placeholder:"请选择",clearable:"",disabled:l(u)||l(a).patientType!="18",style:{width:"100px","margin-left":"8px"}},{default:n(()=>[(s(!0),f(y,null,x(l(A).wordbook.rule_age_unit,e=>(s(),_(c,{key:e.dictValue,label:e.dictLabel,value:e.dictLabel},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),M("  至  "),o(D,{modelValue:l(a).customAgeMax,"onUpdate:modelValue":t[3]||(t[3]=e=>l(a).customAgeMax=e),disabled:l(u)||l(a).patientType!="18",min:0,"controls-position":"right",size:"small"},null,8,["modelValue","disabled"]),o(U,{modelValue:l(a).customAgeMaxUnit,"onUpdate:modelValue":t[4]||(t[4]=e=>l(a).customAgeMaxUnit=e),size:"large",placeholder:"请选择",clearable:"",disabled:l(u)||l(a).patientType!="18",style:{width:"100px","margin-left":"8px"}},{default:n(()=>[(s(!0),f(y,null,x(l(A).wordbook.rule_age_unit,e=>(s(),_(c,{key:e.dictValue,label:e.dictLabel,value:e.dictLabel},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])]),_:1}),o(g,{label:"禁慎用标识"},{default:n(()=>[S("div",ue,[o(P,{modelValue:l(a).warnSign,"onUpdate:modelValue":t[5]||(t[5]=e=>l(a).warnSign=e)},{default:n(()=>[(s(!0),f(y,null,x(l(A).wordbook.caution_signs,(e,K)=>(s(),_(j,{key:e.dictValue,value:e.dictValue,label:e.dictLabel},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1}),o(g,{label:"问题等级"},{default:n(()=>[o(U,{modelValue:l(a).problemLevelCode,"onUpdate:modelValue":t[6]||(t[6]=e=>l(a).problemLevelCode=e),size:"large",placeholder:"请选择",clearable:""},{default:n(()=>[(s(!0),f(y,null,x(l(A).wordbook.problem_level_rule,e=>(s(),_(c,{key:e.dictLabel,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"是否超说明书用药"},{default:n(()=>[S("div",de,[o(P,{modelValue:l(a).whetherOverstepSynopsis,"onUpdate:modelValue":t[7]||(t[7]=e=>l(a).whetherOverstepSynopsis=e)},{default:n(()=>[(s(!0),f(y,null,x(l(I),(e,K)=>(s(),_(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),o(g,{label:"参考文献"},{default:n(()=>[o(B,{modelValue:l(a).reference,"onUpdate:modelValue":t[8]||(t[8]=e=>l(a).reference=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:3,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(g,{label:"提示内容"},{default:n(()=>[o(B,{modelValue:l(a).tipContent,"onUpdate:modelValue":t[9]||(t[9]=e=>l(a).tipContent=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:4,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"])),[[J,l(m)]])]),_:1},8,["modelValue","title"])])}}}),be=te(re,[["__scopeId","data-v-538bf0a8"]]);export{be as default};
