var h=(f,C,_)=>new Promise((m,x)=>{var w=i=>{try{d(_.next(i))}catch(y){x(y)}},s=i=>{try{d(_.throw(i))}catch(y){x(y)}},d=i=>i.done?m(i.value):Promise.resolve(i.value).then(w,s);d((_=_.apply(f,C)).next())});import{_ as ie}from"./editCustomRulesDiag.vue_vue_type_style_index_0_lang-CbDOM2VQ.js";import ce from"./ruleEditing-DV3TpLnw.js";import{d as re,aj as ue,P as U,r as p,b as de,a0 as pe,m as u,o as R,c as q,y as n,s as o,n as g,a7 as me,p as l,aY as fe,q as E,z as _e,B as he,F as ge,A as ve,C as V,x as B,H as we,af as ye,ag as be,I as Ce,J as xe,_ as ke}from"./index-CmC8Jr0A.js";import{b as Se,d as P,e as Re,f as T}from"./indication-Cjl8NcsF.js";import"./prescriptionIssueSettings-DTI3RBwL.js";import"./ruleSetItemContent-C1CWiyzb.js";import"./ruleItem-D1B3madY.js";import"./judgingConditions-DCjH_Uof.js";import"./index.vue_vue_type_style_index_0_lang-D4meg1a3.js";import"./ifComponent.vue_vue_type_style_index_0_lang-ZpisXDR_.js";import"./index-COFi4TtR.js";import"./index.vue_vue_type_script_setup_true_lang-DtyLHHVv.js";import"./dict-BvhWhz6G.js";import"./ruleCustomParameters-Dcw2hLI-.js";const A=f=>(Ce("data-v-6dc2bdfe"),f=f(),xe(),f),Ve={class:"customRules-container auto-height-container"},$e={class:"flex justify-between align-center"},ze=A(()=>g("div",{class:"title"},"自定义规则",-1)),Me={class:"header-action-icon"},Be={class:"flex justify-between align-center",style:{"flex-wrap":"wrap"}},De={class:"flex"},Ne=A(()=>g("span",null,"新增自定义规则",-1)),Fe=re({__name:"index",props:{ruleForm:{type:Object,default:()=>{}}},setup(f){const C=ue(),_=U("$baseConfirm"),m=U("$baseMessage"),x=p("custom_rules"),w=p(null),s=p(!1),d=p([]),i=p([]),y=p([{width:"40",type:"checkbox"},{field:"name",title:"自定义规则名称",minWidth:"140"},{field:"questionName",title:"问题类型",width:"100"},{field:"whetherOverstepSynopsis",title:"超说明书用药",width:"125",filters:[{label:"是",value:"1"},{label:"否",value:"0"}],filterMultiple:!1,render:!0},{field:"severity",title:"问题等级",width:"100",align:"center",filters:C.wordbook.problem_level_rule.map(e=>({label:e.dictLabel,value:e.dictValue})),filterMultiple:!1,render:!0},{field:"active",title:"是否屏蔽",width:"75",align:"center",render:!0},{field:"btns",title:"操作",align:"center",width:"200",fixed:"right",render:!0}]),r=de({keyword:"",pageNum:1,pageSize:10,total:0,whetherOverstepSynopsis:"",severity:""});function v(){return h(this,null,function*(){i.value=[];let{data:e}=yield Se(r);d.value=e.records,r.total=e.total,d.value.length&&(w.value.tableMethods("setCurrentRow",d.value[0]),I({row:d.value[0]}))})}const H=e=>{r.pageNum=1,r.pageSize=e,v()},$=e=>{r.pageNum=e,v()};function D(){i.value=w.value.tableMethods("getCheckboxRecords")}const N=p(null);function z(e,t){N.value.showDiag(e,t)}function F(e){e.id?_("您确定要删除当前项吗",null,()=>h(this,null,function*(){const{msg:t}=yield P([e.id]);m(t,"success","hey"),yield v()})):_("您确定要批量删除选择项吗",null,()=>h(this,null,function*(){const t=i.value.map(k=>k.id),{msg:b}=yield P(t);m(b,"success","hey"),yield v()}))}function J({property:e,values:t}){r[e]=t[0]||"",$(1)}const M=p(!1);function Q(){return h(this,null,function*(){s.value=!0,M.value=!0;const{msg:e}=yield Re();s.value=!1,M.value=!1,m(e,"success","hey")})}function W(e){return h(this,null,function*(){try{s.value=!0;const t=yield T([e]);s.value=!1,m(t.msg,"success","hey")}catch(t){s.value=!1}})}function Y(e){return h(this,null,function*(){try{s.value=!0;const{msg:t}=yield T([e]);s.value=!1,m(t,"success","hey")}catch(t){e.active=e.active==="1"?"0":"1",s.value=!1}})}const j=p();function I({row:e}){j.value.query(e)}function G(){m("暂未添加接口","warning","hey")}return pe(()=>{v()}),(e,t)=>{const b=we,k=u("el-tooltip"),K=u("el-input"),X=u("el-checkbox"),S=u("el-button"),Z=u("el-option"),ee=u("el-select"),te=u("el-switch"),ne=ye,ae=be,L=u("el-card"),O=u("el-col"),oe=ce,le=u("el-row"),se=ie;return R(),q("div",Ve,[n(le,{gutter:16},{default:o(()=>[n(O,{span:12},{default:o(()=>[n(L,{class:"no-bottom-card"},{header:o(()=>[g("div",$e,[ze,g("div",Me,[n(k,{class:"box-item",effect:"dark",content:"检查",placement:"top"},{default:o(()=>[n(b,{icon:"icon-jiancha",class:"refresh-icon",onClick:G,style:{padding:"4px 5px 3px"}})]),_:1}),n(k,{class:"box-item",effect:"dark",content:"刷新缓存",placement:"top"},{default:o(()=>[n(b,{icon:"icon-gengxin",class:me({"refresh-icon":!0,"loading-animation":l(M)}),onClick:Q,style:{padding:"4px"}},null,8,["class"])]),_:1})])])]),default:o(()=>[g("div",Be,[n(K,{modelValue:l(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>l(r).keyword=a),clearable:"",placeholder:"请输入自定义规则关键字","suffix-icon":l(fe),style:{width:"300px"},onInput:t[1]||(t[1]=a=>$(1))},null,8,["modelValue","suffix-icon"]),g("div",De,[l(i).length?(R(),E(X,{key:0,"model-value":!0,label:"批量删除",border:"",style:{"margin-right":"12px"},onClick:F})):_e("",!0),n(S,{plain:"",type:"warning",onClick:t[2]||(t[2]=a=>z("","add"))},{default:o(()=>[n(b,{icon:"icon-xinzengdianpingjihua"}),Ne]),_:1})])]),n(ne,{ref_key:"tableRef",ref:w,"table-name":"rule-contraindication-table",loading:l(s),tableData:l(d),columns:l(y),isShowTableSet:!1,onCheckboxChange:D,onCheckboxAll:D,onFilterChange:J,onCellClick:I},{whetherOverstepSynopsis:o(a=>[g("div",null,he(a.row.whetherOverstepSynopsis=="1"?"是":"否"),1)]),severity:o(a=>[n(ee,{modelValue:a.row.severity,"onUpdate:modelValue":c=>a.row.severity=c,placeholder:"请选择",onChange:c=>W(a.row)},{default:o(()=>[(R(!0),q(ge,null,ve(l(C).wordbook.problem_level_rule,c=>(R(),E(Z,{key:c.dictLabel,label:c.dictLabel,value:c.dictValue},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),active:o(a=>[n(te,{modelValue:a.row.active,"onUpdate:modelValue":c=>a.row.active=c,loading:l(s),onClick:t[3]||(t[3]=V(()=>{},["stop"])),onChange:c=>Y(a.row),"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),btns:o(a=>[n(S,{text:"",type:"primary",onClick:V(c=>z(a.row,"check"),["stop"])},{default:o(()=>[B("查看")]),_:2},1032,["onClick"]),n(S,{text:"",type:"primary",onClick:V(c=>z(a.row,"edit"),["stop"])},{default:o(()=>[B("编辑")]),_:2},1032,["onClick"]),n(S,{text:"",type:"primary",onClick:V(c=>F(a.row),["stop"])},{default:o(()=>[B("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","tableData","columns"]),n(ae,{"current-page":l(r).pageNum,"page-size":l(r).pageSize,total:l(r).total,"prev-text":"上一页","next-text":"下一页",onCurrentChange:$,onSizeChange:H},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),n(O,{span:12},{default:o(()=>[n(L,{class:"no-bottom-card"},{default:o(()=>[n(oe,{dimensionCode:l(x),ref_key:"ruleEditingBox",ref:j},null,8,["dimensionCode"])]),_:1})]),_:1})]),_:1}),n(se,{ref_key:"editRepeatedMedicationDiagRef",ref:N,onQuery:v,ruleForm:f.ruleForm},null,8,["ruleForm"])])}}}),Ge=ke(Fe,[["__scopeId","data-v-6dc2bdfe"]]);export{Ge as default};
