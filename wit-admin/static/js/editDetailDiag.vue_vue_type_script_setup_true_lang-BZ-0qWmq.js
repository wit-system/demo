var k=(s,_,d)=>new Promise((V,f)=>{var r=e=>{try{u(d.next(e))}catch(g){f(g)}},c=e=>{try{u(d.throw(e))}catch(g){f(g)}},u=e=>e.done?V(e.value):Promise.resolve(e.value).then(r,c);u((d=d.apply(s,_)).next())});import{an as x,d as S,aj as $,r as y,b as B,m,o as v,q as w,s as n,y as l,x as C,p as t,c as E,F as j,A,a6 as P,ae as q,ah as T}from"./index-C3-31E46.js";function K(s){return x({url:`/system/sy-base-main-code/page?pageNum=${s.pageNum}&pageSize=${s.pageSize}`,method:"post",data:s})}function G(s){return x({url:"/system/sy-base-main-code/batch",method:"post",data:[s]})}function H(s){return x({url:"/system/sy-base-main-code/put-batch",method:"post",data:[s]})}const O=S({__name:"editDetailDiag",emits:["close-diag"],setup(s,{expose:_,emit:d}){const V=$(),f=d,r=y(!1),c=y("新增"),u=y(null),e=B({id:"",basis:"",drugLabeling:"",usageDosage:"",contraindication:"",attention:""}),g={basis:[{required:!0,message:"请输入药品主成份",trigger:"blur"}],drugLabeling:[{required:!0,message:"请选择中西药标识",trigger:"change"}],usageDosage:[{required:!0,message:"请输入用法用量",trigger:"blur"}],contraindication:[{required:!0,message:"请输入禁忌证",trigger:"blur"}],attention:[{required:!0,message:"请输入注意事项",trigger:"blur"}]};function D(){r.value=!1,u.value.resetFields(),L()}function F(i){r.value=!0,i&&(e.id=i.id||"",e.basis=i.basis||"",e.drugLabeling=`${i.drugLabeling}`,e.usageDosage=i.usageDosage||"",e.contraindication=i.contraindication||"",e.attention=i.attention||"",c.value="编辑")}function M(){u.value.validate(i=>k(this,null,function*(){if(i){if((yield e.id?H(e):G(e)).resultCode!=1){q.error("操作失败！！");return}q.success("操作成功！！"),r.value=!1,u.value.resetFields(),L(),f("close-diag")}}))}function L(){e.id="",e.basis="",e.drugLabeling="",e.usageDosage="",e.contraindication="",e.attention="",c.value="新增"}return _({openDiag:F}),(i,o)=>{const b=m("el-input"),p=m("el-form-item"),U=m("el-option"),h=m("el-select"),z=m("el-form"),R=m("el-button"),N=T;return v(),w(N,{modelValue:t(r),"onUpdate:modelValue":o[5]||(o[5]=a=>P(r)?r.value=a:null),"append-to-body":"","before-close":D,title:t(c),width:"720px"},{footer:n(()=>[l(R,{onClick:D},{default:n(()=>[C("取 消")]),_:1}),l(R,{type:"primary",onClick:M},{default:n(()=>[C("确 定")]),_:1})]),default:n(()=>[l(z,{ref_key:"formRef",ref:u,"label-width":"120px",model:t(e),rules:g},{default:n(()=>[l(p,{label:"药品主成份:",prop:"basis"},{default:n(()=>[l(b,{modelValue:t(e).basis,"onUpdate:modelValue":o[0]||(o[0]=a=>t(e).basis=a),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入药品主成份"},null,8,["modelValue"])]),_:1}),l(p,{label:"中西药标识:",prop:"drugLabeling"},{default:n(()=>[l(h,{modelValue:t(e).drugLabeling,"onUpdate:modelValue":o[1]||(o[1]=a=>t(e).drugLabeling=a),modelModifiers:{trim:!0},clearable:"",placeholder:"请选择中西药标识"},{default:n(()=>[(v(!0),E(j,null,A(t(V).wordbook.sys_chinese_western_medication,a=>(v(),w(U,{key:a.id,label:a.dictLabel,value:a.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"用法用量:",prop:"usageDosage"},{default:n(()=>[l(b,{modelValue:t(e).usageDosage,"onUpdate:modelValue":o[2]||(o[2]=a=>t(e).usageDosage=a),modelModifiers:{trim:!0},autosize:{minRows:2,maxRows:6},clearable:"",placeholder:"用法用量",type:"textarea"},null,8,["modelValue"])]),_:1}),l(p,{label:"禁忌证:",prop:"contraindication"},{default:n(()=>[l(b,{modelValue:t(e).contraindication,"onUpdate:modelValue":o[3]||(o[3]=a=>t(e).contraindication=a),modelModifiers:{trim:!0},autosize:{minRows:2,maxRows:6},clearable:"",placeholder:"禁忌证",type:"textarea"},null,8,["modelValue"])]),_:1}),l(p,{label:"注意事项:",prop:"attention"},{default:n(()=>[l(b,{modelValue:t(e).attention,"onUpdate:modelValue":o[4]||(o[4]=a=>t(e).attention=a),modelModifiers:{trim:!0},autosize:{minRows:2,maxRows:6},clearable:"",placeholder:"注意事项",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{O as _,K as g};
