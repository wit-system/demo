var v=(E,u,d)=>new Promise((y,p)=>{var h=l=>{try{c(d.next(l))}catch(f){p(f)}},b=l=>{try{c(d.throw(l))}catch(f){p(f)}},c=l=>l.done?y(l.value):Promise.resolve(l.value).then(h,b);c((d=d.apply(E,u)).next())});import oe from"./index-BLCdKewm.js";import{_ as se}from"./departmentGroupEdit.vue_vue_type_script_setup_true_lang-Dwo2HW3y.js";import{d as re,r as a,P as O,b as T,h as le,m as N,o as ie,q as ce,s as i,y as s,n as m,p as o,a6 as D,B as j,C as z,x as V,af as ue,ag as de,_ as pe}from"./index-BN8uVNSO.js";import{_ as me}from"./index.vue_vue_type_style_index_0_lang-CYTYEVrP.js";import{a as he,b as fe,c as _e,e as ge,f as ve}from"./departmentGroup-CcB0-Q4_.js";import"./ifComponent.vue_vue_type_style_index_0_lang-TMjKtAQ8.js";import"./index-DxSYlWYB.js";import"./index.vue_vue_type_script_setup_true_lang-BkXq5IQh.js";import"./dict-Ck584AJf.js";const ye={class:"index-container auto-height-container"},we={class:"app-content padding-horizontal"},be={class:"app-pagination"},ke={class:"index-container auto-height-container"},Ce={class:"app-content padding-horizontal padding-bottom"},Ge=re({name:"departmentGroup",__name:"departmentGroup",setup(E){const u=a([]),d=O("$baseConfirm"),y=O("$baseMessage"),p=a(!1),h=a(!1),b=a(null),c=a(null),l=a(),f=a(),r=a({searchQuick:{keyword:""}}),k=a({searchQuick:{keyword:""}}),P=T({searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:Q}},{label:"添加",icon:"icon-xinzengdianpingjihua",attrs:{type:"warning"},events:{click:L}}],searchList:[{type:"searchQuick",field:"searchQuick",attrs:{width:180,placeholder:"请输入科室组名称",clearable:!0,isFetch:!0},events:{clear:Q}}]}),U=T({searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:R}},{label:"添加",icon:"icon-xinzengdianpingjihua",attrs:{type:"warning"},events:{click:H}}],searchList:[{type:"searchQuick",field:"searchQuick",attrs:{width:180,placeholder:"请输入科室名称",clearable:!0,isFetch:!0},events:{clear:R}}]}),w=a([]),S=a([]),$=a(0),W=a([{width:"50",title:"序号",type:"seq"},{field:"groupName",title:"科室组名",minWidth:"160"},{field:"states",title:"状态",width:"140",render:!0},{field:"btns",title:"操作",align:"center",width:"140",fixed:"right",render:!0}]),A=a([{width:"50",title:"序号",type:"seq"},{field:"deptCode",title:"科室编码",minWidth:"160"},{field:"isOpIp",title:"门诊住院标识",width:"140",render:!0},{field:"deptName",title:"科室名",minWidth:"140"},{field:"btns",title:"操作",align:"center",width:"100",fixed:"right",render:!0}]),x=a(null),I=a(null);a(null),a(null);function L(e={}){e.id?x.value.showEdit(e):x.value.showEdit()}function H(e={}){e.id?(u.value=[{code:e.deptCode,name:e.deptName}],I.value.showEdit({selectorType:2})):(u.value=(S.value||[]).map(t=>({code:t.deptCode,name:t.deptName})),I.value.showEdit({selectorType:2}))}const J=(e={})=>{e.id&&d("您确定要删除当前项吗",null,()=>v(this,null,function*(){const{msg:t}=yield he(e);y(t,"success","hey"),yield _()}))},K=(e={})=>{e.id&&d("您确定要删除当前项吗",null,()=>v(this,null,function*(){const{msg:t}=yield fe({id:e.id});y(t,"success","hey"),yield C()}))},X=e=>{r.value.pageNum=1,r.value.pageSize=e,_()},Y=e=>{r.value.pageNum=e,_()};function Q(){l.value.search()}function _(){return v(this,null,function*(){p.value=!0;let e={pageNum:r.value.pageNum,pageSize:r.value.pageSize,groupName:r.value.searchQuick.keyword};const{data:t}=yield _e(e);w.value=t.records,$.value=t.total,p.value=!1,w.value.length&&(b.value.tableMethods("setCurrentRow",w.value[0]),q({row:w.value[0]}))})}function R(){f.value.search()}function C(){return v(this,null,function*(){if(!c.value||!c.value.id)return;h.value=!0;let e={groupId:c.value.id||"",deptName:k.value.searchQuick.keyword};const{data:t}=yield ge(e);S.value=t,h.value=!1})}function Z(e){return v(this,null,function*(){let t={groupId:c.value.id,deptMsgList:(e||[]).map(g=>({deptCode:g.code,isOpIp:g.parentCode}))};const{msg:G}=yield ve(t);y(G,"success","hey"),C()})}function q(e){c.value=e.row,C()}return le(()=>{_()}),(e,t)=>{const G=me,g=N("el-button"),B=ue,ee=de,te=se,F=N("el-col"),ae=oe,ne=N("el-row");return ie(),ce(ne,{gutter:12},{default:i(()=>[s(F,{span:12},{default:i(()=>[m("div",ye,[s(G,{ref_key:"refSearch",ref:l,modelValue:o(r),"onUpdate:modelValue":t[0]||(t[0]=n=>D(r)?r.value=n:null),"search-data":o(P),"search-name":"system-department-group",searching:o(p),onSearch:_,isCache:!1,border:!1},null,8,["modelValue","search-data","searching"]),m("div",we,[s(B,{ref_key:"tableRef1",ref:b,"table-name":"system-department-group",loading:o(p),tableData:o(w),columns:o(W),"highlight-current-row":"",onCellClick:q},{states:i(n=>[m("span",null,j(n.row.states==="0"?"启用":n.row.states==="1"?"弃用":""),1)]),btns:i(n=>[s(g,{text:"",type:"primary",onClick:z(M=>L(n.row),["stop"])},{default:i(()=>[V("编辑")]),_:2},1032,["onClick"]),s(g,{text:"",type:"primary",onClick:z(M=>J(n.row),["stop"])},{default:i(()=>[V("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","tableData","columns"])]),m("div",be,[s(ee,{"current-page":o(r).pageNum,"page-size":o(r).pageSize,total:o($),onCurrentChange:Y,onSizeChange:X},null,8,["current-page","page-size","total"])]),s(te,{ref_key:"departmentGroupEditRef",ref:x,onQuery:_},null,512)])]),_:1}),s(F,{span:12},{default:i(()=>[m("div",ke,[s(G,{ref_key:"refSearch1",ref:f,modelValue:o(k),"onUpdate:modelValue":t[1]||(t[1]=n=>D(k)?k.value=n:null),"search-data":o(U),"search-name":"system-department-group1",searching:o(h),onSearch:C,border:!1,isCache:!1},null,8,["modelValue","search-data","searching"]),m("div",Ce,[s(B,{"table-name":"system-department-group1",loading:o(h),tableData:o(S),columns:o(A)},{isOpIp:i(n=>[m("div",null,j(n.row.isOpIp=="1"?"门诊":n.row.isOpIp=="2"?"住院":n.row.isOpIp=="3"?"全院":""),1)]),btns:i(n=>[s(g,{text:"",type:"primary",onClick:z(M=>K(n.row),["stop"])},{default:i(()=>[V("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","tableData","columns"])])]),s(ae,{modelValue:o(u),"onUpdate:modelValue":[t[2]||(t[2]=n=>D(u)?u.value=n:null),Z],ref_key:"departmentGroupEditRef1",ref:I},null,8,["modelValue"])]),_:1})]),_:1})}}}),Qe=pe(Ge,[["__scopeId","data-v-38135133"]]);export{Qe as default};
