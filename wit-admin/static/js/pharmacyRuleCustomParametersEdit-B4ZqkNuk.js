var Q=Object.defineProperty;var H=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var R=(r,n,d)=>n in r?Q(r,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[n]=d,E=(r,n)=>{for(var d in n||(n={}))A.call(n,d)&&R(r,d,n[d]);if(H)for(var d of H(n))I.call(n,d)&&R(r,d,n[d]);return r};var U=(r,n,d)=>new Promise((x,c)=>{var S=e=>{try{i(d.next(e))}catch(C){c(C)}},b=e=>{try{i(d.throw(e))}catch(C){c(C)}},i=e=>e.done?x(e.value):Promise.resolve(e.value).then(S,b);i((d=d.apply(r,n)).next())});import{an as q,d as G,P as J,aj as K,r as w,b as j,h as W,m as p,o as m,q as V,s as u,y as t,x as $,p as a,c as N,F as T,A as O,z as X,a6 as Y,av as Z,ah as ee,_ as le}from"./index-9sA7DK8G.js";function se(r){return q({url:`/system/tutelage-rule-param/page?pageNum=${r.pageNum}&pageSize=${r.pageSize}`,method:"post",data:r})}function ae(r){return q({url:"/system/tutelage-rule-param/put",method:"post",data:r})}function pe(r){return q({url:"/system/tutelage-rule-param/del-ids",method:"post",data:r})}function oe(r){return q({url:"/system/tutelage-rule-param/verify",method:"post",data:r})}const te=G({name:"RuleCustomParameters",__name:"pharmacyRuleCustomParametersEdit",emits:["query"],setup(r,{expose:n,emit:d}){const x=J("$baseMessage"),c=K(),S=d,b=w(!1),i=w(null),e=j({typeCode:"",paramCode:"",paramName:"",logicalOperatorList:[],controlType:"",valueSql:"",active:"0",remark:"",paramHandle:""}),z=j({typeCode:[{required:!0,message:"参数大类不能为空",trigger:"blur"}],paramCode:[{required:!0,message:"参数编码不能为空",trigger:"blur"},{required:!0,validator:(g,o,_)=>U(this,null,function*(){const{data:v}=yield oe({id:e.id,paramCode:o});if(v)return _(new Error("参数编码不能重复"));_()}),trigger:"blur"}],paramName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],logicalOperatorList:[{required:!0,message:"逻辑运算符不能为空",trigger:"blur"}],controlType:[{required:!0,message:"控件类型不能为空",trigger:"blur"}],valueSql:[{required:!0,message:"取值SQL不能为空",trigger:"blur"}]}),k=w(""),y=w(!1);n({showEdit:g=>{y.value=!0,Z(()=>{g?(k.value="编辑",Object.assign(e,g)):(k.value="添加",delete e.id)})}});const L=()=>{i.value.resetFields(),y.value=!1},B=()=>{i.value.validate(g=>U(this,null,function*(){if(g){b.value=!0;const{msg:o}=yield ae(E({},e));b.value=!1,x(o,"success","hey"),S("query"),L()}}))};return W(()=>{}),(g,o)=>{const _=p("el-option"),v=p("el-select"),s=p("el-form-item"),f=p("el-input"),P=p("el-radio"),F=p("el-radio-group"),M=p("el-form"),h=p("el-button"),D=ee;return m(),V(D,{modelValue:a(y),"onUpdate:modelValue":o[10]||(o[10]=l=>Y(y)?y.value=l:null),"append-to-body":"",title:a(k),width:"600px",onClose:L},{footer:u(()=>[t(h,{onClick:L},{default:u(()=>[$("取 消")]),_:1}),t(h,{type:"primary",onClick:B,loading:a(b)},{default:u(()=>[$("确 定")]),_:1},8,["loading"])]),default:u(()=>[t(M,{ref_key:"formRef",ref:i,"label-width":"90px",model:a(e),rules:a(z)},{default:u(()=>[t(s,{label:"参数大类",prop:"typeCode"},{default:u(()=>[t(v,{modelValue:a(e).typeCode,"onUpdate:modelValue":o[0]||(o[0]=l=>a(e).typeCode=l),placeholder:"请选择参数大类"},{default:u(()=>[(m(!0),N(T,null,O(a(c).wordbook.tutelage_rule_param_type,l=>(m(),V(_,{key:l.id,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"参数编码",prop:"paramCode"},{default:u(()=>[t(f,{modelValue:a(e).paramCode,"onUpdate:modelValue":o[1]||(o[1]=l=>a(e).paramCode=l),placeholder:"请输入参数编码",disabled:a(k)==="编辑"},null,8,["modelValue","disabled"])]),_:1}),t(s,{label:"参数名称",prop:"paramName"},{default:u(()=>[t(f,{modelValue:a(e).paramName,"onUpdate:modelValue":o[2]||(o[2]=l=>a(e).paramName=l),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),t(s,{label:"逻辑运算符",prop:"logicalOperatorList"},{default:u(()=>[t(v,{modelValue:a(e).logicalOperatorList,"onUpdate:modelValue":o[3]||(o[3]=l=>a(e).logicalOperatorList=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":4,placeholder:"请选择逻辑运算符"},{default:u(()=>[(m(!0),N(T,null,O(a(c).wordbook.rule_logical_operators,l=>(m(),V(_,{key:l.id,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"控件类型",prop:"controlType"},{default:u(()=>[t(v,{modelValue:a(e).controlType,"onUpdate:modelValue":o[4]||(o[4]=l=>a(e).controlType=l),placeholder:"请选择控件类型"},{default:u(()=>[(m(!0),N(T,null,O(a(c).wordbook.rule_control_type,l=>(m(),V(_,{key:l.id,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"参数处理器",prop:"paramHandle"},{default:u(()=>[t(f,{modelValue:a(e).paramHandle,"onUpdate:modelValue":o[5]||(o[5]=l=>a(e).paramHandle=l),placeholder:"请输spring注入bean",type:"input"},null,8,["modelValue"])]),_:1}),t(s,{label:"视图处理器",prop:"viewHandle"},{default:u(()=>[t(f,{modelValue:a(e).viewHandle,"onUpdate:modelValue":o[6]||(o[6]=l=>a(e).viewHandle=l),placeholder:"请输spring注入bean",type:"input"},null,8,["modelValue"])]),_:1}),a(e).controlType.includes("_select")&&!a(e).controlType.includes("date_select")?(m(),V(s,{key:0,label:"取值SQL",prop:"valueSql"},{default:u(()=>[t(f,{modelValue:a(e).valueSql,"onUpdate:modelValue":o[7]||(o[7]=l=>a(e).valueSql=l),placeholder:"请输取值sql",type:"textarea",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})):X("",!0),t(s,{label:"启用状态"},{default:u(()=>[t(F,{modelValue:a(e).active,"onUpdate:modelValue":o[8]||(o[8]=l=>a(e).active=l)},{default:u(()=>[t(P,{label:"启用",value:"0"}),t(P,{label:"关闭",value:"1"})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"备注",prop:"remark"},{default:u(()=>[t(f,{modelValue:a(e).remark,"onUpdate:modelValue":o[9]||(o[9]=l=>a(e).remark=l),maxlength:"50",placeholder:"请输备注",type:"textarea","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),re=le(te,[["__scopeId","data-v-bdc9c86d"]]),me=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{re as _,pe as a,ae as d,se as g,me as p};
