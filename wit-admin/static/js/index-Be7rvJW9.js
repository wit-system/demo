var b=(S,_,s)=>new Promise((v,c)=>{var g=e=>{try{d(s.next(e))}catch(u){c(u)}},r=e=>{try{d(s.throw(e))}catch(u){c(u)}},d=e=>e.done?v(e.value):Promise.resolve(e.value).then(g,r);d((s=s.apply(S,_)).next())});import{_ as F}from"./systemConfigEdit.vue_vue_type_script_setup_true_lang-DYroHKPe.js";import{d as O,f as P,P as N,r as l,b as R,h as U,m as f,T as Y,o as B,c as A,y as t,n as h,t as G,q as H,s as i,x as w,B as C,p as J,ag as Q}from"./index-CmC8Jr0A.js";import{_ as W}from"./index.vue_vue_type_style_index_0_lang-D4meg1a3.js";import{b as X,g as Z}from"./systemConfig-CsBEnOLw.js";import"./ifComponent.vue_vue_type_style_index_0_lang-ZpisXDR_.js";import"./index-COFi4TtR.js";import"./index.vue_vue_type_script_setup_true_lang-DtyLHHVv.js";import"./dict-BvhWhz6G.js";const ee={class:"user-management-container auto-height-container"},te={class:"app-content padding-out"},ae={style:{"text-align":"left"}},ne={style:{"text-align":"left"}},oe={class:"app-pagination"},ge=O({name:"SystemConfig",__name:"index",setup(S){const _=P(),s=N("$baseConfirm"),v=N("$baseMessage"),c=l(null),g=l([]),r=l(!0),d=l(0);l([]);const e=l({pageNum:1,pageSize:10,configName:"",configKey:""}),u=R({searchList:[{type:"input",field:"configName",label:"参数名称",isOutBorder:!0,attrs:{width:220,placeholder:"请输入参数名称",clearable:!0},events:{}},{type:"input",field:"configKey",label:"参数键值",isOutBorder:!0,attrs:{width:220,placeholder:"请输入参数键值",clearable:!0},events:{}}],searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:$}},{label:"新建",icon:"icon-xinzengdianpingjihua",attrs:{type:"warning"},events:{click:z}}]}),k=l();function $(){k.value.search()}function z(){c.value.showEdit()}const D=(a={})=>{c.value.showEdit(a)},V=(a={})=>{if(a.configId){const m=[];m.push(a.configId),s("您确定要删除选中项吗",null,()=>b(this,null,function*(){const{msg:y}=yield X(m);v(y,"success","hey"),yield p()}))}},T=a=>{e.value.pageNum=1,e.value.pageSize=a,p()},L=a=>{e.value.pageNum=a,p()},p=()=>b(this,null,function*(){r.value=!0;const{data:a}=yield Z(e.value);g.value=a.records,d.value=a.total,r.value=!1});return U(()=>{p()}),(a,m)=>{const y=W,o=f("el-table-column"),x=f("el-button"),E=f("el-empty"),K=f("el-table"),I=Q,M=F,j=Y("loading");return B(),A("div",ee,[t(y,{ref_key:"refSearch",ref:k,modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=n=>e.value=n),"search-data":u,"search-name":"system-config",searching:r.value,onSearch:p},null,8,["modelValue","search-data","searching"]),h("div",te,[G((B(),H(K,{data:g.value,border:""},{empty:i(()=>[t(E,{class:"wit-data-empty",description:"暂无数据"})]),default:i(()=>[t(o,{align:"center",label:"序号",width:"55"},{default:i(({$index:n})=>[w(C(n+1),1)]),_:1}),t(o,{align:"center",label:"参数名称","min-width":"180",prop:"configName","show-overflow-tooltip":""},{default:i(({row:n})=>[h("div",ae,C(n.configName),1)]),_:1}),t(o,{align:"center",label:"参数键名","min-width":"180",prop:"configKey"},{default:i(({row:n})=>[h("div",ne,C(n.configKey),1)]),_:1}),t(o,{align:"center",label:"参数键值","min-width":"100",prop:"configValue","show-overflow-tooltip":""}),t(o,{align:"center",label:"是否内置","min-width":"50",prop:"configType","show-overflow-tooltip":""}),t(o,{align:"center",label:"创建者","min-width":"70",prop:"createBy","show-overflow-tooltip":""}),t(o,{align:"center",label:"创建时间","min-width":"80",prop:"createTime","show-overflow-tooltip":""}),t(o,{align:"center",label:"操作",width:"150"},{default:i(({row:n})=>[t(x,{disabled:n.configType=="Y"&&!J(_).userInfo.user.admin,text:"",type:"primary",onClick:q=>D(n)},{default:i(()=>[w(" 编辑 ")]),_:2},1032,["disabled","onClick"]),t(x,{disabled:n.configType=="Y",text:"",type:"danger",onClick:q=>V(n)},{default:i(()=>[w("删除")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"])),[[j,r.value]])]),h("div",oe,[t(I,{"current-page":e.value.pageNum,"page-size":e.value.pageSize,total:d.value,onCurrentChange:L,onSizeChange:T},null,8,["current-page","page-size","total"])]),t(M,{ref_key:"editRef",ref:c,onFetchData:p},null,512)])}}});export{ge as default};
