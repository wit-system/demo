var k=(_,x,p)=>new Promise((l,y)=>{var e=d=>{try{r(p.next(d))}catch(f){y(f)}},S=d=>{try{r(p.throw(d))}catch(f){y(f)}},r=d=>d.done?l(d.value):Promise.resolve(d.value).then(e,S);r((p=p.apply(_,x)).next())});import{d as A,P as D,aj as E,r as G,b as L,a0 as K,m as i,o as m,c as h,y as t,s as c,p as n,a6 as Q,n as s,B as M,F as T,A as F,q as H,x as V,a7 as W,H as X,I as Y,J as Z,_ as ee}from"./index-BN8uVNSO.js";import{m as ne,a as ae}from"./drugDosageRules-CcBQVLiR.js";const v=_=>(Y("data-v-2af5512b"),_=_(),Z(),_),te={style:{padding:"0px 8px"}},oe={class:"flex justify-between align-center"},se={class:"title"},le=v(()=>s("div",{style:{"line-height":"38px"}},"药品类型",-1)),ie={class:"radio-bg"},ce={class:"header-line"},de={class:"common-attention"},ue={key:0,class:"level-content"},re=v(()=>s("span",{class:"label-text"},"小于等于",-1)),me=v(()=>s("span",{class:"label-text1"},"OR",-1)),_e=v(()=>s("span",{class:"label-text"},"大于等于",-1)),pe=v(()=>s("div",{style:{"line-height":"40px"}},"是否开启",-1)),ge={class:"flex radio-bg"},be={class:"common-attention",style:{"margin-left":"8px"}},ye=A({__name:"index",setup(_){const x=D("$baseMessage"),p=E(),l=G("3"),y=L([{title:"禁用",key:"openUsageForbidden",numStr:"usageForbiddenLess",num1Str1:"usageForbiddenMore"},{title:"不推荐",key:"openUsageNorecommend",numStr:"usageNorecommendLess",num1Str1:"usageNorecommendMore"},{title:"慎用",key:"openUsageCaution",numStr:"usageCautionLess",num1Str1:"usageCautionMore"},{title:"提示",key:"openUsageHint",numStr:"usageHintLess",num1Str1:"usageHintMore"}]),e=L({id:"",signs:"1",medicineType:"1",openUsageForbidden:"",openUsageNorecommend:"",openUsageCaution:"",openUsageHint:"",usageForbiddenLess:null,usageForbiddenMore:null,usageNorecommendLess:null,usageNorecommendMore:null,usageCautionLess:null,usageCautionMore:null,usageHintLess:null,usageHintMore:null,frequencySwitch:""});let S=JSON.parse(JSON.stringify(e));function r(){return k(this,null,function*(){let{data:o}=yield ne({signs:l.value,medicineType:e.medicineType});Object.assign(e,S,o,{medicineType:e.medicineType,signs:l.value})})}function d(){return k(this,null,function*(){try{let o=Object.assign({},e),{msg:u,data:g=""}=yield ae(o);e.id=g,x(u,"success","hey")}catch(o){x(o,"error","hey")}})}function f(o){r()}function I(o){(!e[o.key]||e[o.key]==="0")&&(e[o.numStr]=null,e[o.num1Str1]=null)}function O(o){Object.assign(e,S),e.signs=o,e.medicineType="1",r()}return K(()=>{r()}),(o,u)=>{const g=i("el-tab-pane"),B=i("el-tabs"),q=i("el-radio"),$=i("el-radio-group"),U=X,j=i("el-checkbox"),C=i("el-input-number"),J=i("el-switch"),w=i("el-form-item"),P=i("el-button"),R=i("el-form"),z=i("el-card");return m(),h("div",te,[t(B,{class:"rule-tabs",modelValue:n(l),"onUpdate:modelValue":u[0]||(u[0]=a=>Q(l)?l.value=a:null),type:"card",onTabChange:O},{default:c(()=>[t(g,{label:"单次量",name:"1"}),t(g,{label:"单日量",name:"2"}),t(g,{label:"频次",name:"3"}),t(g,{label:"基本剂量",name:"4"})]),_:1},8,["modelValue"]),t(z,{class:"no-bottom-card dosage-management-container auto-height-container flex-column",style:{"margin-top":"8px"}},{header:c(()=>[s("div",oe,[s("div",se,M(n(l)=="4"?"基本剂量":n(l)=="3"?"频次":n(l)=="2"?"单日量":n(l)=="1"?"单次量":""),1)])]),default:c(()=>[s("div",null,[t(R,null,{default:c(()=>[t(w,null,{label:c(()=>[le]),default:c(()=>[s("div",ie,[s("div",ce,[t($,{modelValue:n(e).medicineType,"onUpdate:modelValue":u[1]||(u[1]=a=>n(e).medicineType=a),onChange:f},{default:c(()=>[(m(!0),h(T,null,F(n(p).wordbook.drug_class_flag,a=>(m(),H(q,{key:a.dictValue,value:a.dictValue,label:a.dictLabel},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),s("span",de,[t(U,{icon:"icon-xintishi"}),V(" 提示：切换药品类型，请先保存用量规则 ")])]),n(l)!="3"?(m(),h("div",ue,[(m(!0),h(T,null,F(n(y),(a,N)=>(m(),h("div",{key:N,class:W(N+1==n(y).length?"":"level-col")},[t(j,{modelValue:n(e)[a.key],"onUpdate:modelValue":b=>n(e)[a.key]=b,"true-value":"1","false-value":"0",class:"w-80",onChange:b=>I(a)},{default:c(()=>[V(M(a.title),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),re,t(C,{"controls-position":"right",modelValue:n(e)[a.numStr],"onUpdate:modelValue":b=>n(e)[a.numStr]=b,"data-unit":"%",min:0,disabled:n(e)[a.key]!="1",max:99},null,8,["modelValue","onUpdate:modelValue","disabled"]),me,_e,t(C,{"controls-position":"right",modelValue:n(e)[a.num1Str1],"onUpdate:modelValue":b=>n(e)[a.num1Str1]=b,"data-unit":"%",min:100,disabled:n(e)[a.key]!="1"},null,8,["modelValue","onUpdate:modelValue","disabled"])],2))),128))])):(m(),H(w,{key:1,style:{"margin-top":"8px"}},{label:c(()=>[pe]),default:c(()=>[s("div",ge,[t(J,{modelValue:n(e).frequencySwitch,"onUpdate:modelValue":u[2]||(u[2]=a=>n(e).frequencySwitch=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),s("span",be,[t(U,{icon:"icon-xintishi"}),V(" 提示：低于最小值时，不进行合理用药提示 ")])])]),_:1})),t(P,{type:"primary",onClick:d,style:{"margin-top":"26px"}},{default:c(()=>[V("保存")]),_:1})])]),_:1})]),_:1})])]),_:1})])}}}),xe=ee(ye,[["__scopeId","data-v-2af5512b"]]);export{xe as default};
