var k=(w,F,I)=>new Promise((V,z)=>{var h=r=>{try{u(I.next(r))}catch(L){z(L)}},b=r=>{try{u(I.throw(r))}catch(L){z(L)}},u=r=>r.done?V(r.value):Promise.resolve(r.value).then(h,b);u((I=I.apply(w,F)).next())});import{d as ne,r as c,P as ie,b as R,m as f,T as ue,o,c as _,y as d,s,x as N,p as l,t as re,q as p,n as v,F as g,A as C,z as O,ap as ce,B as T,a6 as pe,ag as ve,ah as me,I as fe,J as _e,_ as be}from"./index-BN8uVNSO.js";import{w as ye,x as ge,v as he}from"./indication-DXEs9VIY.js";const B=w=>(fe("data-v-79f67305"),w=w(),_e(),w),Ce={class:"edit-cf-edit-container"},we=B(()=>v("span",{style:{color:"red"}},"*",-1)),Ie=B(()=>v("span",null,"适应证名称",-1)),xe={class:"flex"},Ve={class:"custom-select-option-item flex flex-flow"},Le={style:{display:"flex","justify-content":"space-between"}},Se={class:"radio-bg"},ke=B(()=>v("div",{class:"form-tip-title"},"Micromedex推荐",-1)),ze={class:"flex justify-between align-start"},Ne=ne({__name:"editIndicationDiag",emits:["query"],setup(w,{expose:F,emit:I}){const V=c(),z=ie("$baseMessage"),h=c(!1),b=c(!1),u=c("新增适应证"),r=c([]),L=I,i=R({keyword:"",pageNum:1,pageSize:100,total:0}),$={icdCodeList:[{required:!0,message:"请选择适应证",trigger:"change"}]},P=c([{label:"全部",value:0},{label:"西医",value:1},{label:"中医",value:2}]),D=c([{label:"是",value:"1"},{label:"否",value:"0"}]),E=c([{label:"Class I",value:"0"},{label:"Class IIa",value:"1"},{label:"Class IIb",value:"2"},{label:"Class III",value:"3"}]),J=c([{label:"Class I",value:"0"},{label:"Class IIa",value:"1"},{label:"Class IIb",value:"2"},{label:"Class III",value:"3"},{label:"Class",value:"4"}]),G=c([{label:"Category A",value:"0"},{label:"Category B",value:"1"},{label:"Category C",value:"2"},{label:"No evidence",value:"3"}]),a=R({generalId:"",icdCodeList:[],reference:"",icdType:0,whetherOverstepSynopsis:"0",active:"0",isApprovalFda:"0",validityLevel:"",recommendLevel:"",evidenceStrength:"",tipContent:"",bs:"1"}),A=c(null),H=n=>{i.pageNum=1,x(n)},x=n=>k(this,null,function*(){a.generalId!=""&&(i.keyword=n,clearTimeout(A.value),A.value=setTimeout(()=>k(this,null,function*(){let t=yield ye({keyword:n,icdType:a.icdType?a.icdType:"",type:1,pageNum:i.pageNum,pageSize:i.pageSize,generalId:a.generalId,bs:"1"});if(t.resultCode!=1){r.value=[];return}r.value=t.data.records||[],i.total=t.data.total}),500))}),K=()=>{i.pageNum=1,x("")},Q=n=>{i.pageNum=1,i.pageSize=n,x(i.keyword)},W=n=>{i.pageNum=n,x(i.keyword)},X=n=>{a.icdCodeList=[],x("")},Y=(n,t,m)=>{a.generalId=m,h.value=!0,t=="edit"?(u.value="编辑适应证",Object.assign(a,n,{icdCodeList:[n.icdCode]}),x(n.icdName)):u.value="新增适应证"},U=()=>{b.value=!1,h.value=!1,Object.assign(a,{generalId:"",icdCodeList:[],reference:"",icdType:0,whetherOverstepSynopsis:"0",active:"0",isApprovalFda:"0",validityLevel:"",recommendLevel:"",evidenceStrength:"",tipContent:"",bs:"1"})},Z=()=>k(this,null,function*(){V.value.validate(n=>k(this,null,function*(){if(n){b.value=!0;try{let t=Object.assign({},a,{icdType:""});const m=u.value=="新增适应证"?yield ge(t):yield he(t);b.value=!1,V.value.resetFields(),z(m.msg,"success","hey"),U(),L("query")}catch(t){b.value=!1}}}))});return F({showDiag:Y}),(n,t)=>{const m=f("el-option"),S=f("el-select"),ee=ve,y=f("el-form-item"),j=f("el-radio"),q=f("el-radio-group"),le=f("el-divider"),ae=f("el-input"),te=f("el-form"),M=f("el-button"),se=me,oe=ue("loading");return o(),_("div",Ce,[d(se,{modelValue:l(h),"onUpdate:modelValue":t[8]||(t[8]=e=>pe(h)?h.value=e:null),title:l(u),width:"900px",modal:!1,"append-to-body":"",onClose:U,class:"no-form-line-margin pointerEvents"},{footer:s(()=>[d(M,{onClick:U},{default:s(()=>[N("取 消")]),_:1}),d(M,{disabled:l(b),type:"primary",onClick:Z},{default:s(()=>[N("确 定")]),_:1},8,["disabled"])]),default:s(()=>[re((o(),p(te,{ref_key:"formRef",ref:V,model:l(a),"label-width":"120px",rules:$},{default:s(()=>[d(y,null,{label:s(()=>[we,Ie]),default:s(()=>[v("div",xe,[l(u)=="新增适应证"?(o(),p(S,{key:0,modelValue:l(a).icdType,"onUpdate:modelValue":t[0]||(t[0]=e=>l(a).icdType=e),placeholder:"请选择",size:"large",style:{width:"140px"},onChange:X,class:"icdCodeList-select-input-icdType"},{default:s(()=>[(o(!0),_(g,null,C(l(P),e=>(o(),p(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):O("",!0),d(y,{"label-width":"0",prop:"icdCodeList"},{default:s(()=>[d(S,{modelValue:l(a).icdCodeList,"onUpdate:modelValue":t[1]||(t[1]=e=>l(a).icdCodeList=e),size:"large",placeholder:"请输入关键字",multiple:"",filterable:"",clearable:"",remote:"","remote-method":H,disabled:l(u)!="新增适应证",style:ce(l(u)=="新增适应证"?"width:calc(900px - 120px - 32px - 140px - 8px);margin-left:8px;":"width:calc(900px - 120px - 32px)"),class:"icdCodeList-select-input-custom mul-select","popper-class":"icdCodeList-container-custom1",onFocus:K},{default:s(()=>[v("div",Ve,[(o(!0),_(g,null,C(l(r),e=>(o(),p(m,{key:e.syIcdCode,label:e.syIcdName,value:e.syIcdCode,disabled:e.enable==0},{default:s(()=>[v("div",Le,[v("span",null,T(e.syIcdName),1),v("span",null,T(e.syIcdCode),1)])]),_:2},1032,["label","value","disabled"]))),128))])]),footer:s(()=>[d(ee,{small:"","pager-count":5,"current-page":l(i).pageNum,"page-size":l(i).pageSize,total:l(i).total,onCurrentChange:W,onSizeChange:Q,teleported:!1},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue","disabled","style"])]),_:1})])]),_:1}),d(y,{label:"是否超说明书用药"},{default:s(()=>[v("div",Se,[d(q,{modelValue:l(a).whetherOverstepSynopsis,"onUpdate:modelValue":t[2]||(t[2]=e=>l(a).whetherOverstepSynopsis=e)},{default:s(()=>[(o(!0),_(g,null,C(l(D),(e,de)=>(o(),p(j,{key:e.value,value:e.value,label:e.label},{default:s(()=>[N(T(e.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1}),l(a).whetherOverstepSynopsis=="1"?(o(),p(y,{key:0,label:"美国FDA是否批准"},{default:s(()=>[d(q,{modelValue:l(a).isApprovalFda,"onUpdate:modelValue":t[3]||(t[3]=e=>l(a).isApprovalFda=e)},{default:s(()=>[(o(!0),_(g,null,C(l(D),(e,de)=>(o(),p(j,{key:e.value,value:e.value,label:e.label},{default:s(()=>[N(T(e.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})):O("",!0),d(le,{"border-style":"dashed"}),l(a).whetherOverstepSynopsis=="1"?(o(),_(g,{key:1},[ke,v("div",ze,[d(y,{label:"有效性等级"},{default:s(()=>[d(S,{modelValue:l(a).validityLevel,"onUpdate:modelValue":t[4]||(t[4]=e=>l(a).validityLevel=e),size:"large",placeholder:"请选择",style:{width:"140px"}},{default:s(()=>[(o(!0),_(g,null,C(l(E),e=>(o(),p(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(y,{label:"推荐等级","label-width":"90px"},{default:s(()=>[d(S,{modelValue:l(a).recommendLevel,"onUpdate:modelValue":t[5]||(t[5]=e=>l(a).recommendLevel=e),size:"large",placeholder:"请选择",style:{width:"140px"}},{default:s(()=>[(o(!0),_(g,null,C(l(J),e=>(o(),p(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(y,{label:"证据强度","label-width":"90px"},{default:s(()=>[d(S,{modelValue:l(a).evidenceStrength,"onUpdate:modelValue":t[6]||(t[6]=e=>l(a).evidenceStrength=e),size:"large",placeholder:"请选择",style:{width:"140px"}},{default:s(()=>[(o(!0),_(g,null,C(l(G),e=>(o(),p(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])],64)):O("",!0),d(y,{label:"参考文献"},{default:s(()=>[d(ae,{modelValue:l(a).reference,"onUpdate:modelValue":t[7]||(t[7]=e=>l(a).reference=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:3,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[oe,l(b)]])]),_:1},8,["modelValue","title"])])}}}),Oe=be(Ne,[["__scopeId","data-v-79f67305"]]);export{Oe as default};
