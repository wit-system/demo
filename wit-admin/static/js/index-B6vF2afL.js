var k=(C,g,c)=>new Promise((u,_)=>{var t=o=>{try{m(c.next(o))}catch(p){_(p)}},y=o=>{try{m(c.throw(o))}catch(p){_(p)}},m=o=>o.done?u(o.value):Promise.resolve(o.value).then(t,y);m((c=c.apply(C,g)).next())});import P from"./RoleDataManagementEdit-C84NN7Kk.js";import W from"./RoleMenuManagementEdit-nOMO4m1n.js";import A from"./RoleManagementEdit-daBixDqG.js";import{d as K,P as N,r as s,b as U,h as G,m as D,o as H,c as J,y as a,p as n,a6 as O,n as $,s as r,x as f,B as X,af as Y,ag as Z}from"./index-1fQ0gozz.js";import{_ as ee}from"./index.vue_vue_type_style_index_0_lang-CmHiYd40.js";import{h as te,i as ae}from"./roleManagement-CXlp7rpj.js";import{C as ne}from"./constants-C9BIlYt-.js";import{g as oe}from"./dict-Cq6Rfk1f.js";import"./ifComponent.vue_vue_type_style_index_0_lang-BOVwK668.js";import"./index-BueAkiiY.js";import"./index.vue_vue_type_script_setup_true_lang-BLW0x7SH.js";const le={class:"role-container auto-height-container"},se={class:"app-content padding-out"},ie={class:"app-pagination"},we=K({name:"RoleManagement",__name:"index",setup(C){const g=N("$baseConfirm"),c=N("$baseMessage"),u=s(!1),_=s(),t=s({pageNum:1,pageSize:20,searchQuick:{keyword:""}}),y=U({searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:x}},{label:"添加",icon:"icon-xinzengdianpingjihua",attrs:{type:"warning"},events:{click:S}}],searchList:[{type:"searchQuick",field:"searchQuick",attrs:{width:180,placeholder:"请输入角色",clearable:!0,isFetch:!0},events:{clear:x}}]}),m=s([]),o=s(0),p=s([{field:"roleId",title:"角色编号",width:"100"},{field:"roleName",title:"角色名称",width:"160"},{field:"roleKey",title:"角色标识",minWidth:"120"},{field:"roleSort",title:"显示顺序",width:"90"},{field:"remark",title:"备注",minWidth:"100"},{field:"status",title:"状态",width:"80",render:!0},{field:"createTime",title:"创建时间",width:"180"},{field:"btns",title:"操作",align:"center",width:"320",fixed:"right",render:!0}]),v=s(null),b=s(null),E=s(null);function S(e={}){e.roleId?v.value.showEdit(e):v.value.showEdit()}const z=(e={})=>{b.value.showEdit(e)},M=(e={})=>{E.value.showEdit(e)},R=(e={})=>{e.roleId&&g("您确定要删除当前项吗",null,()=>k(this,null,function*(){const{msg:i}=yield te([e.roleId]);c(i,"success","hey"),yield d()}))},B=e=>{t.value.pageNum=1,t.value.pageSize=e,d()},L=e=>{t.value.pageNum=e,d()};function x(){_.value.search()}function d(){return k(this,null,function*(){u.value=!0;let e={pageNum:t.value.pageNum,pageSize:t.value.pageSize,roleName:t.value.searchQuick.keyword};const{data:i}=yield ae(e);m.value=i.records,o.value=i.total,u.value=!1})}return G(()=>{d()}),(e,i)=>{const V=ee,Q=D("el-tag"),h=D("el-button"),I=Y,F=Z,T=A,j=W,q=P;return H(),J("div",le,[a(V,{ref_key:"refSearch",ref:_,modelValue:n(t),"onUpdate:modelValue":i[0]||(i[0]=l=>O(t)?t.value=l:null),"search-data":n(y),"search-name":"system-roleManagement",searching:n(u),onSearch:d,isCache:!1},null,8,["modelValue","search-data","searching"]),$("div",se,[a(I,{"table-name":"system-roleManagement",loading:n(u),tableData:n(m),columns:n(p)},{status:r(l=>[a(Q,{type:l.row.status===n(ne).ENABLE?"success":"danger"},{default:r(()=>[f(X(n(oe)("sys_normal_disable",l.row.status)),1)]),_:2},1032,["type"])]),btns:r(l=>[a(h,{text:"",type:"primary",onClick:w=>S(l.row)},{default:r(()=>[f("编辑")]),_:2},1032,["onClick"]),a(h,{text:"",type:"primary",onClick:w=>z(l.row)},{default:r(()=>[f("菜单权限")]),_:2},1032,["onClick"]),a(h,{text:"",type:"primary",onClick:w=>M(l.row)},{default:r(()=>[f("数据权限")]),_:2},1032,["onClick"]),a(h,{text:"",type:"primary",onClick:w=>R(l.row)},{default:r(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","tableData","columns"])]),$("div",ie,[a(F,{"current-page":n(t).pageNum,"page-size":n(t).pageSize,total:n(o),onCurrentChange:L,onSizeChange:B},null,8,["current-page","page-size","total"])]),a(T,{ref_key:"roleEditRef",ref:v,onQuery:d},null,512),a(j,{ref_key:"roleMenuEditRef",ref:b},null,512),a(q,{ref_key:"roleDataEditRef",ref:E},null,512)])}}});export{we as default};
