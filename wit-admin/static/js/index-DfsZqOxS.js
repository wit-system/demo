var F=(u,c,d)=>new Promise((p,f)=>{var b=t=>{try{l(d.next(t))}catch(g){f(g)}},v=t=>{try{l(d.throw(t))}catch(g){f(g)}},l=t=>t.done?p(t.value):Promise.resolve(t.value).then(b,v);l((d=d.apply(u,c)).next())});import{an as R,d as Q,r,b as w,a0 as X,m,o as Y,c as Z,n as N,y as a,s as o,p as e,a6 as L,x as h,B as x,ae as B,af as ee,ag as te,ah as ae,_ as le}from"./index-BN8uVNSO.js";import{_ as oe}from"./index.vue_vue_type_style_index_0_lang-CYTYEVrP.js";import"./ifComponent.vue_vue_type_style_index_0_lang-TMjKtAQ8.js";import"./index-DxSYlWYB.js";import"./index.vue_vue_type_script_setup_true_lang-BkXq5IQh.js";import"./dict-Ck584AJf.js";function ne(u){return R({url:`/system/value/page?pageNum=${u.pageNum}&pageSize=${u.pageSize}`,method:"post",data:u})}function ie(u){return R({url:"/system/value/put",method:"post",data:u})}const de={class:"department-management-container auto-height-container"},se={class:"flex space-between up-center"},ue={class:"flex-all padding-horizontal"},re=Q({__name:"index",setup(u){const c=r(!1),d=r(!1),p=r(null),f=r(0),b=r([]),v=r([{field:"hosDrugCode",title:"药品编码",minWidth:"120"},{field:"hosDrugName",title:"名称",minWidth:"120"},{field:"generalCode",title:"通用名称",minWidth:"120"},{field:"hosSpec",title:"规格",width:"100"},{field:"hosPackingUom",title:"单位",width:"60"},{field:"dddUnit",title:"剂量单位",minWidth:"120"},{field:"ddd",title:"默认DDD",minWidth:"120"},{field:"dddValue",title:"自定义DDD",minWidth:"120"},{field:"btns",title:"操作",align:"center",width:"80",fixed:"right",render:!0}]),l=r({pageNum:1,pageSize:20,value:"",drugType:1,isCft:""}),t=w({hosDrugCode:"",hosDrugName:"",generalCode:"",hosHospCode:"",admCode:"",dddValue:null,dddUnit:"",delFlag:0}),g=w({searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:W}}],searchList:[{type:"radio-group",field:"isCft",label:"状态：",valueField:"institutionCode",labelField:"institutionName",options:[{institutionName:"全部",institutionCode:""},{institutionName:"未匹配",institutionCode:"0"},{institutionName:"已匹配",institutionCode:"1"}],events:{}},{type:"input",field:"value",label:"关键字",isOutBorder:!0,attrs:{placeholder:"请输入",width:130,clearable:!0},events:{}}],otherSearchList:[]}),$=w({dddValue:[{required:!0,trigger:"blur",type:"number",message:"请输入DDD值"}]}),S=r(null);function W(){S.value.search()}const C=()=>{l.value.pageNum=1,D()};X(()=>{C()});function D(){c.value=!0,ne(l.value).then(s=>{c.value=!1,s.resultCode==1&&(b.value=s.data.records||[],f.value=s.data.total||0)})}function U(s){l.value.pageNum=s,D()}function T(s){l.value.pageSize=s,D()}function j(s){Object.assign(t,s),d.value=!0}function q(){C()}function I(){d.value=!1,V()}function O(){p.value.validate(s=>F(this,null,function*(){if(s){if((yield ie(t)).resultCode!=1){B.error("操作失败！！");return}B.success("操作成功！！"),d.value=!1,U(l.value.pageNum),p.value.resetFields(),V()}}))}function V(){Object.assign(t,{hosDrugCode:"",hosDrugName:"",generalCode:"",hosHospCode:"",admCode:"",dddValue:null,dddUnit:"",delFlag:0}),d.value=!1}return(s,n)=>{const P=m("el-radio-button"),k=m("el-radio-group"),E=oe,y=m("el-button"),H=ee,M=te,_=m("el-form-item"),A=m("el-input-number"),G=m("el-input"),z=m("el-radio"),J=m("el-form"),K=ae;return Y(),Z("div",de,[N("div",se,[a(k,{modelValue:e(l).drugType,"onUpdate:modelValue":n[0]||(n[0]=i=>e(l).drugType=i),style:{"margin-left":"8px"},onInput:q},{default:o(()=>[a(P,{label:"抗菌药",value:1})]),_:1},8,["modelValue"]),a(E,{ref_key:"witSearchRef",ref:S,modelValue:e(l),"onUpdate:modelValue":n[1]||(n[1]=i=>L(l)?l.value=i:null),"search-data":e(g),"search-name":"matching-tools-ddd-search",searching:e(c),border:!1,showResult:!1,onSearch:C,isCache:!1},null,8,["modelValue","search-data","searching"])]),N("div",ue,[a(H,{ref:"tableRef","table-name":"matching-tools-ddd-table",loading:e(c),"table-data":e(b),columns:e(v)},{btns:o(i=>[a(y,{text:"",type:"primary",onClick:me=>j(i.row)},{default:o(()=>[h("编辑")]),_:2},1032,["onClick"])]),_:1},8,["loading","table-data","columns"])]),a(M,{style:{"justify-content":"right"},"current-page":e(l).pageNum,"page-size":e(l).pageSize,total:e(f),onCurrentChange:U,onSizeChange:T},null,8,["current-page","page-size","total"]),a(K,{modelValue:e(d),"onUpdate:modelValue":n[5]||(n[5]=i=>L(d)?d.value=i:null),"append-to-body":"",title:"编辑DDD",width:"720px","before-close":V},{footer:o(()=>[a(y,{onClick:I},{default:o(()=>[h("取 消")]),_:1}),a(y,{type:"primary",onClick:O},{default:o(()=>[h("确 定")]),_:1})]),default:o(()=>[a(J,{ref_key:"formRef",ref:p,"label-width":"120px",model:e(t),rules:e($),class:"edit-ddd-dialog"},{default:o(()=>[a(_,{label:"药品编码:"},{default:o(()=>[N("div",null,x(e(t).hosDrugCode),1)]),_:1}),a(_,{label:"药品名称:"},{default:o(()=>[h(x(e(t).hosDrugName),1)]),_:1}),a(_,{label:"通用名称:"},{default:o(()=>[h(x(e(t).generalCode),1)]),_:1}),a(_,{label:"DDD值:",prop:"dddValue"},{default:o(()=>[a(A,{modelValue:e(t).dddValue,"onUpdate:modelValue":n[2]||(n[2]=i=>e(t).dddValue=i),"controls-position":"right",min:0},null,8,["modelValue"]),a(G,{modelValue:e(t).dddUnit,"onUpdate:modelValue":n[3]||(n[3]=i=>e(t).dddUnit=i),placeholder:"单位",style:{width:"80px","margin-left":"4px"}},null,8,["modelValue"])]),_:1}),a(_,{label:"有效性:"},{default:o(()=>[a(k,{modelValue:e(t).delFlag,"onUpdate:modelValue":n[4]||(n[4]=i=>e(t).delFlag=i)},{default:o(()=>[a(z,{label:"有效",value:0}),a(z,{label:"无效",value:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ve=le(re,[["__scopeId","data-v-d0f9aba2"]]);export{ve as default};
