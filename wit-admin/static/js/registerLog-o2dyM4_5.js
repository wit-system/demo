var v=(w,_,i)=>new Promise((d,n)=>{var m=t=>{try{l(i.next(t))}catch(c){n(c)}},a=t=>{try{l(i.throw(t))}catch(c){n(c)}},l=t=>t.done?d(t.value):Promise.resolve(t.value).then(m,a);l((i=i.apply(w,_)).next())});import{d as T,P as C,b as D,r as p,h as Y,m as f,T as x,o as S,c as F,y as s,n as g,t as b,q as P,s as y,v as N,ag as j}from"./index-BN8uVNSO.js";import{_ as q}from"./index.vue_vue_type_style_index_0_lang-CYTYEVrP.js";import{u as I,a as E}from"./systemLog-AOJWhkKt.js";import"./ifComponent.vue_vue_type_style_index_0_lang-TMjKtAQ8.js";import"./index-DxSYlWYB.js";import"./index.vue_vue_type_script_setup_true_lang-BkXq5IQh.js";import"./dict-Ck584AJf.js";const R={class:"system-registerLog-container auto-height-container"},U={class:"app-content padding-out"},A={style:{color:"rgb(124, 224, 124)"}},G={style:{color:"red"}},H={class:"app-pagination"},ae=T({name:"RegisterLog",__name:"registerLog",setup(w){const _=C("$baseConfirm"),i=C("$baseMessage");D({postCode:"",postName:"",postSort:"",remark:""});const d=p([]),n=p(!0),m=p(0),a=p({userName:"",account:"",searchDate:[],pageNum:1,pageSize:20}),l=D({searchList:[{type:"input",field:"userName",label:"用户账号",isOutBorder:!0,attrs:{width:180,placeholder:"请输入用户账号",clearable:!0},events:{}},{type:"select",field:"status",label:"操作状态",isOutBorder:!0,valueField:"institutionCode",labelField:"institutionName",options:[{institutionCode:"0",institutionName:"正常"},{institutionCode:"1",institutionName:"异常"}],attrs:{width:180,clearable:!0},events:{}},{type:"date-picker",field:"searchDate",label:"访问时间",isOutBorder:!0,attrs:{width:240,placeholder:"请选择",clearable:!0,format:"YYYY-MM-DD",type:"daterange"},events:{}}],searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:c}},{label:"清空日志",isShowLoading:!0,attrs:{type:"primary"},events:{click:B}}]}),t=p();function c(){t.value.search()}const L=e=>{a.value.pageSize=e,u()},k=e=>{a.value.pageNum=e,u()};function B(e={}){_("您确定要清空日志吗",null,()=>v(this,null,function*(){const{msg:o}=yield I();i(o,"success","hey"),yield u()}))}const u=()=>v(this,null,function*(){n.value=!1;const e=Object.assign({},a.value);e.searchDate&&e.searchDate.length>0&&(e.beginTime=e.searchDate[0],e.endTime=e.searchDate[1]),delete e.searchDate;const{data:o}=yield E(e);d.value=o.records,m.value=o.total,n.value=!1});return Y(()=>{u()}),(e,o)=>{const z=q,r=f("el-table-column"),$=f("el-empty"),M=f("el-table"),V=j,O=x("loading");return S(),F("div",R,[s(z,{ref_key:"refSearch",ref:t,modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=h=>a.value=h),"search-data":l,"search-name":"system-registerLog",searching:n.value,onSearch:u},null,8,["modelValue","search-data","searching"]),g("div",U,[b((S(),P(M,{data:d.value},{empty:y(()=>[s($,{class:"wit-data-empty",description:"暂无数据"})]),default:y(()=>[s(r,{align:"center",label:"访问编号",prop:"infoId",width:"100"}),s(r,{align:"center",label:"用户名称","min-width":"120",prop:"userName"}),s(r,{align:"center",label:"登录IP地址","min-width":"120",prop:"ipaddr"}),s(r,{align:"center",label:"操作状态","min-width":"120",prop:"status"},{default:y(({row:h})=>[b(g("span",A,"成功",512),[[N,h.status==0]]),b(g("span",G,"失败",512),[[N,h.status==1]])]),_:1}),s(r,{align:"center",label:"提示信息","min-width":"120",prop:"msg"}),s(r,{align:"center",label:"登录日期","min-width":"120",prop:"accessTime"})]),_:1},8,["data"])),[[O,n.value]])]),g("div",H,[s(V,{"current-page":a.value.pageNum,"page-size":a.value.pageSize,total:m.value,onCurrentChange:k,onSizeChange:L},null,8,["current-page","page-size","total"])])])}}});export{ae as default};
