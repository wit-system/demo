var k=(T,S,y)=>new Promise((x,m)=>{var c=u=>{try{p(y.next(u))}catch(f){m(f)}},V=u=>{try{p(y.throw(u))}catch(f){m(f)}},p=u=>u.done?x(u.value):Promise.resolve(u.value).then(c,V);p((y=y.apply(T,S)).next())});import{d as W,P as X,r as i,aj as Y,b as Z,m as v,T as ee,o as s,c as b,y as r,s as o,x as L,p as l,t as le,q as n,n as O,F as C,A as w,B as D,z as te,a6 as ae,ah as oe,_ as se}from"./index-1fQ0gozz.js";import{o as re,p as ne}from"./indication-BrfvaLV3.js";const ue={class:"edit-cf-edit-container"},de={class:"radio-bg"},ie={class:"radio-bg"},me={class:"radio-bg"},ce=W({__name:"editAdministrationRouteDiag",emits:["query"],setup(T,{expose:S,emit:y}){const x=X("$baseMessage"),m=i(!1),c=i(!1),V=i("新增给药途径"),p=i([]),u=y,f=i(),B=Y(),$={routeCode:[{required:!0,message:"请选择给药途径",trigger:"change"}],routeCodeList:[{required:!0,message:"请选择给药途径",trigger:"change"}]},E=i([{label:"适用",value:"0"},{label:"禁用",value:"1"}]),G=i([{label:"是",value:"1"},{label:"否",value:"0"}]),a=Z({id:"",routeCodeList:[],questionLevel:"0",routeCode:"",whetherOverstepSynopsis:"0",generalId:"",reference:"",active:"0",severity:"0",tipContent:"",warnSign:"0"}),M=(d,t,_)=>{a.generalId=_,m.value=!0,t=="edit"?(V.value="编辑给药途径",Object.assign(a,d,{routeCodeList:[d.routeCode]}),j(d.routeName)):V.value="新增给药途径"},q=()=>{c.value=!1,m.value=!1,Object.assign(a,{id:"",routeCodeList:[],questionLevel:"0",routeCode:"",whetherOverstepSynopsis:"0",generalId:"",reference:"",active:"0",severity:"",tipContent:"",warnSign:"0"}),h.value=!1},K=()=>{f.value.validate(d=>k(this,null,function*(){if(d){c.value=!0;try{let t=Object.assign({},a,{warnSign:a.questionLevel=="0"?"":a.warnSign});const _=yield re(t);c.value=!1,f.value.resetFields(),x(_.msg,"success","hey"),q(),u("query")}catch(t){c.value=!1}}}))},I=i(null),h=i(!1);function j(d){return k(this,null,function*(){if(h.value){h.value=!1;return}clearTimeout(I.value),I.value=setTimeout(()=>k(this,null,function*(){let t=yield ne({keyword:d,pageSize:100,pageNum:1});if(t.resultCode!=1){p.value=[];return}p.value=t.data.records}),500)})}const P=d=>{h.value=!0};return S({showDiag:M}),(d,t)=>{const _=v("el-radio"),U=v("el-radio-group"),g=v("el-form-item"),N=v("el-option"),z=v("el-select"),R=v("el-input"),H=v("el-form"),F=v("el-button"),J=oe,Q=ee("loading");return s(),b("div",ue,[r(J,{modelValue:l(m),"onUpdate:modelValue":t[8]||(t[8]=e=>ae(m)?m.value=e:null),title:l(V),width:"826px",modal:!1,"append-to-body":"",onClose:q,class:"no-form-line-margin pointerEvents"},{footer:o(()=>[r(F,{onClick:q},{default:o(()=>[L("取 消")]),_:1}),r(F,{disabled:l(c),type:"primary",onClick:K},{default:o(()=>[L("确 定")]),_:1},8,["disabled"])]),default:o(()=>[le((s(),n(H,{ref_key:"formRef",ref:f,model:l(a),"label-width":"120px",rules:$},{default:o(()=>[r(g,{label:"问题类型"},{default:o(()=>[O("div",de,[r(U,{modelValue:l(a).questionLevel,"onUpdate:modelValue":t[0]||(t[0]=e=>l(a).questionLevel=e)},{default:o(()=>[(s(!0),b(C,null,w(l(E),(e,A)=>(s(),n(_,{key:e.value,value:e.value},{default:o(()=>[L(D(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),r(g,{label:"给药途径名称",prop:"routeCodeList"},{default:o(()=>[l(V)=="新增给药途径"?(s(),n(z,{key:0,class:"syz-select",modelValue:l(a).routeCodeList,"onUpdate:modelValue":t[1]||(t[1]=e=>l(a).routeCodeList=e),size:"large",placeholder:"请输入关键字",filterable:"",multiple:"",clearable:"",remote:"","remote-method":j,"collapse-tags":"","max-collapse-tags":2,"reserve-keyword":l(h),onChange:P},{default:o(()=>[(s(!0),b(C,null,w(l(p),e=>(s(),n(N,{key:e.routeCode,label:e.routeName,value:e.routeCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue","reserve-keyword"])):(s(),n(z,{key:1,disabled:"",class:"syz-select",modelValue:l(a).routeCode,"onUpdate:modelValue":t[2]||(t[2]=e=>l(a).routeCode=e),size:"large",placeholder:"请输入关键字",filterable:"",remote:"","remote-method":j,"collapse-tags":""},{default:o(()=>[(s(!0),b(C,null,w(l(p),e=>(s(),n(N,{key:e.routeCode,label:e.routeName,value:e.routeCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1}),r(g,{label:"是否超说明书用药"},{default:o(()=>[O("div",ie,[r(U,{modelValue:l(a).whetherOverstepSynopsis,"onUpdate:modelValue":t[3]||(t[3]=e=>l(a).whetherOverstepSynopsis=e)},{default:o(()=>[(s(!0),b(C,null,w(l(G),(e,A)=>(s(),n(_,{key:e.value,value:e.value},{default:o(()=>[L(D(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),l(a).questionLevel=="1"?(s(),n(g,{key:0,label:"禁慎用标识"},{default:o(()=>[O("div",me,[r(U,{modelValue:l(a).warnSign,"onUpdate:modelValue":t[4]||(t[4]=e=>l(a).warnSign=e)},{default:o(()=>[(s(!0),b(C,null,w(l(B).wordbook.caution_signs,(e,A)=>(s(),n(_,{key:e.dictValue,label:e.dictValue,value:e.dictValue},{default:o(()=>[L(D(e.dictLabel),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1})):te("",!0),r(g,{label:"问题等级"},{default:o(()=>[r(z,{modelValue:l(a).severity,"onUpdate:modelValue":t[5]||(t[5]=e=>l(a).severity=e),size:"large",placeholder:"请选择"},{default:o(()=>[(s(!0),b(C,null,w(l(B).wordbook.problem_level_rule,e=>(s(),n(N,{key:e.dictLabel,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(g,{label:"参考文献"},{default:o(()=>[r(R,{modelValue:l(a).reference,"onUpdate:modelValue":t[6]||(t[6]=e=>l(a).reference=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:3,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),r(g,{label:"提示内容"},{default:o(()=>[r(R,{modelValue:l(a).tipContent,"onUpdate:modelValue":t[7]||(t[7]=e=>l(a).tipContent=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:4,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[Q,l(c)]])]),_:1},8,["modelValue","title"])])}}}),_e=se(ce,[["__scopeId","data-v-d6d0e2f4"]]);export{_e as default};
