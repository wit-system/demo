var L=(w,N,V)=>new Promise((U,m)=>{var v=c=>{try{g(V.next(c))}catch(y){m(y)}},u=c=>{try{g(V.throw(c))}catch(y){m(y)}},g=c=>c.done?U(c.value):Promise.resolve(c.value).then(v,u);g((V=V.apply(w,N)).next())});import{d as te,P as oe,r,b as P,aj as se,m as f,T as ne,o as d,c as I,y as s,s as o,x as T,p as l,t as de,q as C,n as _,F as S,A as k,z as ie,ap as re,B as z,a6 as ue,ag as ce,ah as pe,I as me,J as ve,_ as fe}from"./index-1fQ0gozz.js";import{w as _e,x as ge,v as ye}from"./indication-BrfvaLV3.js";const E=w=>(me("data-v-de4052eb"),w=w(),ve(),w),be={class:"edit-cf-edit-container"},he=E(()=>_("span",{style:{color:"red"}},"*",-1)),Ce=E(()=>_("span",null,"禁忌证名称",-1)),we={class:"flex"},Ve={style:{display:"flex","justify-content":"space-between"}},Ie={class:"radio-bg"},xe={class:"radio-bg"},Se=te({__name:"editContraindicationDiag",emits:["query"],setup(w,{expose:N,emit:V}){const U=oe("$baseMessage"),m=r(!1),v=r(!1),u=r("新增禁忌证"),g=r([]),c=V,y=r(),i=P({keyword:"",pageNum:1,pageSize:100,total:0}),O=se(),M={icdCodeList:[{required:!0,message:"请选择禁忌证",trigger:"change"}]},A=r([{label:"全部",value:0},{label:"西医",value:1},{label:"中医",value:2}]),J=r([{label:"是",value:"1"},{label:"否",value:"0"}]);r([{label:"Class I",value:"0"},{label:"Class IIa",value:"1"},{label:"Class IIb",value:"2"},{label:"Class III",value:"3"}]);const t=P({generalId:"",icdCodeList:[],reference:"",icdType:0,whetherOverstepSynopsis:"0",active:"0",tipContent:"",bs:"2",severity:"0",warnSign:"0"}),j=r(null),p=r(!1),x=n=>L(this,null,function*(){if(t.generalId!=""){if(p.value){i.keyword=n,p.value=!1;return}clearTimeout(j.value),j.value=setTimeout(()=>L(this,null,function*(){let a=yield _e({keyword:n,icdType:t.icdType?t.icdType:"",type:1,pageNum:i.pageNum,pageSize:i.pageSize,generalId:t.generalId,bs:"2"});if(a.resultCode!=1){g.value=[];return}g.value=a.data.records||[],i.total=a.data.total}),500)}}),K=n=>{p.value=!0},G=n=>{t.icdCodeList=[],p.value=!1,p.value=!1,x("")},H=(n,a,b)=>{t.generalId=b,m.value=!0,a=="edit"?(u.value="编辑禁忌证",Object.assign(t,n,{icdCodeList:[n.icdCode]}),x(n.icdName)):u.value="新增禁忌证"},B=()=>{v.value=!1,m.value=!1,p.value=!1,Object.assign(t,{generalId:"",icdCodeList:[],reference:"",icdType:0,whetherOverstepSynopsis:"0",active:"0",tipContent:"",bs:"2",severity:"0",warnSign:"0"})},Q=n=>{i.pageNum=1,i.pageSize=n,p.value=!1,x(i.keyword)},W=n=>{i.pageNum=n,p.value=!1,x(i.keyword)},X=()=>{y.value.validate(n=>L(this,null,function*(){if(n){v.value=!0;try{let a=Object.assign({},t,{icdType:""});const b=u.value=="新增禁忌证"?yield ge(a):yield ye(a);v.value=!1,y.value.resetFields(),U(b.msg,"success","hey"),B(),c("query")}catch(a){v.value=!1}}}))};return N({showDiag:H}),(n,a)=>{const b=f("el-option"),D=f("el-select"),Y=ce,h=f("el-form-item"),F=f("el-radio"),q=f("el-radio-group"),R=f("el-input"),Z=f("el-form"),$=f("el-button"),ee=pe,le=ne("loading");return d(),I("div",be,[s(ee,{modelValue:l(m),"onUpdate:modelValue":a[7]||(a[7]=e=>ue(m)?m.value=e:null),title:l(u),width:"900px",modal:!1,"append-to-body":"",onClose:B,class:"no-form-line-margin pointerEvents"},{footer:o(()=>[s($,{onClick:B},{default:o(()=>[T("取 消")]),_:1}),s($,{disabled:l(v),type:"primary",onClick:X},{default:o(()=>[T("确 定")]),_:1},8,["disabled"])]),default:o(()=>[de((d(),C(Z,{ref_key:"formRef",ref:y,model:l(t),"label-width":"120px",rules:M},{default:o(()=>[s(h,null,{label:o(()=>[he,Ce]),default:o(()=>[_("div",we,[l(u)=="新增禁忌证"?(d(),C(D,{key:0,modelValue:l(t).icdType,"onUpdate:modelValue":a[0]||(a[0]=e=>l(t).icdType=e),placeholder:"请选择",size:"large",style:{width:"140px",height:"100%"},onChange:G,class:"icdCodeList-select-input-icdType"},{default:o(()=>[(d(!0),I(S,null,k(l(A),e=>(d(),C(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):ie("",!0),s(h,{label:"",prop:"icdCodeList"},{default:o(()=>[s(D,{modelValue:l(t).icdCodeList,"onUpdate:modelValue":a[1]||(a[1]=e=>l(t).icdCodeList=e),size:"large",placeholder:"请输入关键字",multiple:"",filterable:"",clearable:"",remote:"","remote-method":x,disabled:l(u)!="新增禁忌证",style:re(l(u)=="新增禁忌证"?"width:calc(900px - 120px - 32px - 140px - 8px);margin-left:8px;":"width:calc(900px - 120px - 32px)"),class:"icdCodeList-select-input-custom","popper-class":"icdCodeList-container-custom1","reserve-keyword":l(p),onChange:K},{footer:o(()=>[s(Y,{small:"","pager-count":5,"current-page":l(i).pageNum,"page-size":l(i).pageSize,total:l(i).total,onCurrentChange:W,onSizeChange:Q,teleported:!1},null,8,["current-page","page-size","total"])]),default:o(()=>[(d(!0),I(S,null,k(l(g),e=>(d(),C(b,{key:e.syIcdCode,label:e.syIcdName,value:e.syIcdCode,disabled:e.enable==0},{default:o(()=>[_("div",Ve,[_("span",null,z(e.syIcdName),1),_("span",null,z(e.syIcdCode),1)])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled","style","reserve-keyword"])]),_:1})])]),_:1}),s(h,{label:"是否超说明书用药"},{default:o(()=>[_("div",Ie,[s(q,{modelValue:l(t).whetherOverstepSynopsis,"onUpdate:modelValue":a[2]||(a[2]=e=>l(t).whetherOverstepSynopsis=e)},{default:o(()=>[(d(!0),I(S,null,k(l(J),(e,ae)=>(d(),C(F,{key:e.value,value:e.value},{default:o(()=>[T(z(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),s(h,{label:"禁慎用标识"},{default:o(()=>[_("div",xe,[s(q,{modelValue:l(t).warnSign,"onUpdate:modelValue":a[3]||(a[3]=e=>l(t).warnSign=e)},{default:o(()=>[(d(!0),I(S,null,k(l(O).wordbook.caution_signs,(e,ae)=>(d(),C(F,{key:e.dictValue,label:e.dictValue,value:e.dictValue},{default:o(()=>[T(z(e.dictLabel),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),s(h,{label:"问题等级"},{default:o(()=>[s(D,{modelValue:l(t).severity,"onUpdate:modelValue":a[4]||(a[4]=e=>l(t).severity=e),size:"large",placeholder:"请选择"},{default:o(()=>[(d(!0),I(S,null,k(l(O).wordbook.problem_level_rule,e=>(d(),C(b,{key:e.dictLabel,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(h,{label:"参考文献"},{default:o(()=>[s(R,{modelValue:l(t).reference,"onUpdate:modelValue":a[5]||(a[5]=e=>l(t).reference=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:3,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(h,{label:"提示内容"},{default:o(()=>[s(R,{modelValue:l(t).tipContent,"onUpdate:modelValue":a[6]||(a[6]=e=>l(t).tipContent=e),placeholder:"请输入",type:"textarea",style:{width:"100%"},rows:4,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[le,l(v)]])]),_:1},8,["modelValue","title"])])}}}),ze=fe(Se,[["__scopeId","data-v-de4052eb"]]);export{ze as default};
