var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var A=(r,d,i)=>d in r?X(r,d,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[d]=i,O=(r,d)=>{for(var i in d||(d={}))ee.call(d,i)&&A(r,i,d[i]);if(j)for(var i of j(d))le.call(d,i)&&A(r,i,d[i]);return r},B=(r,d)=>Y(r,Z(d));var E=(r,d,i)=>new Promise((V,R)=>{var M=f=>{try{_(i.next(f))}catch(h){R(h)}},N=f=>{try{_(i.throw(f))}catch(h){R(h)}},_=f=>f.done?V(f.value):Promise.resolve(f.value).then(M,N);_((i=i.apply(r,d)).next())});import{d as ne,aj as oe,P as ae,r as I,b as J,m as y,o as u,q as T,s as p,y as n,x as L,p as a,n as t,c,F as U,A as F,a6 as te,H as se,ah as re,I as ie,J as ue,_ as de}from"./index-C3-31E46.js";import{a as pe}from"./vertifyAuditRule-DywA9BSa.js";const s=r=>(ie("data-v-5823de33"),r=r(),ue(),r),ce={class:"radio-bg"},me={class:"cycle-item flex up-center"},_e=s(()=>t("span",{class:"label"},"天内",-1)),fe={class:"common-attention"},ge={class:"range-setting flex"},be={class:"radio-box"},ye={key:0,class:"range-item flex up-center"},Ve=s(()=>t("span",null,"当检验值",-1)),ve=s(()=>t("span",null,"时，则通过，可开此药。",-1)),he={key:1,class:"range-item flex up-center"},xe=s(()=>t("span",null,"当检验值",-1)),Re=s(()=>t("span",null,"时，则通过，可开此药。",-1)),Ce={key:2,class:"range-item flex up-center"},ke=s(()=>t("span",null,"当检验值处于",-1)),Ue=s(()=>t("span",{class:"split"},"至",-1)),Fe=s(()=>t("span",null,"之内时，则通过，可开此药。",-1)),Me={key:3,class:"range-item flex up-center"},Ne=s(()=>t("span",null,"当检验值处于",-1)),Ie=s(()=>t("span",{class:"split"},"至",-1)),Te=s(()=>t("span",null,"之内时，则通过，可开此药。",-1)),Le={key:4,class:"range-item flex up-center"},we=s(()=>t("span",null,"当检验值处于",-1)),qe=s(()=>t("span",{class:"split"},"至",-1)),Se=s(()=>t("span",null,"之外时，则通过，可开此药。",-1)),$e={key:5,class:"range-item flex up-center"},je=s(()=>t("span",null,"当检验值处于",-1)),Ae=s(()=>t("span",{class:"split"},"至",-1)),Oe=s(()=>t("span",null,"之外时，则通过，可开此药。",-1)),Be={key:6,class:"range-item flex up-center"},Ee=s(()=>t("span",null,"当检验值等于",-1)),Je=s(()=>t("span",null,"时，则通过，可开此药。",-1)),De={key:7,class:"range-item flex up-center"},He=s(()=>t("span",null,"当检验值等于",-1)),Pe=s(()=>t("span",null,"时，则通过，可开此药。",-1)),ze={key:8,class:"range-item flex up-center"},Ge=s(()=>t("span",null,"当检验值结果为",-1)),Ke=s(()=>t("span",null,"则判断通过，可开此药。",-1)),Qe={key:9,class:"range-item flex up-center"},We=s(()=>t("span",null,"当检验值结果为",-1)),Xe=s(()=>t("span",null,"则判断通过，可开此药。",-1)),Ye=ne({name:"Matching-Tools-Vertify-Audit-Rule-Add",__name:"winAdd",props:{signs:{type:Number,default:0},laboratoryList:{type:Object,default:()=>[]},ruleForm:{type:Object,default:()=>({id:"",generalName:""})}},emits:["query"],setup(r,{expose:d,emit:i}){const V=r,R=oe(),M=ae("$baseMessage"),N=i,_=I(!1),f=I(null),h={id:"",signs:V.signs,generalId:V.ruleForm.id,generalName:V.ruleForm.generalName,isInspectionReport:"1",reportingCycle:0,laboratoryCode:"",laboratoryName:"",referenceRangeType:"",referenceCondition:"",referenceFixedValue:"",unit:"",referenceRangeMin:"",referenceRangeMax:"",referenceRange:"",severity:"0",active:"0"};let e=J({});const D=J({isInspectionReport:[{required:!0,message:"请选择是否存在",trigger:"blur"}],reportingCycle:[{required:!0,message:"请输入天数",trigger:"blur"}],laboratoryCode:[{required:!0,message:"请选择检验项",trigger:"change"}],laboratoryCodeValue:[{type:"array",required:!0,message:"请选择检验项",trigger:"change"}]});I("");const w=[{label:"大于",value:"1"},{label:"大于等于",value:"2"},{label:"小于",value:"3"},{label:"小于等于",value:"4"}],H=v=>{e.referenceCondition="",e.referenceFixedValue="",e.unit="",e.referenceRangeMin="",e.referenceRangeMax="",e.referenceFixedValue="",e.referenceRange=""},P=v=>{const o=V.laboratoryList.find(b=>b.hosLaboratoryCode===e.laboratoryCode);o&&(e.laboratoryName=o.hosLaboratoryName)},z=v=>{if(_.value=!0,Object.assign(e,h),JSON.stringify(v)!=="{}")for(let o in e)e[o]=v[o]},G=()=>{f.value.validate(v=>E(this,null,function*(){if(v){const{msg:o}=yield pe(B(O({},e),{generalId:V.ruleForm.id,generalName:V.ruleForm.generalName}));M(o,"success","hey"),N("query"),q()}}))},q=()=>{_.value=!1};return d({open:z}),(v,o)=>{const b=y("el-radio"),S=y("el-radio-group"),x=y("el-form-item"),m=y("el-input-number"),K=se,C=y("el-option"),k=y("el-select"),g=y("el-input"),Q=y("el-form"),$=y("el-button"),W=re;return u(),T(W,{modelValue:a(_),"onUpdate:modelValue":o[18]||(o[18]=l=>te(_)?_.value=l:null),modal:!1,"append-to-body":"",title:`${a(e).id?"编辑":"新增"}检验规则`,width:"850px",onClose:q,class:"pointerEvents"},{footer:p(()=>[n($,{onClick:o[17]||(o[17]=l=>_.value=!1)},{default:p(()=>[L("取 消")]),_:1}),n($,{type:"primary",onClick:G},{default:p(()=>[L("确 定")]),_:1})]),default:p(()=>[n(Q,{ref_key:"formRef",ref:f,"label-width":"120px",model:a(e),rules:a(D)},{default:p(()=>[n(x,{label:"是否有检验报告:",prop:"isInspectionReport"},{default:p(()=>[t("div",ce,[n(S,{modelValue:a(e).isInspectionReport,"onUpdate:modelValue":o[0]||(o[0]=l=>a(e).isInspectionReport=l)},{default:p(()=>[n(b,{label:"存在检验报告",value:"1"}),n(b,{label:"不存在检验报告",value:"0"})]),_:1},8,["modelValue"])])]),_:1}),n(x,{label:"检验报告周期:",prop:"reportingCycle"},{default:p(()=>[t("div",me,[n(m,{class:"number-input",modelValue:a(e).reportingCycle,"onUpdate:modelValue":o[1]||(o[1]=l=>a(e).reportingCycle=l),min:0,"controls-position":"right"},null,8,["modelValue"]),_e,t("span",fe,[n(K,{icon:"icon-xintishi"}),L(" 提示：如果设定0周期，则扫描全部报告。 ")])])]),_:1}),n(x,{label:"检验项:",prop:"laboratoryCode"},{default:p(()=>[n(k,{modelValue:a(e).laboratoryCode,"onUpdate:modelValue":o[2]||(o[2]=l=>a(e).laboratoryCode=l),placeholder:"请选择",filterable:"",clearable:"",onChange:P},{default:p(()=>[(u(!0),c(U,null,F(r.laboratoryList,l=>(u(),T(C,{key:l.hosLaboratoryCode,label:l.hosLaboratoryName,value:l.hosLaboratoryCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(x,{label:"问题等级:",prop:"severity"},{default:p(()=>[n(k,{modelValue:a(e).severity,"onUpdate:modelValue":o[3]||(o[3]=l=>a(e).severity=l),placeholder:"请选择","value-key":"dictValue"},{default:p(()=>[(u(!0),c(U,null,F(a(R).wordbook.problem_level_rule,l=>(u(),T(C,{key:l.dictValue,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(x,{label:"参考范围:",prop:"referenceRangeType"},{default:p(()=>[t("div",ge,[t("div",be,[n(S,{modelValue:a(e).referenceRangeType,"onUpdate:modelValue":o[4]||(o[4]=l=>a(e).referenceRangeType=l),onChange:H},{default:p(()=>[n(b,{value:"1",label:"偏高或偏低"}),n(b,{value:"2",label:"区间内"}),n(b,{value:"3",label:"区间外"}),n(b,{value:"4",label:"固定值"}),n(b,{value:"5",label:"非数值类型"})]),_:1},8,["modelValue"])]),t("div",null,[a(e).referenceRangeType==1?(u(),c("div",ye,[Ve,n(k,{modelValue:a(e).referenceCondition,"onUpdate:modelValue":o[5]||(o[5]=l=>a(e).referenceCondition=l),placeholder:"请选择"},{default:p(()=>[(u(),c(U,null,F(w,l=>n(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(m,{class:"number-input",modelValue:a(e).referenceFixedValue,"onUpdate:modelValue":o[6]||(o[6]=l=>a(e).referenceFixedValue=l),min:0,"controls-position":"right"},null,8,["modelValue"]),n(g,{class:"unit",modelValue:a(e).unit,"onUpdate:modelValue":o[7]||(o[7]=l=>a(e).unit=l),placeholder:"输入单位"},null,8,["modelValue"]),ve])):(u(),c("div",he,[xe,n(k,{placeholder:"请选择",disabled:""},{default:p(()=>[(u(),c(U,null,F(w,l=>n(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1}),n(m,{class:"number-input",min:0,"controls-position":"right",disabled:""}),n(g,{class:"unit",placeholder:"输入单位",disabled:""}),Re])),a(e).referenceRangeType==2?(u(),c("div",Ce,[ke,n(m,{class:"number-input",modelValue:a(e).referenceRangeMin,"onUpdate:modelValue":o[8]||(o[8]=l=>a(e).referenceRangeMin=l),min:0,"controls-position":"right"},null,8,["modelValue"]),Ue,n(m,{class:"number-input",modelValue:a(e).referenceRangeMax,"onUpdate:modelValue":o[9]||(o[9]=l=>a(e).referenceRangeMax=l),min:0,"controls-position":"right"},null,8,["modelValue"]),n(g,{class:"unit",modelValue:a(e).unit,"onUpdate:modelValue":o[10]||(o[10]=l=>a(e).unit=l),placeholder:"输入单位"},null,8,["modelValue"]),Fe])):(u(),c("div",Me,[Ne,n(m,{class:"number-input",disabled:"",min:0,"controls-position":"right"}),Ie,n(m,{class:"number-input",disabled:"",min:0,"controls-position":"right"}),n(g,{class:"unit",placeholder:"输入单位",disabled:""}),Te])),a(e).referenceRangeType==3?(u(),c("div",Le,[we,n(m,{class:"number-input",modelValue:a(e).referenceRangeMin,"onUpdate:modelValue":o[11]||(o[11]=l=>a(e).referenceRangeMin=l),min:0,"controls-position":"right"},null,8,["modelValue"]),qe,n(m,{class:"number-input",modelValue:a(e).referenceRangeMax,"onUpdate:modelValue":o[12]||(o[12]=l=>a(e).referenceRangeMax=l),min:0,"controls-position":"right"},null,8,["modelValue"]),n(g,{class:"unit",modelValue:a(e).unit,"onUpdate:modelValue":o[13]||(o[13]=l=>a(e).unit=l),placeholder:"输入单位"},null,8,["modelValue"]),Se])):(u(),c("div",$e,[je,n(m,{class:"number-input",disabled:"",min:0,"controls-position":"right"}),Ae,n(m,{class:"number-input",disabled:"",min:0,"controls-position":"right"}),n(g,{class:"unit",placeholder:"输入单位",disabled:""}),Oe])),a(e).referenceRangeType==4?(u(),c("div",Be,[Ee,n(m,{class:"number-input",modelValue:a(e).referenceFixedValue,"onUpdate:modelValue":o[14]||(o[14]=l=>a(e).referenceFixedValue=l),min:0,"controls-position":"right"},null,8,["modelValue"]),n(g,{class:"unit",modelValue:a(e).unit,"onUpdate:modelValue":o[15]||(o[15]=l=>a(e).unit=l),placeholder:"输入单位"},null,8,["modelValue"]),Je])):(u(),c("div",De,[He,n(m,{class:"number-input",disabled:"",min:0,"controls-position":"right"}),n(g,{class:"unit",placeholder:"输入单位",disabled:""}),Pe])),a(e).referenceRangeType==5?(u(),c("div",ze,[Ge,n(g,{class:"symbol",modelValue:a(e).referenceRange,"onUpdate:modelValue":o[16]||(o[16]=l=>a(e).referenceRange=l),placeholder:'请用"|"隔开'},null,8,["modelValue"]),Ke])):(u(),c("div",Qe,[We,n(g,{class:"symbol",placeholder:'请用"|"隔开',disabled:""}),Xe]))])])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),nl=de(Ye,[["__scopeId","data-v-5823de33"]]);export{nl as default};
