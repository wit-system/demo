var V=(g,_,i)=>new Promise((d,b)=>{var h=p=>{try{r(i.next(p))}catch(v){b(v)}},I=p=>{try{r(i.throw(p))}catch(v){b(v)}},r=p=>p.done?d(p.value):Promise.resolve(p.value).then(h,I);r((i=i.apply(g,_)).next())});import ye from"./editGestationalAgeDialog-CHOA2sLa.js";import be from"./ruleEditing-CAVRqa1f.js";import{d as ke,r as u,P as xe,aj as Se,b as Ve,b9 as N,bs as Le,a0 as Ie,m as f,o as y,c as F,n as s,a7 as $,p as e,y as o,s as l,B as L,z as R,q as D,aY as Ne,F as Be,A as ze,C as Y,x as j,t as K,v as X,bL as Ae,aa as Fe,ae as $e,H as Re,af as De,ag as Me,I as Te,J as Ee,_ as Oe}from"./index-1fQ0gozz.js";import{E as Ue,F as Z,G as Ge}from"./indication-BrfvaLV3.js";import"./ruleSetItemContent-DXtfKTJL.js";import"./ruleItem-bRexkwVD.js";import"./judgingConditions-wiurioRr.js";import"./index.vue_vue_type_style_index_0_lang-CmHiYd40.js";import"./ifComponent.vue_vue_type_style_index_0_lang-BOVwK668.js";import"./index-BueAkiiY.js";import"./index.vue_vue_type_script_setup_true_lang-BLW0x7SH.js";import"./dict-Cq6Rfk1f.js";import"./ruleCustomParameters-COBbIW-C.js";const B=g=>(Te("data-v-f1ecf69b"),g=g(),Ee(),g),Pe={class:"flex justify-between"},qe={class:"flex justify-between align-center"},Qe=B(()=>s("div",{class:"title"},"妊娠期妇女",-1)),We={class:"header-action-icon"},He={key:0},Je={class:"flex justify-between align-center",style:{"flex-wrap":"wrap"}},Ye={class:"flex"},je=B(()=>s("span",null,"新增孕周",-1)),Ke=B(()=>s("div",{class:"top"},null,-1)),Xe={class:"center"},Ze=B(()=>s("div",{class:"bottom"},null,-1)),et=ke({name:"AestationalAge",__name:"index",props:{ruleForm:{type:Object,default:()=>{}}},setup(g){const _=g;u(!1);const i=u(!1),d=xe("$baseMessage"),b=u(null),h=Se(),{refreshCheckStatus:I}=h,r=Ve({routeName:"",pageNum:1,pageSize:10,total:0,generalId:"",severity:"",whetherOverstepSynopsis:""}),p=u(null),v=u(null),k=u([]),w=u([]),m=u("gestational"),M=u(""),ee=u(""),C=u(!0),te=u([{width:"40",type:"checkbox"},{field:"updateName",title:"编辑人",width:"80",show:N("editor")},{field:"updateTime",title:"编辑时间",width:"165",show:N("editor")},{field:"floorLevel",title:"孕周",minWidth:"140",render:!0},{field:"tipContent",title:"提示内容",width:"120"},{field:"reference",title:"参考文献",width:"120"},{field:"warnSign",title:"禁慎用标识",minWidth:"100",sortable:!0,render:!0},{field:"whetherOverstepSynopsis",title:"超说明书用药",width:"125",sortable:!0,render:!0},{field:"severity",title:"问题等级",width:"120",render:!0},{field:"active",title:"是否屏蔽",width:"120",render:!0},{field:"btns",title:"操作",align:"center",width:"120",fixed:"right",render:!0}]);function ne(){var S;const a={checkStatus:((S=h.ruleCheckStatus.get(m.value))==null?void 0:S.checkStatus)==="1"?"0":"1",dimensionCode:m.value,refId:_.ruleForm.id};Ae(a).then(({msg:z})=>{I(_.ruleForm.id),d(z,"success","hey")}).catch(()=>{I(_.ruleForm.id)})}function ae(t){return V(this,null,function*(){i.value=!0;try{let a=yield Z([t]);if(i.value=!1,a.resultCode!=1){t.active=t.active==="1"?"0":"1",d("孕周修改失败","info","hey");return}d("孕周修改成功","success","hey")}catch(a){d("孕周修改失败","info","hey"),t.active=t.active==="1"?"0":"1",i.value=!1}return!1})}const T=Le(t=>{r.pageNum=t,x()},300),oe=t=>{r.pageNum=1,r.pageSize=t,x()},E=()=>{k.value=v.value.tableMethods("getCheckboxRecords")},O=(t,a)=>{b.value.showDiag(t,a,_.ruleForm.id)};function le(t){return V(this,null,function*(){i.value=!0;try{let a=yield Z([t]);if(i.value=!1,a.resultCode!=1){t.active=t.active==="1"?"0":"1",d("孕周修改失败","info","hey");return}d("孕周修改成功","success","hey")}catch(a){d("孕周修改失败","info","hey"),t.active=t.active==="1"?"0":"1",i.value=!1}return!1})}const se=()=>{};function U({row:t}){M.value=t.id,p.value&&p.value.query(t)}const ie=()=>{if(!k.value.length){d("请先勾选表格","info");return}let t=k.value.map(a=>a.id);G(t)};function G(t){Fe.confirm("是否确认删除","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>V(this,null,function*(){i.value=!0;const{msg:a}=yield Ge(t);i.value=!1,d(a,"success","hey"),x()})).catch(()=>{$e({type:"info",message:"取消删除"})})}function x(){return V(this,null,function*(){k.value=[],w.value=[];let t=yield Ue(r);t.resultCode==1&&(r.total=t.data.total,w.value=t.data.records||[],w.value.length&&(v.value.tableMethods("setCurrentRow",w.value[0]),U({row:w.value[0]})))})}function re({row:t,rowIndex:a}){return t.whetherOverstepSynopsis=="1"?"warning-row":""}Ie(()=>{r.generalId=_.ruleForm.id,x()});function ce(){C.value=!C.value}return(t,a)=>{const S=Re,z=f("el-tooltip"),ue=f("el-input"),de=f("el-checkbox"),A=f("el-button"),he=f("el-option"),pe=f("el-select"),fe=f("el-switch"),me=De,ge=Me,P=f("el-card"),_e=f("arrow-left-bold"),q=f("el-icon"),ve=f("arrow-right-bold"),we=be,Ce=ye;return y(),F("div",null,[s("div",Pe,[s("div",{class:$(["left-container",e(C)?"left-container-all":"left-container-half"])},[o(P,{class:"no-bottom-card"},{header:l(()=>{var n,c,Q,W,H;return[s("div",qe,[Qe,s("div",We,[e(N)("editor")&&((n=e(h).ruleCheckStatus.get(e(m)))==null?void 0:n.checkStatus)==="1"?(y(),F("span",He,L(((c=e(h).ruleCheckStatus.get(e(m)))==null?void 0:c.checkName)||((Q=e(h).ruleCheckStatus.get(e(m)))==null?void 0:Q.checkBy))+"/"+L((W=e(h).ruleCheckStatus.get(e(m)))==null?void 0:W.checkTime),1)):R("",!0),e(N)("editor")?(y(),D(z,{key:1,class:"box-item",effect:"dark",content:((H=e(h).ruleCheckStatus.get(e(m)))==null?void 0:H.checkStatus)==="1"?"取消检查":"检查",placement:"top"},{default:l(()=>{var J;return[o(S,{icon:"icon-jiancha",class:$(["refresh-icon",{active:((J=e(h).ruleCheckStatus.get(e(m)))==null?void 0:J.checkStatus)==="1"}]),onClick:ne,style:{padding:"4px 5px 3px"}},null,8,["class"])]}),_:1},8,["content"])):R("",!0)])])]}),default:l(()=>[s("div",Je,[o(ue,{modelValue:e(r).routeName,"onUpdate:modelValue":a[0]||(a[0]=n=>e(r).routeName=n),placeholder:"请输入关键字","suffix-icon":e(Ne),style:{width:"300px"},clearable:"",onInput:a[1]||(a[1]=n=>e(T)(1))},null,8,["modelValue","suffix-icon"]),s("div",Ye,[e(k).length?(y(),D(de,{key:0,"model-value":!0,label:"批量删除",border:"",style:{"margin-right":"12px"},onClick:ie})):R("",!0),o(A,{plain:"",type:"warning",onClick:a[2]||(a[2]=n=>O("","add"))},{default:l(()=>[o(S,{icon:"icon-xinzengdianpingjihua"}),je]),_:1})])]),o(me,{ref_key:"tableRef",ref:v,"table-name":"rule-gestationalAge-table",loading:e(i),"table-data":e(w),columns:e(te),isShowTableSet:!1,onCheckboxChange:E,onCheckboxAll:E,onFilterChange:se,onCellClick:U,"row-class-name":re},{floorLevel:l(n=>[s("span",null,L(n.row.floorLevel=="0"&&n.row.upperLevel=="0"?"任何孕周":n.row.floorLevel+"周  至  "+n.row.upperLevel+"周"),1)]),warnSign:l(n=>[s("span",null,L(n.row.warnSign=="0"?"禁用":n.row.warnSign=="1"?"慎用":""),1)]),whetherOverstepSynopsis:l(n=>[s("div",null,L(n.row.whetherOverstepSynopsis=="1"?"是":"否"),1)]),severity:l(n=>[o(pe,{modelValue:n.row.severity,"onUpdate:modelValue":c=>n.row.severity=c,onChange:c=>ae(n.row),size:"large",placeholder:"请选择"},{default:l(()=>[(y(!0),F(Be,null,ze(e(h).wordbook.problem_level_rule,c=>(y(),D(he,{key:c.dictLabel,label:c.dictLabel,value:c.dictValue},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),active:l(n=>[o(fe,{modelValue:n.row.active,"onUpdate:modelValue":c=>n.row.active=c,loading:e(i),onChange:c=>le(n.row),"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),btns:l(n=>[o(A,{text:"",type:"primary",onClick:Y(c=>O(n.row,"edit"),["stop"])},{default:l(()=>[j("编辑")]),_:2},1032,["onClick"]),o(A,{text:"",type:"primary",onClick:Y(c=>G([n.row.id]),["stop"])},{default:l(()=>[j("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","table-data","columns"]),o(ge,{"current-page":e(r).pageNum,"page-size":e(r).pageSize,total:e(r).total,"prev-text":"上一页","next-text":"下一页",onCurrentChange:e(T),onSizeChange:oe},null,8,["current-page","page-size","total","onCurrentChange"])]),_:1})],2),s("div",{class:$(["right-container",e(C)?"right-container-half":"right-container-all"])},[s("div",{class:"toggle-btn",onClick:ce},[Ke,s("div",Xe,[K(o(q,null,{default:l(()=>[o(_e)]),_:1},512),[[X,e(C)]]),K(o(q,null,{default:l(()=>[o(ve)]),_:1},512),[[X,!e(C)]])]),Ze]),o(P,{class:"no-bottom-card"},{default:l(()=>[o(we,{dimensionCode:e(m),refId:e(M),id:e(ee),ref_key:"ruleEditingBox",ref:p},null,8,["dimensionCode","refId","id"])]),_:1})],2)]),o(Ce,{ref_key:"editGestationalAgeDialogRef",ref:b,onQuery:x},null,512)])}}}),mt=Oe(et,[["__scopeId","data-v-f1ecf69b"]]);export{mt as default};
