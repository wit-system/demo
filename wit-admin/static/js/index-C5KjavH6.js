var w=($,f,i)=>new Promise((g,l)=>{var C=s=>{try{_(i.next(s))}catch(m){l(m)}},v=s=>{try{_(i.throw(s))}catch(m){l(m)}},_=s=>s.done?g(s.value):Promise.resolve(s.value).then(C,v);_((i=i.apply($,f)).next())});import{d as F,a as L,g as U,_ as q}from"./pharmacyRuleCustomParametersEdit-DWxZwWL-.js";import{d as A,P as V,r as p,h as I,m as R,o as Q,c as G,n as c,y as a,s as o,B as x,p as r,C as k,x as W,H as J,af as K,ag as X}from"./index-1fQ0gozz.js";import{g as S}from"./dict-Cq6Rfk1f.js";const Y={class:"rule-container auto-height-container"},Z={class:"app-content padding-out"},ee={class:"top-btn"},te=c("span",null,"批量删除",-1),ne=c("span",null,"新增",-1),ae=c("span",null,"搜索",-1),oe={class:"app-pagination"},ce=A({__name:"index",setup($){const f=V("$baseConfirm"),i=V("$baseMessage"),g=p(!0),l=p({pageSize:20,pageNum:1}),C=p(null),v=p([]),_=p(0),s=p([{width:"40",type:"checkbox"},{field:"typeCode",title:"参数大类",minWidth:"120",render:!0},{field:"paramCode",title:"参数编码",minWidth:"130"},{field:"paramName",title:"参数名称",minWidth:"140"},{field:"logicalOperatorList",title:"逻辑运算符",minWidth:"140",render:!0},{field:"controlType",title:"控件类型",minWidth:"140",render:!0},{field:"active",title:"启用状态",width:"100",align:"center",render:!0},{field:"paramHandle",title:"参数处理器",minWidth:"140"},{field:"viewHandle",title:"视图处理器",width:"100",align:"center"},{field:"btns",title:"操作",align:"center",width:"120",fixed:"right",render:!0}]),m=p(null);function z(e={}){e.id?m.value.showEdit(e):m.value.showEdit()}function B(e){F(e).then(({msg:n})=>{i(n,"success","hey")}).catch(()=>{u()})}const b=p([]),E=()=>{b.value=C.value.tableMethods("getCheckboxRecords")};function M(e){let n=[];for(let d in e)n.push(S("rule_logical_operators",e[d]));return n.toString()}const N=(e={})=>{if(e.id)f("您确定要删除当前项吗",null,()=>w(this,null,function*(){const{msg:n}=yield L([e.id]);i(n,"success","hey"),yield u()}));else if(b.value.length>0){const n=b.value.map(d=>d.id);f("您确定要删除选中项吗",null,()=>w(this,null,function*(){const{msg:d}=yield L(n);i(d,"success","hey"),yield u()}))}else i("您未选中任何行","warning","hey")};function P(e){l.value.pageNum=1,l.value.pageSize=e,u()}function T(e){l.value.pageNum=e,u()}function u(){return w(this,null,function*(){g.value=!0;const{data:e}=yield U(l.value);v.value=e.records,_.value=e.total,g.value=!1})}return I(()=>{u()}),(e,n)=>{const d=J,h=R("el-button"),D=R("el-switch"),O=K,H=X,j=q;return Q(),G("div",Y,[c("div",Z,[c("div",ee,[a(h,{type:"primary",plain:"",onClick:N},{default:o(()=>[a(d,{icon:"icon-piliangcaozuo"}),te]),_:1}),a(h,{type:"warning",plain:"",onClick:z},{default:o(()=>[a(d,{icon:"icon-xinzengdianpingjihua"}),ne]),_:1}),a(h,{type:"primary",plain:"",onClick:u},{default:o(()=>[ae]),_:1})]),a(O,{ref_key:"tableRef",ref:C,"table-name":"rule-custom-parameters-table",loading:r(g),"table-data":r(v),columns:r(s),"checkbox-config":{trigger:"row"},onCheckboxChange:E,onCheckboxAll:E},{typeCode:o(t=>[c("span",null,x(r(S)("tutelage_rule_param_type",t.row.typeCode)),1)]),logicalOperatorList:o(t=>[c("span",null,x(M(t.row.logicalOperatorList)),1)]),controlType:o(t=>[c("span",null,x(r(S)("rule_control_type",t.row.controlType)),1)]),active:o(t=>[a(D,{modelValue:t.row.active,"onUpdate:modelValue":y=>t.row.active=y,loading:r(g),onClick:n[0]||(n[0]=k(()=>{},["stop"])),onChange:y=>B(t.row),"active-value":"0","inactive-value":"1"},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),btns:o(t=>[a(h,{text:"",type:"primary",onClick:k(y=>z(t.row),["stop"])},{default:o(()=>[W("编辑")]),_:2},1032,["onClick"]),a(h,{text:"",type:"primary",onClick:k(y=>N(t.row),["stop"])},{default:o(()=>[W("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","table-data","columns"])]),c("div",oe,[a(H,{"current-page":r(l).pageNum,"page-size":r(l).pageSize,total:r(_),"prev-text":"上一页","next-text":"下一页",onCurrentChange:T,onSizeChange:P},null,8,["current-page","page-size","total"])]),a(j,{ref_key:"ruleCustomParametersEditRef",ref:m,onQuery:u},null,512)])}}});export{ce as default};
