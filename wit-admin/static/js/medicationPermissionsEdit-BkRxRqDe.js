var $=(l,O,u)=>new Promise((x,c)=>{var V=e=>{try{d(u.next(e))}catch(m){c(m)}},f=e=>{try{d(u.throw(e))}catch(m){c(m)}},d=e=>e.done?x(e.value):Promise.resolve(e.value).then(V,f);d((u=u.apply(l,O)).next())});import{an as I,d as B,P as E,aj as F,r as v,b as U,m as y,o as r,q as h,s as a,y as i,x as C,p as o,c as k,B as q,z as M,F as N,A as w,a6 as J,av as A,H,ah as G,_ as K}from"./index-BNylXLUF.js";function se(l){return I({url:`/system/medication-permissions/page?pageNum=${l.pageNum}&pageSize=${l.pageSize}`,method:"POST",data:l})}function Q(l){return I({url:"/system/medication-permissions/put",method:"POST",data:l})}function oe(l){return I({url:"/system/medication-permissions/refreshCache",method:"get"})}const W={key:0,class:"tipdiv"},X=B({name:"RuleCustomParameters",__name:"medicationPermissionsEdit",emits:["query","resetingVal"],setup(l,{expose:O,emit:u}){const x=E("$baseMessage"),c=F(),V=u,f=v(!1),d=v(null),e=U({id:"",userName:"",antibioticsPrescPermission:"",tumorDrugsPrescPermissionOp:"",tumorDrugsPrescPermissionIp:""}),m=v(""),P=v(!1),p=v([]),L=(n,t)=>{P.value=!0,p.value=JSON.parse(JSON.stringify(t)),A(()=>{n?(m.value="编辑",Object.assign(e,n)):m.value="批量编辑"})},D=()=>{d.value.resetFields(),Object.assign(e,{id:"",userName:"",antibioticsPrescPermission:"",tumorDrugsPrescPermissionOp:"",tumorDrugsPrescPermissionIp:""}),p.value=[],P.value=!1,V("resetingVal")},R=()=>$(this,null,function*(){f.value=!0;let n=[];if(p.value.length>0){const{antibioticsPrescPermission:S,tumorDrugsPrescPermissionOp:g,tumorDrugsPrescPermissionIp:b}=e;n=p.value.map(_=>({id:_.id||"",userName:_.userName,antibioticsPrescPermission:S,tumorDrugsPrescPermissionOp:g,tumorDrugsPrescPermissionIp:b,ppiPermission:""}))}else n=[e],n[0].ppiPermission="";const{msg:t}=yield Q(n);f.value=!1,x(t,"success","hey"),V("query"),D()});return O({showEdit:L}),(n,t)=>{const S=H,g=y("el-option"),b=y("el-select"),_=y("el-form-item"),T=y("el-form"),j=y("el-button"),z=G;return r(),h(z,{modelValue:o(P),"onUpdate:modelValue":t[3]||(t[3]=s=>J(P)?P.value=s:null),"append-to-body":"",title:o(m),width:"540px",onClose:D},{footer:a(()=>[i(j,{onClick:D},{default:a(()=>[C("取 消")]),_:1}),i(j,{type:"primary",onClick:R,loading:o(f)},{default:a(()=>[C("确 定")]),_:1},8,["loading"])]),default:a(()=>[o(p).length>0?(r(),k("div",W,[i(S,{icon:"icon-xintishi",style:{"margin-right":"3px",color:"#fc9f15"}}),C(" 将选中的 "+q(o(p).length)+"条 用户用药权限统一设为 ",1)])):M("",!0),i(T,{ref_key:"formRef",ref:d,"label-width":"170px",model:o(e)},{default:a(()=>[i(_,{label:"抗菌药物处方权："},{default:a(()=>[i(b,{modelValue:o(e).antibioticsPrescPermission,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).antibioticsPrescPermission=s),placeholder:"请选择"},{default:a(()=>[(r(!0),k(N,null,w(o(c).wordbook.antibiotics_type,s=>(r(),h(g,{key:s.id,label:s.dictLabel,value:s.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(_,{label:"肿瘤药品处方权 (门诊) ："},{default:a(()=>[i(b,{modelValue:o(e).tumorDrugsPrescPermissionOp,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).tumorDrugsPrescPermissionOp=s),placeholder:"请选择"},{default:a(()=>[(r(!0),k(N,null,w(o(c).wordbook.anti_tumor_level,s=>(r(),h(g,{key:s.id,label:s.dictLabel,value:s.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(_,{label:"肿瘤药品处方权 (住院)："},{default:a(()=>[i(b,{modelValue:o(e).tumorDrugsPrescPermissionIp,"onUpdate:modelValue":t[2]||(t[2]=s=>o(e).tumorDrugsPrescPermissionIp=s),placeholder:"请选择"},{default:a(()=>[(r(!0),k(N,null,w(o(c).wordbook.anti_tumor_level,s=>(r(),h(g,{key:s.id,label:s.dictLabel,value:s.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Y=K(X,[["__scopeId","data-v-cad20ea7"]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Y as _,oe as a,te as b,se as m};
