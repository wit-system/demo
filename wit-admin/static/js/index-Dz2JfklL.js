var N=(a,s,r)=>new Promise((d,n)=>{var l=t=>{try{i(r.next(t))}catch(u){n(u)}},o=t=>{try{i(r.throw(t))}catch(u){n(u)}},i=t=>t.done?d(t.value):Promise.resolve(t.value).then(l,o);i((r=r.apply(a,s)).next())});import R from"./index-BbATPsKa.js";import{an as w,d as U,aj as D,r as S,P as H,m as b,o as v,q as j,s as k,n as P,p as e,b9 as I,c as T,B as x,z as V,y as f,a7 as $,a6 as J,x as Q,bL as W,H as A,I as G,J as K,_ as X}from"./index-BN8uVNSO.js";import"./style-doqH4jKF.js";import"./fileUpload-CpIuWZku.js";function Y(a){return w({url:"/system/keyPoint/select",method:"POST",data:a})}function Z(a){return w({url:"/system/keyPoint/put",method:"post",data:a})}function ee(){return w({url:"/system/keyPoint/refreshCache",method:"get"})}const te=a=>(G("data-v-1c12c167"),a=a(),K(),a),se={class:"flex justify-between align-center"},oe=te(()=>P("div",{class:"title"},"要点提示",-1)),ae={class:"header-action-icon"},ce={key:0},ne={class:"mt8"},re={key:0,class:"mt8"},le=U({__name:"index",props:{ruleForm:{type:Object,default:()=>{}}},setup(a){const s=D(),{refreshCheckStatus:r}=s,d=S(!1),n=a,l=H("$baseMessage"),o=S("rule_key_point"),i=S(""),t=S(""),u=()=>{Y({generalId:n.ruleForm.id}).then(({data:c})=>{c&&(i.value=c.id,t.value=c.remarks)})};u();const q=()=>{if(!t.value)return l("请填写内容","warning","hey");Z({id:i.value,generalId:n.ruleForm.id,remarks:t.value}).then(({msg:c})=>{l(c,"success","hey"),u()})};function z(){var m;const y={checkStatus:((m=s.ruleCheckStatus.get(o.value))==null?void 0:m.checkStatus)==="1"?"0":"1",dimensionCode:o.value,refId:n.ruleForm.id};W(y).then(({msg:g})=>{r(n.ruleForm.id),l(g,"success","hey")}).catch(()=>{r(n.ruleForm.id)})}function E(){return N(this,null,function*(){d.value=!0;const{msg:c}=yield ee();d.value=!1,l(c,"success","hey")})}return(c,y)=>{const m=A,g=b("el-tooltip"),L=R,M=b("el-button"),O=b("el-card");return v(),j(O,{class:"main-point-tips flex-all"},{header:k(()=>{var p,h,_,C,B;return[P("div",se,[oe,P("div",ae,[e(I)("editor")&&((p=e(s).ruleCheckStatus.get(e(o)))==null?void 0:p.checkStatus)==="1"?(v(),T("span",ce,x(((h=e(s).ruleCheckStatus.get(e(o)))==null?void 0:h.checkName)||((_=e(s).ruleCheckStatus.get(e(o)))==null?void 0:_.checkBy))+"/"+x((C=e(s).ruleCheckStatus.get(e(o)))==null?void 0:C.checkTime),1)):V("",!0),e(I)("editor")?(v(),j(g,{key:1,class:"box-item",effect:"dark",content:((B=e(s).ruleCheckStatus.get(e(o)))==null?void 0:B.checkStatus)==="1"?"取消检查":"检查",placement:"top"},{default:k(()=>{var F;return[f(m,{icon:"icon-jiancha",class:$(["refresh-icon",{active:((F=e(s).ruleCheckStatus.get(e(o)))==null?void 0:F.checkStatus)==="1"}]),onClick:z,style:{padding:"4px 5px 3px"}},null,8,["class"])]}),_:1},8,["content"])):V("",!0),f(g,{class:"box-item",effect:"dark",content:"刷新缓存",placement:"top"},{default:k(()=>[f(m,{icon:"icon-gengxin",class:$({"refresh-icon":!0,"loading-animation":e(d)}),onClick:E,style:{padding:"4px"}},null,8,["class"])]),_:1})])])]}),default:k(()=>{var p,h,_;return[f(L,{modelValue:e(t),"onUpdate:modelValue":y[0]||(y[0]=C=>J(t)?t.value=C:null),isPic:!1},null,8,["modelValue"]),P("div",ne,[f(M,{type:"primary",onClick:q},{default:k(()=>[Q("保存")]),_:1})]),e(I)("editor")&&((p=e(s).ruleCheckStatus.get(e(o)))==null?void 0:p.checkStatus)==="1"?(v(),T("div",re,x((h=e(s).ruleCheckStatus.get(e(o)))==null?void 0:h.updateName)+" / "+x((_=e(s).ruleCheckStatus.get(e(o)))==null?void 0:_.updateTime),1)):V("",!0)]}),_:1})}}}),he=X(le,[["__scopeId","data-v-1c12c167"]]);export{he as default};
