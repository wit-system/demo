var v=(_,c,u)=>new Promise((x,s)=>{var M=o=>{try{g(u.next(o))}catch(t){s(t)}},m=o=>{try{g(u.throw(o))}catch(t){s(t)}},g=o=>o.done?x(o.value):Promise.resolve(o.value).then(M,m);g((u=u.apply(_,c)).next())});import B from"./ruleEditing-DV3TpLnw.js";import{d as F,r as d,aj as I,b as L,bs as j,l as P,m as y,o as U,c as $,y as r,s as n,p as i,n as w,B as a,af as O,ag as A,_ as G}from"./index-CmC8Jr0A.js";import{u as H}from"./ruleDose-g8ycl-3G.js";import"./ruleSetItemContent-C1CWiyzb.js";import"./ruleItem-D1B3madY.js";import"./judgingConditions-DCjH_Uof.js";import"./index.vue_vue_type_style_index_0_lang-D4meg1a3.js";import"./ifComponent.vue_vue_type_style_index_0_lang-ZpisXDR_.js";import"./index-COFi4TtR.js";import"./index.vue_vue_type_script_setup_true_lang-DtyLHHVv.js";import"./dict-BvhWhz6G.js";import"./ruleCustomParameters-Dcw2hLI-.js";const J=F({__name:"copyRuleDose",props:{ruleForm:{type:Object,default:()=>{}}},setup(_){const c=d("rule_usage_dosage"),u=d(null),x=d(!1),s=d(null),M=d([]),m=d([]),g=I(),o=_,t=L({keyword:"",pageNum:1,pageSize:10,total:0,dosageId:o.ruleForm.id||""}),C=d([{field:"countType",title:"计算方式",width:"125",render:!0},{field:"hisRouteCodeNames",title:"给药途径",width:"125"},{field:"age",title:"年龄",width:"80"},{field:"freqDayMin",title:"频次",width:"80",render:!0},{field:"weight",title:"体重范围",width:"80"},{field:"surfaceName",title:"体表面积",width:"80"},{field:"singleDoseMin",title:"单次量",width:"80",render:!0},{field:"dailyVolumeMin",title:"单日量",width:"80",render:!0},{field:"singleDoseExtremum",title:"单次极量",width:"80",render:!0},{field:"dailyVolumeExtremum",title:"单日极量",width:"80",render:!0},{field:"active",title:"是否屏蔽",width:"75",align:"center",render:!0}]);function h(){return v(this,null,function*(){M.value=[],t.dosageId=o.ruleForm.id||"";let{data:l}=yield H(t);m.value=l.records,t.total=l.total,m.value.length&&(s.value.tableMethods("setCurrentRow",m.value[0]),T({row:m.value[0]}))})}function T({row:l}){u.value.query(l)}function E(l){let D="";return(g.wordbook.calculation_method||[]).forEach(f=>{f.dictValue==l&&(D=f.dictLabel)}),D}const p=l=>{t.pageNum=1,t.pageSize=l,h()},q=j(l=>{t.pageNum=l,h()},300);return P(()=>o.ruleForm,()=>{h()},{deep:!0}),(l,D)=>{const f=y("el-switch"),k=O,S=A,V=y("el-card"),b=y("el-col"),R=B,N=y("el-row");return U(),$("div",null,[r(N,{gutter:16},{default:n(()=>[r(b,{span:12},{default:n(()=>[r(V,{class:"no-bottom-card"},{default:n(()=>[r(k,{ref_key:"tableRef",ref:s,"table-name":"rule-contraindication-table",loading:i(x),tableData:i(m),columns:i(C),isShowTableSet:!1,onCellClick:T},{countType:n(e=>[w("span",null,a(E(e.row.countType)),1)]),freqDayMin:n(e=>[w("span",null,a(e.row.freqDayMin||e.row.freqDayMin===0?e.row.freqDayMin+"天":"")+a(e.row.freqTimeMin||e.row.freqTimeMin===0?e.row.freqTimeMin+"次":"")+"至"+a(e.row.freqDayMax||e.row.freqDayMax===0?e.row.freqDayMax+"天":"")+a(e.row.freqTimeMax||e.row.freqTimeMax===0?e.row.freqTimeMax+"次":""),1)]),singleDoseMin:n(e=>[w("span",null,a(((e.row.singleDoseMin||e.row.singleDoseMin===0)&&e.row.singleDoseMin!=null?e.row.singleDoseMin+(e.row.countType=="1"?e.row.unit:e.row.countType=="2"?e.row.unit+"/m²":e.row.unit+"/kg"):"")+"-"+((e.row.singleDoseMax||e.row.singleDoseMax===0)&&e.row.singleDoseMax!=null?e.row.singleDoseMax+(e.row.countType=="1"?e.row.unit:e.row.countType=="2"?e.row.unit+"/m²":e.row.unit+"/kg"):"")),1)]),dailyVolumeMin:n(e=>[w("span",null,a(((e.row.dailyVolumeMin||e.row.dailyVolumeMin===0)&&e.row.dailyVolumeMin!=null?e.row.dailyVolumeMin+(e.row.countType=="1"?e.row.unit:e.row.countType=="2"?e.row.unit+"/m²":e.row.unit+"/kg"):"")+"-"+((e.row.dailyVolumeMax||e.row.dailyVolumeMax===0)&&e.row.dailyVolumeMax!=null?e.row.dailyVolumeMax+(e.row.countType=="1"?e.row.unit:e.row.countType=="2"?e.row.unit+"/m²":e.row.unit+"/kg"):"")),1)]),singleDoseExtremum:n(e=>[w("span",null,a((e.row.singleDoseExtremum||e.row.singleDoseExtremum===0)&&e.row.singleDoseExtremum!=null?e.row.singleDoseExtremum+(e.row.countType=="1"?e.row.unit:e.row.countType=="2"?e.row.unit+"/m²":e.row.unit+"/kg"):""),1)]),dailyVolumeExtremum:n(e=>[w("span",null,a((e.row.dailyVolumeExtremum||e.row.dailyVolumeExtremum===0)&&e.row.dailyVolumeExtremum!=null?e.row.dailyVolumeExtremum+(e.row.countType=="1"?e.row.unit:e.row.countType=="2"?e.row.unit+"/m²":e.row.unit+"/kg"):""),1)]),active:n(e=>[r(f,{modelValue:e.row.active,"onUpdate:modelValue":z=>e.row.active=z,disabled:"","active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["loading","tableData","columns"]),r(S,{"current-page":i(t).pageNum,"page-size":i(t).pageSize,total:i(t).total,"prev-text":"上一页","next-text":"下一页",onCurrentChange:i(q),onSizeChange:p},null,8,["current-page","page-size","total","onCurrentChange"])]),_:1})]),_:1}),r(b,{span:12},{default:n(()=>[r(V,{class:"no-bottom-card"},{default:n(()=>[r(R,{dimensionCode:i(c),ref_key:"copyRuleEditingBox",ref:u,noEdit:!0},null,8,["dimensionCode"])]),_:1})]),_:1})]),_:1})])}}}),ie=G(J,[["__scopeId","data-v-08b85790"]]);export{ie as default};
