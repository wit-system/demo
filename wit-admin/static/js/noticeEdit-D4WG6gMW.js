var k=(x,V,d)=>new Promise((w,_)=>{var f=n=>{try{e(d.next(n))}catch(r){_(r)}},m=n=>{try{e(d.throw(n))}catch(r){_(r)}},e=n=>n.done?w(n.value):Promise.resolve(n.value).then(f,m);e((d=d.apply(x,V)).next())});import{d as P,aj as z,P as A,r as u,b as U,m as i,o as T,q,aP as D,s as a,y as o,x as v,c as W,F as G,A as H,p as J,av as K,ah as O,_ as Q}from"./index-CmC8Jr0A.js";import X from"./index-Ck6Dl0h3.js";import{g as Y,a as Z,e as ee}from"./notice-DlYTQgQw.js";import"./style-Bdh6i4Yf.js";import"./fileUpload-XyOau-In.js";const te=P({name:"NoticeEdit",__name:"noticeEdit",emits:["fetch-data"],setup(x,{expose:V,emit:d}){const w=z(),_=d,f=A("$baseMessage"),m=u(null),e=U({noticeTitle:"",noticeType:"",noticeContent:"",status:"1",remark:""}),n=U({noticeTitle:[{required:!0,trigger:"blur",message:"请输入公告标题"}],noticeType:[{required:!0,trigger:"blur",message:"请输入公告类型"}],noticeContent:[{required:!0,trigger:"blur",message:"请输入通知内容"}],status:[{required:!0,trigger:"blur",message:"请选择是否启用"}]}),r=u(null),b=u(""),g=u(!1),C=u(!1),E=u("");V({showEdit:(c,t)=>{g.value=!0,E.value=t,K(()=>k(this,null,function*(){if(!c.noticeId)b.value="添加",C.value=!1;else{b.value="编辑",C.value=!0;const{data:s}=yield Y(c.noticeId);e.noticeId=s.noticeId,e.noticeTitle=s.noticeTitle,e.noticeType=s.noticeType,e.noticeContent=s.noticeContent,e.status=s.status,e.remark=s.remark,h()}}))}});const y=()=>{m.value.resetFields(),_("fetch-data"),g.value=!1},M=()=>{m.value.validate(c=>k(this,null,function*(){if(c)if(b.value==="添加"){const{msg:t}=yield Z(e);f(t,"success","hey"),y()}else{const{msg:t}=yield ee(e);f(t,"success","hey"),y()}}))},h=()=>{e.status=="0"?r.value.disable(!0):r.value.disable(!1)};return(c,t)=>{const s=i("el-input"),p=i("el-form-item"),N=i("el-option"),B=i("el-select"),I=i("el-radio"),F=i("el-radio-group"),S=X,$=i("el-form"),R=i("el-button"),j=O;return T(),q(j,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=l=>g.value=l),title:b.value,"append-to-body":"",onClose:y},D({default:a(()=>[o($,{ref_key:"formRef",ref:m,inline:!0,model:e,rules:n,"label-width":"80px"},{default:a(()=>[o(p,{label:"公告标题",prop:"noticeTitle",style:{width:"95%"}},{default:a(()=>[o(s,{modelValue:e.noticeTitle,"onUpdate:modelValue":t[0]||(t[0]=l=>e.noticeTitle=l),modelModifiers:{trim:!0},disabled:e.status=="0",clearable:"",maxlength:"50","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),o(p,{label:"公告类型",prop:"noticeType",style:{width:"400px"}},{default:a(()=>[o(B,{modelValue:e.noticeType,"onUpdate:modelValue":t[1]||(t[1]=l=>e.noticeType=l),modelModifiers:{trim:!0},disabled:e.status=="0",clearable:""},{default:a(()=>[(T(!0),W(G,null,H(J(w).wordbook.sys_notice_type,(l,L)=>(T(),q(N,{key:L,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(p,{label:"是否启用",prop:"status",style:{width:"400px"}},{default:a(()=>[o(F,{modelValue:e.status,"onUpdate:modelValue":t[2]||(t[2]=l=>e.status=l),onChange:h},{default:a(()=>[o(I,{value:"0",label:"是"},{default:a(()=>[v("是")]),_:1}),o(I,{value:"1",label:"否"},{default:a(()=>[v("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"备注",prop:"remark",style:{width:"95%"}},{default:a(()=>[o(s,{modelValue:e.remark,"onUpdate:modelValue":t[3]||(t[3]=l=>e.remark=l),modelModifiers:{trim:!0},autosize:{minRows:2,maxRows:4},disabled:e.status=="0",maxlength:"255","show-word-limit":"",type:"textarea"},null,8,["modelValue","disabled"])]),_:1}),o(p,{label:"通知内容",prop:"noticeContent"},{default:a(()=>[o(S,{ref_key:"wangEditorRef",ref:r,modelValue:e.noticeContent,"onUpdate:modelValue":t[4]||(t[4]=l=>e.noticeContent=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:2},[E.value!==""?{name:"footer",fn:a(()=>[o(R,{onClick:y},{default:a(()=>[v("取 消")]),_:1}),o(R,{type:"primary",onClick:M},{default:a(()=>[v("确 定")]),_:1})]),key:"0"}:void 0]),1032,["modelValue","title"])}}}),de=Q(te,[["__scopeId","data-v-8c1f111d"]]);export{de as default};
