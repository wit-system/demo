var $=Object.defineProperty;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var S=(l,a,e)=>a in l?$(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,v=(l,a)=>{for(var e in a||(a={}))M.call(a,e)&&S(l,e,a[e]);if(x)for(var e of x(a))Q.call(a,e)&&S(l,e,a[e]);return l};var _=(l,a,e)=>new Promise((h,u)=>{var t=n=>{try{d(e.next(n))}catch(g){u(g)}},f=n=>{try{d(e.throw(n))}catch(g){u(g)}},d=n=>n.done?h(n.value):Promise.resolve(n.value).then(t,f);d((e=e.apply(l,a)).next())});import{d as E,a as q,r as c,b as A,ae as O,m as k,o as U,c as I,y as p,s as m,p as i,a6 as P,n as y,ap as C,B as j,C as G,x as H,bE as J,af as K,ag as X,_ as Y}from"./index-BN8uVNSO.js";import{_ as ee}from"./index.vue_vue_type_style_index_0_lang-CYTYEVrP.js";import{c as te,d as ae}from"./drugQuotaManagement-B9Z-Je6u.js";import"./ifComponent.vue_vue_type_style_index_0_lang-TMjKtAQ8.js";import"./index-DxSYlWYB.js";import"./index.vue_vue_type_script_setup_true_lang-BkXq5IQh.js";import"./dict-Ck584AJf.js";const le={class:"no-background-container auto-height-container"},ne=E({__name:"index",setup(l){const a=q(),e=c(!1),h=c([{label:"西药",value:"1"},{label:"中成药",value:"2"},{label:"中药饮片",value:"3"}]),u=c([]),t=c({keyword:"",hosZxFlag:[],total:0}),f=c([{title:"药品名称(商品名)",field:"productName",minWidth:200,align:"left"},{title:"药品名称(通用名)",field:"generalName",minWidth:200,align:"left"},{title:"药品编码",field:"drugCode",minWidth:110,align:"left"},{title:"药品规格",field:"spec",minWidth:85,align:"left"},{title:"批准文号",field:"approvalNo",minWidth:85,align:"left"},{title:"剂型",field:"dosageForm",minWidth:85,align:"left"},{title:"生产厂家",field:"manufacture",minWidth:200,align:"left"},{title:"药品类型",field:"hosZxFlagName",minWidth:78,align:"left"},{title:"配额情况",field:"count",minWidth:85,align:"center",render:!0},{field:"btns",title:"操作",align:"center",width:"100",fixed:"right",render:!0}]),d=A({searchListButtons:[{label:"查 询",isShowLoading:!0,attrs:{type:"primary"},events:{click:g}},{label:"重 置",isShowLoading:!1,attrs:{type:"primary"},events:{click:B}}],searchList:[{type:"input",field:"keyword",isOutBorder:!1,attrs:{placeholder:"请输入药品名称搜索...",width:220,clearable:!0}},{type:"select",field:"hosZxFlag",valueField:"value",labelField:"label",isOutBorder:!1,options:h.value,attrs:{placeholder:"请选择药品类型",width:200,multiple:!0,collapseTags:!0},events:{}}],rightSearchListButtons:[{label:"设置总量",attrs:{type:"primary"},events:{click:F}},{label:"配额使用报表",icon:"icon-icon",attrs:{type:"primary"},events:{click:z}},{label:"刷新缓存",icon:"icon-shuaxin",attrs:{type:"primary"},events:{click:T}}]}),n=c(null);function g(){n.value.search()}function b(){return _(this,null,function*(){let o={keyword:t.value.keyword,hosZxFlag:t.value.hosZxFlag,pageNum:t.value.pageNum,pageSize:t.value.pageSize};const{data:s}=yield ae(o);u.value=s.records||[],t.value.total=s.total||0})}const N=o=>{t.value.pageNum=1,t.value.pageSize=o,b()},w=o=>{t.value.pageNum=o,b()};function F(){a.push("/matchingTools/setTotalAmount")}function z(){a.push("/matchingTools/quotaUsage")}function T(){return _(this,null,function*(){yield te(),O({type:"success",message:"刷新成功"})})}function W(o,s){J("DrugQuotaRow",s),a.push(o)}function B(){let o={keyword:"",hosZxFlag:[]};t.value=v(v({},t.value),o)}return(o,s)=>{const L=ee,R=k("el-button"),D=K,V=X,Z=k("el-card");return U(),I("div",le,[p(Z,{class:"no-bottom-card auto-height-card"},{default:m(()=>[p(L,{ref_key:"witSearchRef",ref:n,modelValue:i(t),"onUpdate:modelValue":s[0]||(s[0]=r=>P(t)?t.value=r:null),isCache:!1,showResult:!1,"search-data":i(d),"search-name":"matching-drugQuotaManagement-search",searching:i(e),border:!1,padding:!1,onSearch:s[1]||(s[1]=r=>w(1))},null,8,["modelValue","search-data","searching"]),p(D,{ref:"tableRef","table-name":"rule-drugQuotaManagement-table",loading:i(e),"table-data":i(u),columns:i(f),isShowTableSet:!1},{count:m(r=>[y("div",null,[y("span",{class:"circleStyle",style:C({backgroundColor:r.row.count==1?"#2d60dd":"#666666"})},null,4),y("span",{style:C({color:r.row.count==1?"#2d60dd":"#666666"})},j(r.row.count==1?"已设置":"未设置"),5)])]),btns:m(r=>[p(R,{text:"",type:"primary",onClick:G(oe=>W("/matchingTools/drugSet",r.row),["stop"])},{default:m(()=>[H("设置")]),_:2},1032,["onClick"])]),_:1},8,["loading","table-data","columns"]),p(V,{"current-page":i(t).pageNum,"page-size":i(t).pageSize,total:i(t).total,"prev-text":"上一页","next-text":"下一页",onCurrentChange:w,onSizeChange:N},null,8,["current-page","page-size","total"])]),_:1})])}}}),me=Y(ne,[["__scopeId","data-v-a5d9acf6"]]);export{me as default};
