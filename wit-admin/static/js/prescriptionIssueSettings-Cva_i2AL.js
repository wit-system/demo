var O=Object.defineProperty;var B=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var q=(i,a,t)=>a in i?O(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t,F=(i,a)=>{for(var t in a||(a={}))X.call(a,t)&&q(i,t,a[t]);if(B)for(var t of B(a))Y.call(a,t)&&q(i,t,a[t]);return i};var y=(i,a,t)=>new Promise((S,m)=>{var g=p=>{try{b(t.next(p))}catch(v){m(v)}},V=p=>{try{b(t.throw(p))}catch(v){m(v)}},b=p=>p.done?S(p.value):Promise.resolve(p.value).then(g,V);b((t=t.apply(i,a)).next())});import Z from"./prescriptionIssueSettingsEdit-BVqply7q.js";import{d as ee,P as M,aj as te,r as f,h as ne,m as _,o as h,c as x,y as s,s as l,n as d,a7 as oe,p as c,F as $,A as E,q as U,x as se,H as ae,af as le,I as ie,J as re,_ as ce}from"./index-9sA7DK8G.js";import{p as de,c as ue,r as pe,d as me}from"./prescriptionIssueSettings-pS7GoePx.js";import"./index-DNTDtGZt.js";const k=i=>(ie("data-v-ee5f19de"),i=i(),re(),i),_e={class:"auto-height-container"},fe={class:"flex space-between"},he=k(()=>d("span",{class:"title"},"处方问题设置",-1)),ge={class:"refresh"},be={class:"prescription-issue-settings-container"},we={class:"padding-out"},ve=k(()=>d("span",null,"添加",-1)),Ce={class:"headerTips"},ye=k(()=>d("div",null,"参数说明",-1)),Se={style:{color:"#354160"}},Ve=k(()=>d("span",{style:{"margin-right":"12px"}},"提示：可在以下表格中编辑参数说明",-1)),xe={class:"headerEdit"},ke=ee({name:"PrescriptionIssueSettings",__name:"prescriptionIssueSettings",setup(i){M("$baseConfirm");const a=M("$baseMessage"),t=te(),S=f([]),m=f(!1),g=f({parentCode:[]}),V=f(null),b=f([]),p=f([{field:"dimensionsName",title:"维度名称",width:"160",align:"right"},{field:"questionName",title:"处方问题设置",width:"215",align:"left"},{field:"btns",title:"条件设置",width:"100",align:"center",render:!0},{field:"opStatus",title:"门诊",width:"100",align:"center",render:!0},{field:"ipStatus",title:"住院",width:"100",align:"center",render:!0},{field:"parameterDescription",title:"参数说明",minWidth:"300",render:!0,isRenderHeader:!0}]),v=()=>"boldFont";function T(o={}){V.value.showEdit(o)}function L(){return y(this,null,function*(){m.value=!0;try{const{data:o}=yield de(g.value);let u=[];(o||[]).forEach(r=>{!r.dimensionsList||r.dimensionsList.length<1?u.push(r):r.dimensionsList.forEach((N,C)=>{let w=F({dimensionsName:r.dimensionsName,dimensionsCode:r.dimensionsCode},N);C===0&&(w.dimensionsList=r.dimensionsList.length),u.push(w)})}),m.value=!1,b.value=u}catch(o){m.value=!1}})}function j(){return y(this,null,function*(){const{data:o}=yield ue();S.value=o})}const D=f(!1);function H(){return y(this,null,function*(){D.value=!0;const{msg:o}=yield pe();D.value=!1,a(o,"success","hey")})}function Q({row:o,columnIndex:u}){if(u==0)return o.dimensionsList?{rowspan:o.dimensionsList,colspan:1}:{rowspan:0,colspan:0}}function z({columnIndex:o}){return o===0?"col-grey":null}function I(o){return y(this,null,function*(){const{msg:u}=yield me(o);a(u,"success","hey")})}return ne(()=>{L(),j()}),(o,u)=>{const r=ae,N=_("el-tooltip"),C=_("el-option"),w=_("el-select"),R=_("el-button"),P=_("el-form-item"),A=_("el-form"),J=_("el-input"),W=le,G=_("el-card"),K=Z;return h(),x("div",_e,[s(G,{shadow:"never"},{header:l(()=>[d("div",fe,[he,d("div",ge,[s(N,{class:"box-item",effect:"dark",content:"刷新缓存",placement:"top"},{default:l(()=>[s(r,{icon:"icon-gengxin",class:oe({"refresh-icon":!0,"loading-animation":c(D)}),onClick:H,style:{padding:"4px"}},null,8,["class"])]),_:1})])])]),default:l(()=>[d("div",be,[s(A,{ref:"formRef","label-width":"92px",model:c(g),"label-position":"left"},{default:l(()=>[s(P,{label:"一级规则筛选"},{default:l(()=>[s(w,{modelValue:c(g).parentCode,"onUpdate:modelValue":u[0]||(u[0]=e=>c(g).parentCode=e),multiple:"","collapse-tags":"",filterable:"",style:{width:"300px","margin-right":"8px"},placeholder:"请选择（可多选）"},{default:l(()=>[(h(!0),x($,null,E(c(S),e=>(h(),U(C,{key:e.dimensionsCode,label:e.dimensionsName,value:e.dimensionsCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(R,{type:"primary",loading:c(m),onClick:L},{default:l(()=>[se("搜 索")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),d("div",we,[s(W,{class:"drug-table","table-name":"system-prescriptionIssueSettings",loading:c(m),tableData:c(b),columns:c(p),isShowTableSet:!1,stripe:!0,"span-method":Q,"cell-class-name":z,"header-cell-class-name":v,isVirtuallyScroll:!1},{btns:l(e=>[s(R,{text:"",type:"primary",onClick:n=>T(e.row)},{default:l(()=>[s(r,{icon:"icon-xinzengdianpingjihua"}),ve]),_:2},1032,["onClick"])]),opStatus:l(e=>[s(w,{modelValue:e.row.opStatus,"onUpdate:modelValue":n=>e.row.opStatus=n,onChange:n=>I(e.row),placeholder:"请选择"},{default:l(()=>[(h(!0),x($,null,E(c(t).wordbook.problem_level_other,n=>(h(),U(C,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),ipStatus:l(e=>[s(w,{modelValue:e.row.ipStatus,"onUpdate:modelValue":n=>e.row.ipStatus=n,onChange:n=>I(e.row),placeholder:"请选择"},{default:l(()=>[(h(!0),x($,null,E(c(t).wordbook.problem_level_other,n=>(h(),U(C,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),parameterDescription:l(e=>[s(J,{modelValue:e.row.parameterDescription,"onUpdate:modelValue":n=>e.row.parameterDescription=n,onChange:n=>I(e.row),class:"tipsInput"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),parameterDescriptionHeader:l(()=>[d("div",Ce,[ye,d("div",Se,[s(r,{icon:"icon-xintishi",style:{"margin-right":"8px",color:"#fc9f15"}}),Ve,d("span",xe,[s(r,{icon:"icon-xiugai"})])])])]),_:1},8,["loading","tableData","columns"])])])]),_:1}),s(K,{ref_key:"issueEditRef",ref:V,onFetchData:L},null,512)])}}}),Ee=ce(ke,[["__scopeId","data-v-ee5f19de"]]);export{Ee as default};
