var b=($,h,o)=>new Promise((g,i)=>{var f=l=>{try{_(o.next(l))}catch(p){i(p)}},C=l=>{try{_(o.throw(l))}catch(p){i(p)}},_=l=>l.done?g(l.value):Promise.resolve(l.value).then(f,C);_((o=o.apply($,h)).next())});import U from"./ruleCustomParametersEdit-ds2tPW7l.js";import{d as q,P as L,r as u,h as A,m as V,o as H,c as I,n as d,y as a,s,B as x,p as r,C as k,x as B,H as Q,af as G,ag as J}from"./index-C3-31E46.js";import{f as K,g as M,h as X}from"./ruleCustomParameters-XoFX0xKS.js";import{g as S}from"./dict-Bt1K3r7e.js";const Y={class:"rule-container auto-height-container"},Z={class:"app-content padding-out"},ee={class:"top-btn"},te=d("span",null,"批量删除",-1),ne=d("span",null,"新增",-1),ae={class:"app-pagination"},ce=q({__name:"index",setup($){const h=L("$baseConfirm"),o=L("$baseMessage"),g=u(!0),i=u({pageSize:20,pageNum:1}),f=u(null),C=u([]),_=u(0),l=u([{width:"40",type:"checkbox"},{field:"typeCode",title:"参数大类",minWidth:"120",render:!0},{field:"paramCode",title:"参数编码",minWidth:"130"},{field:"paramName",title:"参数名称",minWidth:"140"},{field:"logicalOperatorList",title:"逻辑运算符",minWidth:"140",render:!0},{field:"controlType",title:"控件类型",minWidth:"140",render:!0},{field:"active",title:"启用状态",width:"100",align:"center",render:!0},{field:"btns",title:"操作",align:"center",width:"120",fixed:"right",render:!0}]),p=u(null);function z(e={}){e.id?p.value.showEdit(e):p.value.showEdit()}function P(e){K(e).then(({msg:n})=>{o(n,"success","hey")}).catch(()=>{m()})}const w=u([]),E=()=>{w.value=f.value.tableMethods("getCheckboxRecords")};function R(e){let n=[];for(let c in e)n.push(S("rule_logical_operators",e[c]));return n.toString()}const N=(e={})=>{if(e.id)h("您确定要删除当前项吗",null,()=>b(this,null,function*(){const{msg:n}=yield M([e.id]);o(n,"success","hey"),yield m()}));else if(w.value.length>0){const n=w.value.map(c=>c.id);h("您确定要删除选中项吗",null,()=>b(this,null,function*(){const{msg:c}=yield M(n);o(c,"success","hey"),yield m()}))}else o("您未选中任何行","warning","hey")};function T(e){i.value.pageNum=1,i.value.pageSize=e,m()}function W(e){i.value.pageNum=e,m()}function m(){return b(this,null,function*(){g.value=!0;const{data:e}=yield X(i.value);C.value=e.records,_.value=e.total,g.value=!1})}return A(()=>{m()}),(e,n)=>{const c=Q,v=V("el-button"),D=V("el-switch"),O=G,j=J,F=U;return H(),I("div",Y,[d("div",Z,[d("div",ee,[a(v,{type:"primary",plain:"",onClick:N},{default:s(()=>[a(c,{icon:"icon-piliangcaozuo"}),te]),_:1}),a(v,{type:"warning",plain:"",onClick:z},{default:s(()=>[a(c,{icon:"icon-xinzengdianpingjihua"}),ne]),_:1})]),a(O,{ref_key:"tableRef",ref:f,"table-name":"rule-custom-parameters-table",loading:r(g),"table-data":r(C),columns:r(l),"checkbox-config":{trigger:"row"},onCheckboxChange:E,onCheckboxAll:E},{typeCode:s(t=>[d("span",null,x(r(S)("rule_param_type",t.row.typeCode)),1)]),logicalOperatorList:s(t=>[d("span",null,x(R(t.row.logicalOperatorList)),1)]),controlType:s(t=>[d("span",null,x(r(S)("rule_control_type",t.row.controlType)),1)]),active:s(t=>[a(D,{modelValue:t.row.active,"onUpdate:modelValue":y=>t.row.active=y,loading:r(g),onClick:n[0]||(n[0]=k(()=>{},["stop"])),onChange:y=>P(t.row),"active-value":"0","inactive-value":"1"},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),btns:s(t=>[a(v,{text:"",type:"primary",onClick:k(y=>z(t.row),["stop"])},{default:s(()=>[B("编辑")]),_:2},1032,["onClick"]),a(v,{text:"",type:"primary",onClick:k(y=>N(t.row),["stop"])},{default:s(()=>[B("删除")]),_:2},1032,["onClick"])]),_:1},8,["loading","table-data","columns"])]),d("div",ae,[a(j,{"current-page":r(i).pageNum,"page-size":r(i).pageSize,total:r(_),"prev-text":"上一页","next-text":"下一页",onCurrentChange:W,onSizeChange:T},null,8,["current-page","page-size","total"])]),a(F,{ref_key:"ruleCustomParametersEditRef",ref:p,onQuery:m},null,512)])}}});export{ce as default};
