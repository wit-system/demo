var g=(k,v,l)=>new Promise((i,r)=>{var c=t=>{try{d(l.next(t))}catch(p){r(p)}},m=t=>{try{d(l.throw(t))}catch(p){r(p)}},d=t=>t.done?i(t.value):Promise.resolve(t.value).then(c,m);d((l=l.apply(k,v)).next())});import{g as T,d as z,_ as j}from"./DepartmentManagementEdit-CJRpKO97.js";import{_ as q}from"./index.vue_vue_type_style_index_0_lang-Rf1iYlx6.js";import{d as O,P as D,r as u,h as R,b as A,ai as I,m as b,T as P,o as f,c as C,y as e,n as U,t as G,q as H,s,z as B,x as w}from"./index-C3-31E46.js";import"./ifComponent.vue_vue_type_style_index_0_lang-h1Ozx49r.js";import"./index-B93FDT35.js";import"./index.vue_vue_type_script_setup_true_lang-DLP8ok9d.js";import"./dict-Bt1K3r7e.js";const J={class:"department-management-container auto-height-container"},K={class:"app-content padding-out"},Q={key:0},W={key:1},se=O({name:"DepartmentManagement",__name:"index",setup(k){const v=D("$baseConfirm"),l=D("$baseMessage"),i=u(!1),r=u(null),c=u({deptName:"",status:"",pageNum:1,pageSize:20}),m=u([]);R(()=>{_()});const d=A({searchList:[{type:"input",field:"deptName",label:"组织名称：",isOutBorder:!0,attrs:{width:180,placeholder:"请输入组织名称",clearable:!0},events:{}},{type:"select",field:"status",label:"状态",isOutBorder:!0,valueField:"institutionCode",labelField:"institutionName",options:[{institutionCode:"0",institutionName:"开启"},{institutionCode:"1",institutionName:"停用"}],attrs:{width:180,clearable:!0},events:{}}],searchListButtons:[{label:"搜 索",isShowLoading:!0,attrs:{type:"primary"},events:{click:p}},{label:"新建",icon:"icon-xinzengdianpingjihua",attrs:{type:"warning"},events:{click:x}}]}),t=u();function p(){t.value.search()}function _(){return g(this,null,function*(){i.value=!0;const{data:a}=yield T(c.value);i.value=!1,m.value=I(a,"deptCode","parentCode","children")})}function x(a){r.value.showEdit(a,"add")}const $=a=>{r.value.showEdit(a,"edit")},V=a=>{a.deptId&&v("您确定要删除当前组织吗",null,()=>g(this,null,function*(){const{msg:h}=yield z(a);l(h,"success","hey"),yield _()}))};return(a,h)=>{const S=q,o=b("el-table-column"),y=b("el-button"),L=b("el-empty"),M=b("el-table"),E=j,F=P("loading");return f(),C("div",J,[e(S,{ref_key:"refSearch",ref:t,modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=n=>c.value=n),"search-data":d,"search-name":"system-departmentManagement",searching:i.value,onSearch:_},null,8,["modelValue","search-data","searching"]),U("div",K,[G((f(),H(M,{data:m.value,border:"","default-expand-all":"","row-key":"deptCode",style:{width:"100%","margin-bottom":"20px"}},{empty:s(()=>[e(L,{class:"wit-data-empty",description:"暂无数据"})]),default:s(()=>[e(o,{label:"组织名称",prop:"deptName",sortable:""}),e(o,{label:"组织编码",prop:"deptCode",width:"120",sortable:""}),e(o,{label:"负责人",prop:"leader",sortable:"",width:"100"}),e(o,{label:"排序",prop:"orderNum",sortable:"",width:"80"}),e(o,{label:"状态",prop:"status",sortable:"",width:"80"},{default:s(({row:n})=>[n.status==="0"?(f(),C("span",Q,"开启")):B("",!0),n.status==="1"?(f(),C("span",W,"停用")):B("",!0)]),_:1}),e(o,{label:"创建时间",prop:"createTime",sortable:"",width:"165"}),e(o,{label:"操作",prop:"leader",sortable:"",width:"190"},{default:s(({row:n})=>[e(y,{text:"",type:"primary",onClick:N=>x(n)},{default:s(()=>[w("新增")]),_:2},1032,["onClick"]),e(y,{text:"",type:"primary",onClick:N=>$(n)},{default:s(()=>[w("修改")]),_:2},1032,["onClick"]),e(y,{text:"",type:"primary",onClick:N=>V(n)},{default:s(()=>[w("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,i.value]])]),e(E,{ref_key:"editRef",ref:r,onFetchData:_},null,512)])}}});export{se as default};
